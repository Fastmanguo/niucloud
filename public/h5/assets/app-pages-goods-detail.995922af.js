import{z as e,o as a,c as l,w as s,l as t,M as o,N as r,y as c,a5 as i,A as n,D as d,h as f,a6 as p,a7 as m,F as u,G as _,e as x,H as g,I as b,v as h,x as y,m as v,t as w,d as k,a8 as C,a9 as z,i as j,aa as P,ab as G,O as S,ac as A,ad as O,Z as B,ae as F,n as I,P as T,S as W,af as M,Y as N,V as D,a2 as H,ag as K,_ as V}from"./index-cbc43b2f.js";import{a as Y}from"./goods.fb09a59a.js";const Z=e({__name:"loading-page",props:{loading:{type:Boolean,default:!1},iconSize:{type:String||Number,default:30},bgColor:{type:String,default:"rgb(248,248,248)"}},setup(e){const n=e;return(e,d)=>{const f=o(r("u-loading-page"),i),p=c;return a(),l(p,null,{default:s((()=>[t(f,{class:"","bg-color":"props.bgColor","icon-size":"props.iconSize",loading:n.loading,loadingText:""},null,8,["loading"])])),_:1})}}}),q=V(e({__name:"detail",setup(e){const i=n({goods_id:null,form:{},show:{grid:!0},currentSwiper:0,screenWidth:0,loading:!0,error:!1,showGrid:!1}),V=d(0);i.screenWidth=f().windowWidth/3-10;p((e=>{if(!e.goods_id)return m({url:"/app/pages/index/index"});i.goods_id=e.goods_id,Y(i.goods_id).then((({data:e})=>{i.form=e})).catch((()=>{i.error=!0})).finally((()=>{i.loading=!1}))}));const q=d(!1),E=()=>{uni.getSetting({success(e){e.authSetting["scope.writePhotosAlbum"]?J():uni.authorize({scope:"scope.writePhotosAlbum",success(){J()}})}})},J=async()=>{q.value=!1;let e=i.form.goods_image;C();for(let a=0;a<e.length;a++)await new Promise(((l,s)=>{z({url:j(e[a]),success:e=>{P({filePath:e.tempFilePath,success:()=>{l(!0),G({title:S("appc.download_success"),icon:"none"})},fail:e=>{console.error("save file error",e),l(!1)}})},fail:e=>{console.error("download file error",e),l(!1)}})}));A()},L=e=>{O(e,(()=>{G({title:S("appc.copy_success"),icon:"none"})}))};return(e,n)=>{const d=o(r("up-navbar"),W),f=c,p=o(r("up-swiper"),M),m=o(r("up-image"),N),C=B,z=o(r("up-icon"),D),P=o(r("up-button"),H),G=o(r("up-modal"),K);return a(),u(g,null,[i.loading?x("v-if",!0):(a(),l(f,{key:0,style:k(e.themeColor())},{default:s((()=>[t(d,{title:_(S)("appc.product_detail"),autoBack:!0,safeAreaInsetTop:!0,placeholder:!0},null,8,["title"]),x(" 轮播图 "),t(f,{class:"!mb-[8px]"},{default:s((()=>[i.form.goods_image&&!i.showGrid?(a(),l(p,{key:0,list:_(F)(i.form.goods_image),onClick:n[0]||(n[0]=()=>{}),class:"mb-2",height:"300px",autoplay:!1,radius:"0",indicator:!0,circular:!0,bgColor:"#fff",onChange:n[1]||(n[1]=e=>V.value=e.current),indicatorActiveColor:"#fff",indicatorMode:"dot"},{indicator:s((()=>[t(f,{class:"indicator"},{default:s((()=>[(a(!0),u(g,null,b(i.form.goods_image,((e,s)=>(a(),l(f,{class:I(["indicator__dot",[s===V.value&&"indicator__dot--active"]]),key:s},null,8,["class"])))),128))])),_:1})])),_:1},8,["list"])):x("v-if",!0)])),_:1}),x(" 宫格 "),i.form.goods_image?h((a(),l(f,{key:0,class:"grid grid-cols-3 gap-x-[8px] items-center m-[8px] !mb-[0px]"},{default:s((()=>[(a(!0),u(g,null,b(i.form.goods_image,((e,o)=>(a(),l(f,{key:e,class:"mb-[8px]"},{default:s((()=>[t(m,{"show-loading":!0,src:_(j)(e),width:"100%",radius:"4px",mode:"aspectFill",height:"120px",class:"flex items-center justify-center rounded bg-[#fff]"},null,8,["src"])])),_:2},1024)))),128))])),_:1},512)),[[y,i.showGrid]]):x("v-if",!0),t(f,{class:"flex flex-col bg-[#fff] m-[8px] p-4 rounded mt-[0px]"},{default:s((()=>[t(f,{class:"flex items-baseline text-[14px] box-border custom-title mb-2"},{default:s((()=>[t(C,{class:"bg-[var(--theme-color-primary)] text-[#fff] text-xs px-[5px] py-[1px] rounded-sm leading-5 mr-1"},{default:s((()=>[v(w(_(S)(i.form.condition)),1)])),_:1}),t(C,{class:"leading-5"},{default:s((()=>[v(w(i.form.goods_name?i.form.goods_name:""),1)])),_:1})])),_:1}),t(f,{class:"flex flex-col"},{default:s((()=>[t(f,{class:"flex justify-between items-center text-[24rpx] leading-5"},{default:s((()=>[x(" 销售价 "),i.form.price?(a(),l(f,{key:0,class:"flex flex-col items-baseline"},{default:s((()=>[t(z,{name:"rmb",size:"12",labelColor:"var(--theme-text-red)",class:"my-1",space:"0",bold:"",color:"var(--theme-text-red)",label:_(T)(i.form.price),labelPos:"right"},null,8,["label"]),t(f,{class:"mr-1"},{default:s((()=>[v(w(_(S)("appc.price")),1)])),_:1})])),_:1})):x("v-if",!0),x(" 代理价 "),i.form.agent_price?(a(),l(f,{key:1,class:"flex flex-col items-baseline"},{default:s((()=>[t(z,{name:"rmb",size:"12",bold:"",labelColor:"var(--theme-color-main)",class:"my-1",space:"0",label:_(T)(i.form.agent_price),labelPos:"right"},null,8,["label"]),t(f,{class:"mr-1"},{default:s((()=>[v(w(_(S)("appc.agent_price")),1)])),_:1})])),_:1})):x("v-if",!0),x(" 成本价 "),i.form.total_cost?(a(),l(f,{key:2,class:"flex flex-col items-baseline"},{default:s((()=>[t(z,{name:"rmb",size:"12",bold:"",labelColor:"var(--theme-color-main)",class:"my-1",space:"0",label:_(T)(i.form.total_cost),labelPos:"right"},null,8,["label"]),t(f,{class:"mr-1"},{default:s((()=>[v(w(_(S)("appc.total_cost")),1)])),_:1})])),_:1})):x("v-if",!0),x(" 同行价 "),i.form.peer_price?(a(),l(f,{key:3,class:"flex flex-col items-baseline"},{default:s((()=>[t(z,{name:"rmb",size:"12",bold:"",labelColor:"var(--theme-color-main)",class:"my-1",space:"0",label:_(T)(i.form.peer_price),labelPos:"right"},null,8,["label"]),t(f,{class:"mr-1"},{default:s((()=>[v(w(_(S)("appc.peer_price")),1)])),_:1})])),_:1})):x("v-if",!0)])),_:1})])),_:1})])),_:1}),t(f,{class:"flex flex-col bg-[#fff] m-2 p-3 rounded box-border text-[var(--theme-color-main)]"},{default:s((()=>[x(" 商品信息 "),t(f,{class:"flex items-center text-base mb-3 font-bold"},{default:s((()=>[t(z,{name:"/static/assets/flag.png",height:"14px",width:"8px",class:"mr-1 rounded"}),t(f,{class:"text-[var(--theme-color-main)]"},{default:s((()=>[v(w(_(S)("appc.product_info")),1)])),_:1})])),_:1}),x(" 商品描述 "),t(f,{class:"flex justify-between items-center"},{default:s((()=>[t(f,null,{default:s((()=>[v(w(_(S)("appc.goods_description")),1)])),_:1}),t(f,{onClick:n[2]||(n[2]=e=>L(i.form.goods_desc)),class:"text-[var(--theme-color-primary)] text-xs"},{default:s((()=>[v(w(_(S)("appc.copy")),1)])),_:1})])),_:1}),t(f,{class:"bg-[var(--theme-upload-bg)] p-2 rounded text-[var(--theme-color-content)] mt-1 mb-2"},{default:s((()=>[v(w(i.form.goods_desc?i.form.goods_desc:_(S)("appc.nothing")),1)])),_:1}),x(" 品牌 "),t(f,{class:"flex justify-between items-center mb-2"},{default:s((()=>[t(f,null,{default:s((()=>[v(w(_(S)("appc.brand")),1)])),_:1}),t(f,{class:"flex items-center text-[var(--theme-color-tips)]"},{default:s((()=>[v(w(i.form.brand_name||_(S)("appc.nothing")),1)])),_:1})])),_:1}),x(" 系列 "),t(f,{class:"flex justify-between items-center mb-2"},{default:s((()=>[t(f,null,{default:s((()=>[v(w(_(S)("appc.series")),1)])),_:1}),t(f,{class:"flex items-center text-[var(--theme-color-tips)]"},{default:s((()=>[v(w(i.form.series_name||_(S)("appc.nothing")),1)])),_:1})])),_:1}),x(" 型号 "),t(f,{class:"flex justify-between items-center mb-2"},{default:s((()=>[t(f,null,{default:s((()=>[v(w(_(S)("appc.model")),1)])),_:1}),t(f,{class:"flex items-center text-[var(--theme-color-tips)]"},{default:s((()=>[v(w(i.form.model_name||_(S)("appc.nothing")),1)])),_:1})])),_:1})])),_:1}),t(f,{class:"main-fix-footer-safe"}),x(" 固定在底部 "),t(f,{class:"main-fix-footer bg-[#fff] gap-x-[10px] flex justify-between items-center text-xs text-[var(--theme-color-primary)]"},{default:s((()=>[x(" 宫格/轮播切换 "),t(f,{class:"flex flex-col items-center flex-1",onClick:n[3]||(n[3]=e=>i.showGrid=!i.showGrid)},{default:s((()=>[t(z,{name:i.showGrid?"grid":"grid-fill",size:"20",color:"#e0b87a"},null,8,["name"]),t(f,null,{default:s((()=>[v(w(i.showGrid?_(S)("appc.switch_grids"):_(S)("appc.switch_swiper")),1)])),_:1})])),_:1}),x(" 复制文字 "),t(f,{class:"flex flex-col items-center flex-1",onClick:n[4]||(n[4]=e=>L(i.form.goods_desc))},{default:s((()=>[t(z,{name:"/static/assets/product/copy.png",size:"20"}),t(f,null,{default:s((()=>[v(w(_(S)("appc.copy_text")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["style"])),x(" 提示框 "),t(G,{show:q.value,content:_(S)("form.system_code.tips"),closeOnClickOverlay:!0,width:"300px",contentTextAlign:"center"},{confirmButton:s((()=>[t(f,{class:"flex gap-3"},{default:s((()=>[t(P,{onClick:n[5]||(n[5]=e=>q.value=!1),color:"var(--theme-color-primary)",plain:"",text:_(S)("appc.cancel")},null,8,["text"]),t(P,{color:"var(--theme-color-primary)",text:_(S)("appc.OK"),onClick:E},null,8,["text"])])),_:1})])),default:s((()=>[t(f,{class:"flex flex-col text-base justify-start"},{default:s((()=>[t(f,{class:"mb-3 text-center"},{default:s((()=>[v(w(_(S)("appc.tips")),1)])),_:1}),t(f,{class:"text-sm"},{default:s((()=>[v(w(_(S)("appc.download_tips")),1)])),_:1})])),_:1})])),_:1},8,["show","content"]),t(Z,{loading:i.loading},null,8,["loading"])],64)}}}),[["__scopeId","data-v-76986d7d"]]);export{q as default};
