import{aD as a,d as e,r as t,B as s,b as l,c as r,bO as o,ac as n,o as u,e as c,w as p,f,u as i,a2 as d,p as x,t as m,h as _,n as b,T as v,a as y,bP as h,q as T,i as w,M as g,s as C,ag as P}from"./index-VHk1sExB.js";import{_ as j}from"./top-tabbar.B-zRVq2p.js";import{t as k}from"./topTabbar.ClSS_mln.js";import"./manifest.BsDGljPW.js";const B=e({__name:"result",setup(e){const B=t(null),R=t(!1);let $="",E=0,L=0;let M=k().setTopTabbarParam({title:"",isBack:!1});s((a=>{$=a.trade_type,E=a.trade_id,O()}));const O=()=>{(function(e,t){return a.get(`pay/info/${e}/${t}`,{},{showErrorMessage:!0})})($,E).then((a=>{if(!uni.$u.test.isEmpty(a.data)){if(1==a.data.status&&L<5)return R.value=!0,L++,void setTimeout((()=>{O()}),1e3);B.value=a.data,R.value=!1}}))},V=()=>{var a;const e=decodeURIComponent(v("payReturn"));y(e?{url:e,mode:"reLaunch"}:{url:h(),param:{code:null==(a=B.value)?void 0:a.out_trade_no},mode:"reLaunch"})};return(a,e)=>{const t=l(r("top-tabbar"),j),s=T,v=w,y=g,h=l(r("u-loading-icon"),o),k=l(r("u-modal"),n);return u(),c(v,{style:b(a.themeColor())},{default:p((()=>[B.value?(u(),c(v,{key:0,class:"w-screen h-screen flex flex-col items-center"},{default:p((()=>[f(t,{ref:"topTabbarRef",data:i(M)},null,8,["data"]),f(v,{class:"flex-1 flex flex-col items-center w-full pt-[180rpx]"},{default:p((()=>[f(v,{class:d(["flex items-baseline",{"text-[#06c05d]":2==B.value.status,"text-red":2!=B.value.status}])},{default:p((()=>[f(s,{class:d(["nc-iconfont -mb-[4rpx] !text-[32rpx]",{"nc-icon-duihaoV6mm":2==B.value.status,"nc-icon-tanhaoV6mm":2!=B.value.status}])},null,8,["class"]),f(s,{class:"text-[36rpx] ml-[16rpx] font-500"},{default:p((()=>[x(m(2==B.value.status?"支付成功":"支付失败"),1)])),_:1})])),_:1},8,["class"]),f(v,{class:"text-[56rpx] font-500 mt-[60rpx] price-font"},{default:p((()=>[f(s,{class:"text-[36rpx] mr-[6rpx]"},{default:p((()=>[x(m(i(C)("currency")),1)])),_:1}),f(s,null,{default:p((()=>[x(m(i(P)(B.value.money)),1)])),_:1})])),_:1})])),_:1}),f(v,{class:"pb-[260rpx]"},{default:p((()=>[f(y,{class:"w-[380rpx] !border-0 h-[80rpx] text-[28rpx] text-[#333] !bg-[#f2f2f2] flex-center font-500 rounded-[20rpx]",plain:!0,onClick:V},{default:p((()=>[x(m(2==B.value.status?i(C)("complete"):i(C)("close")),1)])),_:1})])),_:1})])),_:1})):_("",!0),f(k,{show:R.value,showCancelButton:!0,confirmText:i(C)("pay.completePay"),cancelText:i(C)("pay.incompletePay"),onCancel:V,confirmColor:"var(--primary-color)"},{default:p((()=>[f(v,{class:"py-[20rpx]"},{default:p((()=>[f(h,{text:i(C)("pay.getting"),textSize:"16",mode:"circle",vertical:!0},null,8,["text"])])),_:1})])),_:1},8,["show","confirmText","cancelText"])])),_:1},8,["style"])}}});export{B as default};
