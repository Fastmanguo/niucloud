import{d as e,r as t,S as a,Z as l,y as s,B as o,F as r,T as c,bb as d,b as i,x as n,c as m,l as f,bY as _,bG as u,bZ as p,U as x,G as h,$ as g,cQ as b,o as y,a0 as v,f as w,w as k,u as j,p as C,t as z,e as V,n as U,a1 as $,s as S,c1 as L,a as A,E as T,i as B,q as E,Q as F,c6 as G,_ as I}from"./index-VHk1sExB.js";import{_ as Q}from"./loading-page.vue_vue_type_script_setup_true_lang._vb0LNCj.js";import{g as Y}from"./warehouse.DBo3FtFy.js";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang.B7--v8If.js";import{c as q}from"./index.CNqs6UPm.js";import{d as D}from"./index.Fn-ZefLP.js";import{b as M}from"./identify.CRzQNbVH.js";const N=I(e({__name:"add",setup(e){const I=t(),N=t(!1),P=t(!1),R=a([[]]);l((()=>{(()=>{const e=(new Date).getFullYear(),t=[];for(let a=0;a<=50;a++){const l=e-a;t.push({label:`${l}${S("years")}`,id:l})}R[0]=t})()}));const H={site_id:1,order_no:0,goods_cover:"",goods_image:[],goods_name:"",goods_code:"",goods_attachment:[],category_id:1,brand_id:"",brand_name:"",series_id:"",series_name:"",model_id:"",model_name:"",status:0,original_cost:0,cost:0,money:0,year:"",currency_code:"",create_uid:0,create_time:"",update_time:""},J=a({form:{},rules:{},loading:!0,init:!1,option:{},type:""}),K=a({categoryList:[],goods_attachment:[]}),O=s((()=>{const e=K.categoryList.find((e=>e.category_id===J.form.category_id));return e?e.category_name:""}));o((e=>{J.option=e||{},(async()=>{const e=J.option;J.loading=!0,e&&(J.form={...H,...e});let t=[];["goods_attachment"].forEach((e=>t.push((()=>X(e))))),await L(t,10),Y().then((e=>{K.categoryList=e.data})),J.loading=!1,J.init=!0})()})),r((()=>{J.init&&W()}));const W=()=>{let e=c("saler_tools_select_brand_id");e&&(J.form.brand_id!==e.brand_id&&(J.form.series_id="",J.form.model_id=""),J.form.brand_id=e.brand_id,J.form.brand_name=`${e.brand_name}/${e.brand_en}`);let t=c("saler_tools_select_series_id");t&&(J.form.series_id!==t.series_id&&(J.form.model_id="",J.form.model_name=""),J.form.series_name=t.series_name,J.form.series_id=t.series_id);let a=c("saler_tools_select_model_id");a&&(J.form.model_id=a.model_id,J.form.model_name=a.model_name),d({key:"saler_tools_select_brand_id"}),d({key:"saler_tools_select_model_id"}),d({key:"saler_tools_select_series_id"})},X=e=>G(e).then((({data:t})=>{K[e]=t})),ee=e=>{"no_attachment"==e&&(J.form.goods_attachment=["no_attachment"])},te=()=>{A({url:"/addon/saler_tools/pages/product/brand",param:{type:"select"}})},ae=()=>{if(!J.form.brand_id)return T({title:S("form.before_select_brand"),icon:"none"});A({url:"/addon/saler_tools/pages/product/series",param:{type:"select",brand_id:J.form.brand_id}})},le=()=>{if(!J.form.brand_id)return T({title:S("form.before_select_brand"),icon:"none"});A({url:"/addon/saler_tools/pages/product/model",param:{type:"select",series_id:J.form.series_id,brand_id:J.form.brand_id}})},se=e=>{J.form.year=e.value[0].label,P.value=!1},oe=t(!1);return(e,t)=>{const a=i(m("up-navbar"),n),l=B,s=E,o=i(m("up-icon"),f),r=i(m("up-line"),_),c=i(m("up-text"),u),d=i(m("up-textarea"),p),L=i(m("up-input"),x),A=i(m("up-checkbox"),h),G=i(m("up-button"),g),Y=i(m("up-picker"),b),H=i(m("loading-page"),Q);return y(),v($,null,[w(l,{style:U(e.themeColor()),class:"relative mb-[20px]"},{default:k((()=>[w(a,{title:j(S)("place_order"),autoBack:!1,safeAreaInsetTop:!0,placeholder:!0,onLeftClick:t[0]||(t[0]=e=>j(F)())},null,8,["title"]),w(l,{class:"custom-button m-2 bg-[#fff] box-border rounded"},{default:k((()=>[w(l,{class:"p-3 flex flex-col"},{default:k((()=>[w(l,{class:"flex text-[14px]"},{default:k((()=>[C(z(j(S)("appraisal_photo"))+" ",1),w(l,{class:"text-rose-500"},{default:k((()=>[C("*")])),_:1})])),_:1}),w(l,{class:"text-[#909399] text-xs mt-[10rpx] leading-4"},{default:k((()=>[w(s,null,{default:k((()=>[C(z(j(S)("appraisal_tips")),1)])),_:1})])),_:1}),w(l,{class:"flex mt-[20rpx] justify-between"},{default:k((()=>[w(Z,{width:"100",height:"100","icon-size":"30",max:50,modelValue:J.form.goods_image,"onUpdate:modelValue":t[1]||(t[1]=e=>J.form.goods_image=e),"value-type":"array","result-type":"array"},{default:k((()=>[w(l,{class:"flex flex-col justify-center items-center bg-[#f4f5f7] w-[100px] h-[100px]"},{default:k((()=>[w(o,{size:"30",name:"camera-fill",color:"var(--theme-color-primary)"}),w(l,{class:"text-[#999] text-[12px]"},{default:k((()=>[C(z(j(S)("upload_photos")),1)])),_:1}),w(l,{class:"text-[#999] text-[12px] mt-[2px]"},{default:k((()=>[C(z(j(S)("max_img_count50")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),w(l,{class:"custom-button m-2 bg-[#fff] box-border rounded"},{default:k((()=>[w(l,{class:"p-3 pb-2 flex flex-col"},{default:k((()=>[w(l,{class:"flex justift-start items-center"},{default:k((()=>[w(o,{name:"/static/assets/flag.png",height:"13px",width:"8px",class:"mr-1 rounded"}),w(l,{class:"text-[var(--theme-color-main)] text-[14px]"},{default:k((()=>[w(s,{class:"font-bold"},{default:k((()=>[C(z(j(S)("is_have_attachment")),1)])),_:1}),w(s,{class:"text-[var(--theme-color-content)]"},{default:k((()=>[C(" （"+z(j(S)("multiple_choice"))+"） ",1)])),_:1})])),_:1})])),_:1}),w(l,{class:"grid grid-cols-3 mt-2 gap-2 text-[var(--theme-color-content)] text-xs leading-6"},{default:k((()=>[w(q,{modelValue:J.form.goods_attachment,"onUpdate:modelValue":t[2]||(t[2]=e=>J.form.goods_attachment=e),data:K.goods_attachment,props:{label:"name",value:"value"},format:e=>j(S)(e),onChange:ee},null,8,["modelValue","data","format"])])),_:1})])),_:1}),w(r),w(l,{class:"p-3 flex items-center justify-between text-[14px]"},{default:k((()=>[w(l,{class:"flex justift-start items-center"},{default:k((()=>[w(o,{name:"/static/assets/flag.png",height:"13px",width:"8px",class:"mr-1 rounded"}),w(l,{class:"text-[var(--theme-color-main)] font-bold"},{default:k((()=>[C(z(j(S)("form.year")),1)])),_:1})])),_:1}),w(l,{class:"flex items-center h-[14px]",onClick:t[3]||(t[3]=e=>P.value=!0)},{default:k((()=>[J.form.year?(y(),V(c,{key:0,text:J.form.year,size:"14"},null,8,["text"])):(y(),V(c,{key:1,color:"#C0C4CC",text:j(S)("select_year"),size:"14"},null,8,["text"])),w(o,{name:"arrow-right",size:"13",color:"#c0c4cc",class:"ml-1"})])),_:1})])),_:1}),w(r),w(l,{class:"p-3 flex flex-col"},{default:k((()=>[w(l,{class:"flex justift-start items-center text-[14px]"},{default:k((()=>[w(o,{name:"/static/assets/flag.png",height:"13px",width:"8px",class:"mr-1 rounded"}),w(l,{class:"text-[var(--theme-color-main)]"},{default:k((()=>[w(s,{class:"font-bold"},{default:k((()=>[C(z(j(S)("form.product_info")),1)])),_:1})])),_:1})])),_:1}),w(l,{class:"text-[#909399] text-xs leading-6"},{default:k((()=>[C(z(j(S)("form.product_info.tips")),1)])),_:1}),w(l,{class:"my-2 flex flex-col !box-border"},{default:k((()=>[w(d,{placeholder:j(S)("form.product_info.placeholder"),count:"",height:"50px",maxlength:"250",modelValue:J.form.goods_name,"onUpdate:modelValue":t[4]||(t[4]=e=>J.form.goods_name=e)},null,8,["placeholder","modelValue"]),w(l,{class:"h-[25px] !mt-[-30px] z-10 mx-[10px] flex justify-end items-center pr-[40px]"},{default:k((()=>[w(l,{class:"text-[24rpx] mt-[5px] mr-[5px] text-red-500",onClick:t[5]||(t[5]=e=>J.form.goods_name="")},{default:k((()=>[C(z(j(S)("form.input_clear")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),w(l,{class:"custom-button m-2 bg-[#fff] box-border rounded"},{default:k((()=>[w(l,{class:"p-3 flex items-center justify-between text-[14px]"},{default:k((()=>[w(l,{class:"flex"},{default:k((()=>[C(z(j(S)("goods_category")),1)])),_:1}),w(l,{class:"flex items-center h-[14px]",onClick:t[6]||(t[6]=e=>I.value.open())},{default:k((()=>[J.form.category_id?(y(),V(l,{key:0,class:"text-[var(--theme-color-main)]"},{default:k((()=>[C(z(O.value),1)])),_:1})):(y(),V(l,{key:1,class:"text-[var(--theme-input-placeholder)]"},{default:k((()=>[C(z(j(S)("select_goods_category")),1)])),_:1})),w(o,{name:"arrow-right",size:"13",color:"#c0c4cc",class:"ml-1"})])),_:1})])),_:1}),w(r),w(l,{class:"p-3 flex items-center justify-between text-[14px]"},{default:k((()=>[w(l,{class:"flex"},{default:k((()=>[C(z(j(S)("brand")),1)])),_:1}),w(l,{class:"flex items-center h-[14px]",onClick:te},{default:k((()=>[J.form.brand_id?(y(),V(l,{key:0,class:"text-[var(--theme-color-main)]"},{default:k((()=>[C(z(J.form.brand_name),1)])),_:1})):(y(),V(l,{key:1,class:"text-[var(--theme-input-placeholder)]"},{default:k((()=>[C(z(j(S)("form.brand_select_placeholder")),1)])),_:1})),w(o,{name:"arrow-right",size:"13",color:"#c0c4cc",class:"ml-1"})])),_:1})])),_:1}),w(r),w(l,{class:"p-3 flex items-center justify-between text-[14px]"},{default:k((()=>[w(l,{class:"flex"},{default:k((()=>[C(z(j(S)("series")),1)])),_:1}),w(l,{class:"flex items-center h-[14px]",onClick:ae},{default:k((()=>[J.form.series_id?(y(),V(l,{key:0,class:"text-[var(--theme-color-main)]"},{default:k((()=>[C(z(J.form.series_name),1)])),_:1})):(y(),V(l,{key:1,class:"text-[var(--theme-input-placeholder)]"},{default:k((()=>[C(z(j(S)("form.series_select_placeholder")),1)])),_:1})),w(o,{name:"arrow-right",size:"13",color:"#c0c4cc",class:"ml-1"})])),_:1})])),_:1}),w(r),w(l,{class:"p-3 flex items-center justify-between text-[14px]"},{default:k((()=>[w(l,{class:"flex"},{default:k((()=>[C(z(j(S)("model")),1)])),_:1}),w(l,{class:"flex items-center h-[14px]",onClick:le},{default:k((()=>[J.form.model_id?(y(),V(l,{key:0,class:"text-[var(--theme-color-main)]"},{default:k((()=>[C(z(J.form.model_name),1)])),_:1})):(y(),V(l,{key:1,class:"text-[var(--theme-input-placeholder)]"},{default:k((()=>[C(z(j(S)("form.model_select_placeholder")),1)])),_:1})),w(o,{name:"arrow-right",size:"13",color:"#c0c4cc",class:"ml-1"})])),_:1})])),_:1})])),_:1}),w(l,{class:"custom-button m-2 bg-[#fff] box-border rounded"},{default:k((()=>[w(l,{class:"p-3 flex items-center justify-between text-[14px]"},{default:k((()=>[w(l,{class:"flex"},{default:k((()=>[C(z(j(S)("goods_code")),1)])),_:1}),w(l,{class:"flex items-center h-[14px]"},{default:k((()=>[w(L,{placeholder:j(S)("input.goods_code"),border:"none",inputAlign:"right",modelValue:J.form.goods_code,"onUpdate:modelValue":t[7]||(t[7]=e=>J.form.goods_code=e),fontSize:"14",clearable:"",placeholderStyle:"color: #c0c4cc;font-size:14px;text-align: end;"},null,8,["placeholder","modelValue"])])),_:1})])),_:1}),w(l,{class:"p-3 flex items-center justify-between text-[14px] hidden"},{default:k((()=>[w(l,{class:"flex"},{default:k((()=>[C(" 独立编码位置所在示例图 ")])),_:1}),w(l,{class:"flex items-center h-[14px]"},{default:k((()=>[w(o,{name:"arrow-down",size:"13",class:"ml-1",color:"var(--theme-color-primary)",label:"更多示例图",labelColor:"var(--theme-color-primary)",labelPos:"left"})])),_:1})])),_:1})])),_:1}),w(l,{class:"main-fix-footer bg-[#fff] z-100 h-[90px]",style:{"box-shadow":"var(--theme-box-shadow)"}},{default:k((()=>[w(l,{class:"flex items-center my-1"},{default:k((()=>[w(A,{customStyle:{margin:"0px"},usedAlone:"",checked:N.value,"onUpdate:checked":t[8]||(t[8]=e=>N.value=e),size:"14",shape:"circle"},null,8,["checked"]),w(l,{class:"text-xs"},{default:k((()=>[w(s,null,{default:k((()=>[C(z(j(S)("i_agree")),1)])),_:1}),w(s,{class:"text-[var(--theme-color-primary)]"},{default:k((()=>[C(z(j(S)("appraisal_notice")),1)])),_:1})])),_:1})])),_:1}),w(l,{class:"flex justify-bewteen items-center w-full"},{default:k((()=>[w(l,{class:"flex flex-1 items-baseline"},{default:k((()=>[w(s,{class:"text-xs"},{default:k((()=>[C(z(j(S)("appraisal_expense"))+"：",1)])),_:1}),w(l,{class:"flex flex-col"},{default:k((()=>[w(s,{class:"text-[var(--theme-text-red)]"},{default:k((()=>[w(s,{class:"text-xs"},{default:k((()=>[C("￥")])),_:1}),w(s,{class:"text-sm"},{default:k((()=>[C(z(J.form.cost||"0.00"),1)])),_:1})])),_:1}),w(s,{class:"line-through text-xs text-[var(--theme-color-tips)]"},{default:k((()=>[C(z(j(S)("form.original_cost")+"￥"+J.form.original_cost||"0.00"),1)])),_:1})])),_:1})])),_:1}),w(l,{class:"min-w-[100px]"},{default:k((()=>[w(G,{text:j(S)("immediate_payment"),onClick:t[9]||(t[9]=e=>(()=>{if(0==N.value)return void T({icon:"none",title:`${S("agreeTips")}${S("appraisal_notice")}`});if(oe.value)return;let e={...J.form};oe.value=!0,M(e).then((e=>{T({icon:"success",title:S("success")})})).finally((()=>{oe.value=!1}))})()),color:"var(--theme-color-primary)"},null,8,["text"])])),_:1})])),_:1})])),_:1})])),_:1},8,["style"]),w(Y,{show:P.value,columns:R,keyName:"label",onConfirm:se},null,8,["show","columns"]),w(D,{ref_key:"categoryRef",ref:I,list:K.categoryList,modelValue:J.form.category_id,"onUpdate:modelValue":t[10]||(t[10]=e=>J.form.category_id=e),isShowSubhead:!1,props:{label:"category_name",value:"category_id"},"label-title":j(S)("select_goods_category")},null,8,["list","modelValue","label-title"]),w(H,{loading:J.loading},null,8,["loading"])],64)}}}),[["__scopeId","data-v-5c6f20ee"]]);export{N as default};
