import{d as e,r as l,S as t,cw as a,Z as s,ax as o,F as n,b as r,l as m,c,x as i,cc as u,bG as f,cb as d,ce as p,m as x,$ as v,bY as _,aO as h,a_ as y,o as b,a0 as w,f as g,w as k,a2 as C,p as j,g as T,v as z,n as S,u as M,a1 as I,am as V,t as N,e as R,h as U,an as $,ao as A,i as P,al as D,a as F,aK as O,_ as W}from"./index-VHk1sExB.js";import{c as Y}from"./custom-popup.CdItBrdJ.js";import{u as q,M as B}from"./useMescroll.Bh35ex94.js";import{M as G}from"./mescroll-empty.uEQNJN_1.js";/* empty css                                                                     */import"./mescroll-i18n.DUzOixk-.js";const H=W(e({__name:"tallyLists",setup(e){const{mescrollInit:W,downCallback:H,getMescroll:J}=q(A,$),K=l(!0),L=t({employeeName:"全部员工",firstTime:(new Date).getTime(),lastTime:(new Date).getTime(),list:[{name:"名称1",sort:"分类1",type:"income",money:0,creator:"Mia",time:"2025-01-01"},{name:"名称2",sort:"分类2",type:"income",money:100,creator:"Mia",time:"2025-01-02"},{name:"名称3",sort:"分类3",type:"expenditure",money:2,creator:"Mia",time:"2025-01-03"}]}),X=l(!1),Z=l(!1),E=t([{name:"全部分类",checked:!1,value:0,selected:!1},{name:"其他",checked:!1,value:1,selected:!1},{name:"快递费",checked:!1,value:2,selected:!1},{name:"维修费",checked:!1,value:3,selected:!1},{name:"参展费",checked:!1,value:4,selected:!1}]),Q=l(""),ee=e=>{Array.isArray(e)&&e.length>0?Q.value=e[0].name:console.error("无效的索引格式:",e)},le=t([{name:"今日"},{name:"本月"},{name:"上月"},{name:"其他时间"}]),te=l(3),ae=e=>{te.value=e.index},se=l(!1),oe=t(["全部员工","Mia","员工101","员工102","员工103","员工104","员工105","员工106"]),ne=l(!1),re=l(!1),me=l(null),ce=l(null),ie=e=>{ne.value=!1,L.firstTime=e.value},ue=e=>{re.value=!1,L.lastTime=e.value};a((()=>{me.value.setFormatter(fe),ce.value.setFormatter(fe)}));const fe=(e,l)=>"year"===e?`${l}年`:"month"===e?`${l}月`:l;let de={top:0};const pe=()=>{O().select(".custom-box").boundingClientRect((e=>{de.top=e.top+15})).exec()};return s((()=>{o((()=>{pe()}))})),n((()=>{o((()=>{pe()}))})),(e,l)=>{const t=r(c("up-icon"),m),a=P,s=r(c("up-navbar"),i),o=r(c("up-tabs"),u),n=r(c("up-text"),f),$=D,A=r(c("up-overlay"),d),O=r(c("up-divider"),p),q=r(c("up-image"),x),H=r(c("up-button"),v),J=r(c("up-line"),_),Q=r(c("up-popup"),h),pe=r(c("up-datetime-picker"),y);return b(),w(I,null,[g(a,{style:S(e.themeColor())},{default:k((()=>[g(s,{title:"其他记账",autoBack:!0,safeAreaInsetTop:!0,placeholder:!0},{center:k((()=>[g(a,null,{default:k((()=>[g(t,{name:"question-circle",label:"其他记账",labelPos:"left",onClick:l[0]||(l[0]=e=>X.value=!0),labelSize:"16",size:"18",color:"var(--theme-color-tips)",labelColor:"var(--theme-color-main)"})])),_:1})])),right:k((()=>[g(a,{class:"u-nav-slot",onClick:l[1]||(l[1]=e=>Z.value=!0)},{default:k((()=>[g(t,{name:"arrow-down-fill",label:"全部分类",labelPos:"left",labelSize:"12",size:"12",color:"var(--theme-color-main)",labelColor:"var(--theme-color-main)"})])),_:1})])),_:1}),g(a,{class:"mt-1 p-3 bg-[#fff]"},{default:k((()=>[g(a,{class:"my-2"},{default:k((()=>[g(o,{list:le,activeStyle:"color:var(--theme-color-main)",lineWidth:3==te.value?65:35,current:te.value,lineHeight:"5",onChange:ae,lineColor:"var(--theme-color-primary)",scrollable:!1,inactiveStyle:"color:var(--theme-color-main)",itemStyle:"margin-bottom:-3px;z-index:2"},null,8,["list","lineWidth","current"])])),_:1}),g(a,{class:C(["mx-5 mt-3 flex justify-start items-center h-[28px] text-[var(--theme-color-main)]",3==te.value?"":"hidden"])},{default:k((()=>[g(a,{class:"bg-[var(--theme-upload-bg)] rounded flex justify-center items-center px-2",onClick:l[2]||(l[2]=e=>ne.value=!0)},{default:k((()=>[g(n,{mode:"date",text:L.firstTime},null,8,["text"])])),_:1}),g(a,{class:"mx-1"},{default:k((()=>[j("至")])),_:1}),g(a,{class:"bg-[var(--theme-upload-bg)] rounded flex justify-center items-center px-2",onClick:l[3]||(l[3]=e=>re.value=!0)},{default:k((()=>[g(n,{mode:"date",text:L.lastTime},null,8,["text"])])),_:1})])),_:1},8,["class"]),g(a,{class:"flex justify-between items-center px-7 py-2"},{default:k((()=>[g(a,{class:"flex flex-col text-[var(--theme-color-main)] w-1/2"},{default:k((()=>[g(a,{class:"text-sm my-1"},{default:k((()=>[j("支出")])),_:1}),g(a,{class:"flex items-baseline"},{default:k((()=>[g(a,null,{default:k((()=>[j("￥")])),_:1}),g(a,{class:"text-lg"},{default:k((()=>[j("1,000")])),_:1})])),_:1})])),_:1}),g(a,{class:"flex flex-col w-1/2"},{default:k((()=>[g(a,{class:"text-sm my-1 text-[var(--theme-color-main)]"},{default:k((()=>[j("收入")])),_:1}),g(a,{class:"flex items-baseline text-[var(--theme-text-red)]"},{default:k((()=>[g(a,null,{default:k((()=>[j("￥")])),_:1}),g(a,{class:"text-lg"},{default:k((()=>[j("0")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),g(A,{show:se.value,onClick:l[4]||(l[4]=e=>se.value=!1)},{default:k((()=>[T(g(a,{class:"custom-employee",style:S({top:M(de).top+"px"})},{default:k((()=>[g($,{"scroll-y":"true"},{default:k((()=>[g(a,{class:"h-[200px]"},{default:k((()=>[(b(!0),w(I,null,V(oe,((e,l)=>(b(),R(a,{class:"flex flex-col items-center"},{default:k((()=>[g(a,{class:C(["custom-employee-item",[l==oe.length-1?"!border-none":"",e==L.employeeName?"text-[var(--theme-color-primary)]":""]]),onClick:l=>(e=>{L.employeeName=e})(e)},{default:k((()=>[j(N(e),1)])),_:2},1032,["class","onClick"])])),_:2},1024)))),256))])),_:1})])),_:1})])),_:1},8,["style"]),[[z,se.value]])])),_:1},8,["show"]),g(a,{class:"px-3 my-2 flex justify-end custom-box"},{default:k((()=>[g(a,{onClick:l[5]||(l[5]=e=>se.value=!0),class:"bg-[#fff] rounded min-w-[80px] flex justify-between items-center px-1"},{default:k((()=>[g(a,{class:"px-1"},{default:k((()=>[j(N(L.employeeName),1)])),_:1}),g(t,{name:"arrow-down-fill",size:12,color:"var(--theme-color-primary)"})])),_:1})])),_:1}),g(B,{ref:"mescrollRef",onInit:M(W),onUp:l[7]||(l[7]=()=>{}),top:"0"},{default:k((()=>[L.list.length?(b(),R(a,{key:0,class:"bg-[#fff] text-[var(--theme-color-main)] text-sm"},{default:k((()=>[(b(!0),w(I,null,V(L.list,((e,l)=>(b(),R(a,null,{default:k((()=>[g(a,{onClick:l=>M(F)({url:`/addon/saler_tools/pages/finance/tallyDetail?list=${encodeURIComponent(JSON.stringify(e))}`})},{default:k((()=>[g(a,{class:"py-2 px-3"},{default:k((()=>[j(N(e.time),1)])),_:2},1024),g(O,{class:"!m-0"}),g(a,{class:"p-3 flex justify-between items-center"},{default:k((()=>[g(a,null,{default:k((()=>[g(q,{width:"80px",height:"80px","show-loading":!0,radius:"5px",src:"/static/assets/logo.png"})])),_:1}),g(a,{class:"flex justify-between flex-col ml-2 flex-1 min-h-[80px] text-sm"},{default:k((()=>[g(a,{class:"flex justify-between items-center text-[var([--theme-color-main])] text-sm"},{default:k((()=>[g(a,null,{default:k((()=>[j(N(e.name),1)])),_:2},1024),g(a,{class:"text-base font-bold"},{default:k((()=>[j(N("income"==e.type?"-":"+")+" "+N(e.money),1)])),_:2},1024)])),_:2},1024),g(a,{class:"text-[var(--theme-color-content)] text-xs"},{default:k((()=>[j(N(e.sort),1)])),_:2},1024),g(a,{class:"text-[var(--theme-color-tips)] text-xs"},{default:k((()=>[j(" 创建人："+N(e.creator),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),g(O,{class:"!m-0"})])),_:2},1032,["onClick"])])),_:2},1024)))),256))])),_:1})):U("",!0),g(a,{class:"fixed bottom-0 left-0 w-full box-border bg-[#fff] z-100 pb-[25px] h-[80px] p-3",style:{"box-shadow":"var(--theme-box-shadow)"}},{default:k((()=>[g(H,{text:"记一笔",class:"!text-[#fff] !bg-[var(--theme-color-primary)] !border-none",onClick:l[6]||(l[6]=e=>M(F)({url:`/addon/saler_tools/pages/finance/tallyAdd?type=add&currentTab=${te.value}`}))})])),_:1}),L.list.length||K.value?U("",!0):(b(),R(G,{key:1,option:{tip:"暂无数据"}}))])),_:1},8,["onInit"])])),_:1},8,["style"]),g(Q,{show:X.value,mode:"bottom",onClose:l[9]||(l[9]=e=>X.value=!1),onOpen:l[10]||(l[10]=e=>X.value=!0)},{default:k((()=>[g(a,{class:"p-4 flex justify-between items-center"},{default:k((()=>[g(a),g(a,{class:"flex !text-center font-bold text-[30rpx]"},{default:k((()=>[j("其他记账")])),_:1}),g(t,{name:"close",size:"15",onClick:l[8]||(l[8]=e=>X.value=!1)})])),_:1}),g(J),g(a,{class:"p-4 flex flex-col mb-5"},{default:k((()=>[j(" 记录非回收类业务的支出，方便查看当月或历史的额外支出和收入，例如：房租、水电、展会查出等。 ")])),_:1})])),_:1},8,["show"]),g(Y,{show:Z.value,title:"请选择订单类型",list:E,selectItemSize:"normal","onUpdate:show":l[11]||(l[11]=e=>Z.value=e),onSelect:ee},null,8,["show","list"]),g(pe,{ref_key:"firstTimePickerRef",ref:me,show:ne.value,modelValue:L.firstTime,"onUpdate:modelValue":l[12]||(l[12]=e=>L.firstTime=e),mode:"year-month",title:"选择时间",onCancel:l[13]||(l[13]=e=>ne.value=!1),formatter:fe,onConfirm:ie},null,8,["show","modelValue"]),g(pe,{ref_key:"lastTimePickerRef",ref:ce,show:re.value,modelValue:L.lastTime,"onUpdate:modelValue":l[14]||(l[14]=e=>L.lastTime=e),mode:"year-month",title:"选择时间",onCancel:l[15]||(l[15]=e=>re.value=!1),formatter:fe,onConfirm:ue},null,8,["show","modelValue"])],64)}}}),[["__scopeId","data-v-c0856518"]]);export{H as default};
