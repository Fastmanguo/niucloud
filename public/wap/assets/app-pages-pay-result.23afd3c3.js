import{_ as t}from"./top-tabbar.4cc47e41.js";import{d as a,r as e,q as s,o as l,c as r,w as o,b as u,u as n,S as c,z as p,A as i,f as m,n as f,a as d,bL as x,g as _,i as v,E as b,j as y,D as j,G as h,ag as g}from"./index-29ba8fd9.js";import{_ as T}from"./u-loading-icon.8c8b11d4.js";import{_ as w}from"./u-modal.b27ba97b.js";import{g as C}from"./pay.ddfcb3b0.js";import{t as S}from"./topTabbar.e79d7cbd.js";import"./manifest.fa825040.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.db209ac0.js";import"./u-popup.6009a61d.js";import"./u-transition.1dc24f47.js";import"./u-status-bar.c0d013e9.js";import"./u-icon.c465a7de.js";const k=a({__name:"result",setup(a){const k=e(null),L=e(!1);let P="",R=0,q=0;let z=S().setTopTabbarParam({title:"",isBack:!1});s((t=>{P=t.trade_type,R=t.trade_id,B()}));const B=()=>{C(P,R).then((t=>{if(!uni.$u.test.isEmpty(t.data)){if(1==t.data.status&&q<5)return L.value=!0,q++,void setTimeout((()=>{B()}),1e3);k.value=t.data,L.value=!1}}))},E=()=>{var t;const a=decodeURIComponent(uni.getStorageSync("payReturn"));d(a?{url:a,mode:"reLaunch"}:{url:x(),param:{code:null==(t=k.value)?void 0:t.out_trade_no},mode:"reLaunch"})};return(a,e)=>{const s=_(v("top-tabbar"),t),d=b,x=y,C=j,S=_(v("u-loading-icon"),T),P=_(v("u-modal"),w);return l(),r(x,{style:f(a.themeColor())},{default:o((()=>[k.value?(l(),r(x,{key:0,class:"w-screen h-screen flex flex-col items-center"},{default:o((()=>[u(s,{ref:"topTabbarRef",data:n(z)},null,8,["data"]),u(x,{class:"flex-1 flex flex-col items-center w-full pt-[180rpx]"},{default:o((()=>[u(x,{class:c(["flex items-baseline",{"text-[#06c05d]":2==k.value.status,"text-red":2!=k.value.status}])},{default:o((()=>[u(d,{class:c(["nc-iconfont -mb-[4rpx] !text-[32rpx]",{"nc-icon-duihaoV6mm":2==k.value.status,"nc-icon-tanhaoV6mm":2!=k.value.status}])},null,8,["class"]),u(d,{class:"text-[36rpx] ml-[16rpx] font-500"},{default:o((()=>[p(i(2==k.value.status?"支付成功":"支付失败"),1)])),_:1})])),_:1},8,["class"]),u(x,{class:"text-[56rpx] font-500 mt-[60rpx] price-font"},{default:o((()=>[u(d,{class:"text-[36rpx] mr-[6rpx]"},{default:o((()=>[p(i(n(h)("currency")),1)])),_:1}),u(d,null,{default:o((()=>[p(i(n(g)(k.value.money)),1)])),_:1})])),_:1})])),_:1}),u(x,{class:"pb-[260rpx]"},{default:o((()=>[u(C,{class:"w-[380rpx] !border-0 h-[80rpx] text-[28rpx] text-[#333] !bg-[#f2f2f2] flex-center font-500 rounded-[20rpx]",plain:!0,onClick:E},{default:o((()=>[p(i(2==k.value.status?n(h)("complete"):n(h)("close")),1)])),_:1})])),_:1})])),_:1})):m("v-if",!0),u(P,{show:L.value,showCancelButton:!0,confirmText:n(h)("pay.completePay"),cancelText:n(h)("pay.incompletePay"),onCancel:E,confirmColor:"var(--primary-color)"},{default:o((()=>[u(x,{class:"py-[20rpx]"},{default:o((()=>[u(S,{text:n(h)("pay.getting"),textSize:"16",mode:"circle",vertical:!0},null,8,["text"])])),_:1})])),_:1},8,["show","confirmText","cancelText"])])),_:1},8,["style"])}}});export{k as default};
