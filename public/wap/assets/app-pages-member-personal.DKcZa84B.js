import{d as e,j as a,y as l,r as t,B as n,S as o,b as s,k as r,c as u,aW as i,aX as d,aY as c,aO as p,aZ as m,a_ as v,o as f,e as x,w as h,f as y,u as b,p as k,t as _,I as w,n as g,h as C,E as S,s as z,a$ as V,b0 as D,i as I,M as $,ak as B,K as O,b1 as A,a as P,_ as j}from"./index-VHk1sExB.js";const E=j(e({__name:"personal",setup(e){const j=a(),E=l((()=>j.info));t(null),n((()=>{}));const M=o({modal:!1,value:E.nickname||""}),U=e=>{M.value=e.detail.value},K=()=>{uni.$u.test.isEmpty(M.value)?S({title:z("nicknamePlaceholder"),icon:"none"}):V({field:"nickname",value:M.value}).then((e=>{j.info.nickname=M.value,M.modal=!1}))},N=t(!1),R=l((()=>[{name:z("man"),value:1},{name:z("woman"),value:2}])),T=e=>{V({field:"sex",value:e.value}).then((a=>{j.info.sex_name=e.name}))},W=e=>{D({filePath:e.file.url,name:"file"}).then((e=>{V({field:"headimg",value:e.data.url}).then((()=>{j.info.headimg=e.data.url}))})).catch((()=>{}))},X=t(!1),Y=e=>{V({field:"birthday",value:uni.$u.date(e.value,"yyyy-mm-dd")}).then((()=>{j.info.birthday=uni.$u.date(e.value||e.value+1,"yyyy-mm-dd"),X.value=!1}))};return(e,a)=>{const l=s(u("u-avatar"),r),t=s(u("u-upload"),i),n=s(u("u-cell"),d),o=I,S=$,V=s(u("u-cell-group"),c),D=B,j=s(u("u-popup"),p),Z=s(u("u-action-sheet"),m),q=s(u("u-datetime-picker"),v);return E.value?(f(),x(o,{key:0,class:"w-full h-screen bg-page personal-wrap overflow-hidden",style:g(e.themeColor())},{default:h((()=>[y(o,{class:"my-[var(--top-m)] sidebar-margin overflow-hidden card-template py-[20rpx]"},{default:h((()=>[y(V,{border:!1,class:"cell-group"},{default:h((()=>{return[y(n,{title:b(z)("headimg"),titleStyle:{"font-size":"28rpx"},"is-link":!0},{value:h((()=>[y(t,{onAfterRead:W,maxCount:1},{default:h((()=>[y(l,{src:b(O)(E.value.headimg),"default-url":b(O)("static/resource/images/default_headimg.png"),size:"40",leftIcon:"none"},null,8,["src","default-url"])])),_:1})])),_:1},8,["title"]),y(n,{title:b(z)("nickname"),titleStyle:{"font-size":"28rpx"},"is-link":!0,value:E.value.nickname,onClick:a[0]||(a[0]=e=>M.modal=!0)},null,8,["title","value"]),y(n,{title:b(z)("sex"),titleStyle:{"font-size":"28rpx"},"is-link":!0,value:E.value.sex_name||b(z)("unknown"),onClick:a[1]||(a[1]=e=>N.value=!0)},null,8,["title","value"]),y(n,{title:b(z)("mobile"),titleStyle:{"font-size":"28rpx"}},{value:h((()=>[E.value.mobile?(f(),x(o,{key:0,class:"mr-[10rpx]"},{default:h((()=>[k(_(b(A)(E.value.mobile)),1)])),_:1})):(f(),x(o,{key:1},{default:h((()=>[y(S,{onClick:a[2]||(a[2]=e=>b(P)({url:"/app/pages/auth/bind"})),class:"bg-transparent w-[170rpx] p-[0] rounded-[100rpx] text-[var(--primary-color)] !border-[2rpx] !border-solid border-[var(--primary-color)] text-[24rpx] h-[54rpx] flex-center"},{default:h((()=>[k(_(b(z)("bindMobile")),1)])),_:1})])),_:1}))])),_:1},8,["title"]),y(n,{title:b(z)("birthday"),titleStyle:{"font-size":"28rpx"},"is-link":!0,value:(e=E.value.birthday,(e?uni.$u.date(new Date(e),"yyyy-mm-dd"):"")||b(z)("unknown")),onClick:a[3]||(a[3]=e=>X.value=!0)},null,8,["title","value"])];var e})),_:1})])),_:1}),y(j,{class:"popup-type",safeAreaInsetBottom:!1,round:"var(--rounded-big)",show:M.modal,mode:"center",onClose:a[6]||(a[6]=e=>M.modal=!1)},{default:h((()=>[y(o,{class:"w-[620rpx] popup-common pb-[40rpx]",onTouchmove:a[5]||(a[5]=w((()=>{}),["prevent","stop"]))},{default:h((()=>[y(o,{class:"title !pt-[50rpx] !pb-[60rpx]"},{default:h((()=>[k(_(b(z)("updateNickname")),1)])),_:1}),y(o,{class:"mx-[50rpx] border-0 border-b border-[#eee] border-solid"},{default:h((()=>[y(D,{type:"nickname",class:"h-[88rpx] text-[26rpx]",modelValue:M.value,"onUpdate:modelValue":a[4]||(a[4]=e=>M.value=e),placeholder:b(z)("nicknamePlaceholder"),placeholderClass:"text-[26rpx] h-[88rpx] flex items-center",onBlur:U},null,8,["modelValue","placeholder"])])),_:1}),y(o,{class:"px-[60rpx] pt-[70rpx]"},{default:h((()=>[y(S,{"hover-class":"none",class:"primary-btn-bg text-[#fff] h-[80rpx] font-500 leading-[80rpx] rounded-[100rpx] text-[26rpx]",onClick:K},{default:h((()=>[k(_(b(z)("confirm")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["show"]),y(Z,{class:"",actions:R.value,show:N.value,closeOnClickOverlay:!0,safeAreaInsetBottom:!0,onClose:a[7]||(a[7]=e=>N.value=!1),onSelect:T},null,8,["actions","show"]),y(q,{modelValue:E.value.birthday,"onUpdate:modelValue":a[8]||(a[8]=e=>E.value.birthday=e),show:X.value,mode:"date","confirm-text":b(z)("confirm"),maxDate:(new Date).valueOf(),minDate:0,"cancel-text":b(z)("cancel"),onCancel:a[9]||(a[9]=e=>X.value=!1),onConfirm:Y},null,8,["modelValue","show","confirm-text","maxDate","cancel-text"])])),_:1},8,["style"])):C("",!0)}}}),[["__scopeId","data-v-4855aa6b"]]);export{E as default};
