import{d as e,r as t,S as a,b as r,aO as l,c as n,o,e as s,w as d,f as p,p as u,a0 as x,am as c,a1 as i,a2 as b,t as m,E as f,i as v,bM as g,bN as y,M as h,_ as w}from"./index-VHk1sExB.js";const D=w(e({__name:"select-date",emits:["confirm"],setup(e,{expose:w,emit:D}){const _=D,$=t(!1),Y=t([]),k=()=>{const e=new Date,t=[],a=[],r=[],l=e.getFullYear(),n=e.getMonth(),o=e.getDate();for(let v=1990;v<=e.getFullYear()+2;v++)t.push(v);for(let v=1;v<=12;v++)a.push(v);let s=M(l,n+1);for(let v=1;v<=s;v++)r.push(v);let d=[t.indexOf(l),n,o-1],p=`${l}-${n+1<10?"0"+(n+1):n+1}-${o<10?"0"+o:o}`,u=`${l}-${n+1<10?"0"+(n+1):n+1}-${o<10?"0"+o:o} 00:00:00`,x=`${l}-${n+1<10?"0"+(n+1):n+1}-${o<10?"0"+o:o} 23:59:59`,c=new Date(e.getFullYear(),n-1,e.getDate()),i=new Date(e.getFullYear(),n-3,e.getDate()),b=new Date(e.getFullYear(),n-6,e.getDate()),m=new Date(e.getFullYear()-1,n,e.getDate());const f=e=>{const t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate();return`${t}-${a<10?"0"+a:a}-${r<10?"0"+r:r} 00:00:00`};return{years:t,months:a,days:r,curIndex:d,nowDate:p,nowDateStart:u,nowDateEnd:x,lastMonth:f(c),lastThreeMonth:f(i),halfYear:f(b),lastYear:f(m)}},M=(e,t)=>new Date(e,t,0).getDate(),C=a({years:k().years,months:k().months,days:k().days,curIndex:k().curIndex,nowDate:[k().nowDateStart,k().nowDateEnd]}),E=e=>{const t=e.detail.value;let a=C.years[t[0]],r=C.months[t[1]],l=C.days[t[2]];C.days=((e,t)=>{let a=M(e,t),r=[];for(let l=1;l<=a;l++)r.push(l);return r})(a,r),"first"==F.value.type?C.nowDate[0]=`${a}-${r<10?"0"+r:r}-${l<10?"0"+l:l} 00:00:00`:"second"==F.value.type&&(C.nowDate[1]=`${a}-${r<10?"0"+r:r}-${l<10?"0"+l:l} 23:59:59`)},I=a([{time:[k().lastMonth,k().nowDateEnd],type:"lastMonth",name:"近1个月"},{time:[k().lastThreeMonth,k().nowDateEnd],type:"lastThreeMonth",name:"近3个月"},{time:[k().halfYear,k().nowDateEnd],type:"halfYear",name:"近半年"},{time:[k().lastYear,k().nowDateEnd],type:"lastYear",name:"近一年"}]),F=t({type:"first",time:[]}),j=()=>{if("first"==F.value.type||"second"==F.value.type){if(Y.value=C.nowDate,new Date(Y.value[0]).getTime()>new Date(Y.value[1]).getTime())return void f({title:"开始时间不能大于结束时间",icon:"none"})}else Y.value=F.value.time;_("confirm",Y.value),$.value=!1},T=()=>{F.value.type="first",C.curIndex=k().curIndex,C.nowDate=[k().nowDateStart,k().nowDateEnd]};return w({show:$}),(e,t)=>{const a=v,f=g,w=y,D=h,_=r(n("u-popup"),l);return o(),s(_,{show:$.value,onClose:t[2]||(t[2]=e=>$.value=!1),mode:"bottom",round:10,zIndex:"10090"},{default:d((()=>[p(a,{class:"popup-common"},{default:d((()=>[p(a,{class:"title"},{default:d((()=>[u("选择时间")])),_:1}),p(a,{class:"px-[var(--popup-sidebar-m)] mb-[20rpx] mt-[10rpx]"},{default:d((()=>[p(a,{class:"flex items-center justify-between mb-[30rpx]"},{default:d((()=>[(o(!0),x(i,null,c(I,((e,t)=>(o(),s(a,{class:b(["w-[160rpx] h-[66rpx] box-border flex-center rounded-[33rpx] bg-[var(--temp-bg)] text-center text-[26rpx] text-[var(--text-color-light6)] border-[2rpx] border-solid border-[var(--temp-bg)]",{"text-primary !border-[var(--primary-color)] !bg-[rgba(239,0,12,0.04)]":F.value.type==e.type}]),key:"a"+t,onClick:t=>{return a=e,F.value.type=a.type,F.value.time=a.time,C.nowDate[0]=F.value.time[0],void(C.nowDate[1]=F.value.time[1]);var a}},{default:d((()=>[u(m(e.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),p(a,{class:"flex items-center justify-between"},{default:d((()=>[p(a,{class:b(["w-[316rpx] h-[66rpx] box-border leading-[62rpx] rounded-[33rpx] bg-[var(--temp-bg)] text-center text-[26rpx] text-[var(--text-color-light6)] border-[2rpx] border-solid border-[var(--temp-bg)]",{"text-primary !border-[var(--primary-color)] !bg-[var(--primary-color-light)]":"first"==F.value.type}]),onClick:t[0]||(t[0]=e=>F.value.type="first")},{default:d((()=>[u(m(C.nowDate[0].substr(0,10)),1)])),_:1},8,["class"]),p(a,{class:"nc-iconfont nc-icon-jianV6xx"}),p(a,{class:b(["w-[316rpx] h-[66rpx] box-border leading-[62rpx] rounded-[33rpx] bg-[var(--temp-bg)] text-center text-[26rpx] text-[var(--text-color-light6)] border-[2rpx] border-solid border-[var(--temp-bg)]",{"text-primary !border-[var(--primary-color)] !bg-[var(--primary-color-light)]":"second"==F.value.type}]),onClick:t[1]||(t[1]=e=>F.value.type="second")},{default:d((()=>[u(m(C.nowDate[1].substr(0,10)),1)])),_:1},8,["class"])])),_:1})])),_:1}),p(a,{class:"gradation-picker"},{default:d((()=>[p(w,{"indicator-class":"!h-[80rpx] !bg-[var(--temp-bg)]",value:C.curIndex,onChange:E,class:"w-[750rpx] px-[60rpx] h-[396rpx] box-border"},{default:d((()=>[p(f,null,{default:d((()=>[(o(!0),x(i,null,c(C.years,((e,t)=>(o(),s(a,{class:"text-center leading-[80rpx] text-[28rpx]",key:t},{default:d((()=>[u(m(e)+"年",1)])),_:2},1024)))),128))])),_:1}),p(f,null,{default:d((()=>[(o(!0),x(i,null,c(C.months,((e,t)=>(o(),s(a,{class:"text-center leading-[80rpx] text-[28rpx]",key:t},{default:d((()=>[u(m(e)+"月",1)])),_:2},1024)))),128))])),_:1}),p(f,null,{default:d((()=>[(o(!0),x(i,null,c(C.days,((e,t)=>(o(),s(a,{class:"text-center leading-[80rpx] text-[28rpx]",key:t},{default:d((()=>[u(m(e)+"日",1)])),_:2},1024)))),128))])),_:1})])),_:1},8,["value"])])),_:1}),p(a,{class:"btn-wrap flex justify-between items-center !pt-[30rpx]"},{default:d((()=>[p(D,{class:"btn flex-1 !leading-[76rpx] mr-[20rpx] !text-[var(--primary-color)] border-[2rpx] border-solid border-[var(--primary-color)] rounded-[100rpx] bg-transparent box-border","hover-class":"none",onClick:T},{default:d((()=>[u("重置")])),_:1}),p(D,{class:"btn flex-1 border-[0] rounded-[100rpx] primary-btn-bg",shape:"circle","hover-class":"none",onClick:j},{default:d((()=>[u("确定")])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}}),[["__scopeId","data-v-8944ebe7"]]);export{D as s};
