import{d as e,r as t,S as l,cw as a,Z as s,ax as o,F as r,b as i,l as n,c as u,x as c,cc as m,ce as f,cb as d,k as p,b_ as x,b6 as h,cE as _,cF as y,cG as b,bY as v,aO as w,a_ as C,o as k,a0 as g,f as j,w as I,u as z,p as R,a2 as M,t as U,g as $,v as L,n as S,a1 as E,am as W,e as F,h as O,cH as P,an as V,ao as H,i as Y,al as q,a as A,aK as B,_ as D}from"./index-VHk1sExB.js";import{u as G,M as K}from"./useMescroll.Bh35ex94.js";import{M as N}from"./mescroll-empty.uEQNJN_1.js";import"./mescroll-i18n.DUzOixk-.js";const T=D(e({__name:"salaryLists",setup(e){const D=t(!1),T=t(2),X=l([{name:"上月"},{name:"本月"},{name:"其他时间"}]),Z=e=>{T.value=e.index,ne.list[T.value]?ne.list[T.value].forEach((e=>{e.show=!1})):console.warn("无效索引")},J=t(!1),Q=t(null),ee=t(Date.now()),te=e=>{J.value=!1,e.value=P(e.value/1e3);let t=e.value.split("-")[0],l=e.value.split("-")[1];ne.time=t+"年"+l+"月"};a((()=>{Q.value.setFormatter(ae)}));const le=e=>{de.value="待发放"!=e.status,A({url:`/addon/saler_tools/pages/finance/salaryEdit?employeeId=${e.employeeId}&employeeName=${e.name}&info=${e}&isCreateWages=${de.value}`})},ae=(e,t)=>"year"===e?`${t}年`:"month"===e?`${t}月`:t,{mescrollInit:se,downCallback:oe,getMescroll:re}=G(H,V),ie=t(!0),ne=l({time:"2025年01月",list:{0:[{employeeId:10001,name:"Mia",title:"店长",salary:"0",status:"已发放",show:!1},{employeeId:10002,name:"员工1",title:"店长",salary:"0",status:"待发放",show:!1},{employeeId:10003,name:"员工2",title:"店长",salary:"0",status:"待发放",show:!1}],1:[{employeeId:10002,name:"员工2",title:"店长",salary:"0",status:"待发放",show:!1},{employeeId:10003,name:"员工3",title:"店长",salary:"0",status:"待发放",show:!1}],2:[{employeeId:10001,name:"Mia",title:"店长",salary:"0",show:!1,status:"待发放",monthList:[{month:6,time:"2024年6月",salary:0,status:"待发放",show:!1},{month:7,time:"2024年7月",salary:0,status:"待发放",show:!1},{month:8,time:"2024年8月",salary:0,status:"待发放",show:!1}]},{employeeId:10004,name:"员工4",title:"店长",salary:"0",show:!1,status:"待发放",monthList:[{month:10,time:"2024年10月",salary:0,status:"待发放",show:!1},{month:11,time:"2024年11月",salary:0,status:"待发放",show:!1},{month:12,time:"2024年12月",salary:0,status:"待发放",show:!1}]},{employeeId:10005,name:"员工5",title:"店长",salary:"0",show:!1,status:"待发放",monthList:[{month:6,time:"2024年6月",salary:0,status:"待发放",show:!1},{month:7,time:"2024年7月",salary:0,status:"待发放",show:!1},{month:8,time:"2024年8月",salary:0,status:"待发放",show:!1}]}]},collapseRef:null}),ue=t("全体员工"),ce=t(!1),me=l(["全部员工","Mia","员工101","员工102","员工103","员工104","员工105","员工106"]),fe=l([{text:"删除"}]),de=t(!1);let pe={top:0,left:0};const xe=()=>{B().select(".custom-box").boundingClientRect((e=>{pe.top=e.top+10,pe.left=e.left-6})).exec()};return s((()=>{o((()=>{xe()}))})),r((()=>{o((()=>{xe()}))})),(e,t)=>{const l=i(u("up-icon"),n),a=Y,s=i(u("up-navbar"),c),r=i(u("up-tabs"),m),P=i(u("up-divider"),f),V=q,H=i(u("up-overlay"),d),B=i(u("up-avatar"),p),G=i(u("up-tag"),x),oe=i(u("up-swipe-action-item"),h),re=i(u("up-swipe-action"),_),xe=i(u("up-collapse-item"),y),he=i(u("up-collapse"),b),_e=i(u("up-line"),v),ye=i(u("up-popup"),w),be=i(u("up-datetime-picker"),C);return k(),g(E,null,[j(a,{style:S(e.themeColor())},{default:I((()=>[j(s,{title:"薪资管理",autoBack:!0,safeAreaInsetTop:!0,placeholder:!0},{center:I((()=>[j(a,{class:""},{default:I((()=>[j(l,{name:"question-circle",label:"薪资管理",labelPos:"left",onClick:t[0]||(t[0]=e=>D.value=!0),labelSize:"16",size:"18",color:"var(--theme-color-tips)",labelColor:"var(--theme-color-main)"})])),_:1})])),right:I((()=>[j(a,{class:"u-nav-slot",onClick:t[1]||(t[1]=e=>z(A)({url:`/addon/saler_tools/pages/finance/salaryEdit?isCreateWages=${de.value}`}))},{default:I((()=>[j(a,{class:"text-xs text-[var(--theme-color-main)]"},{default:I((()=>[R(" 创建薪资 ")])),_:1})])),_:1})])),_:1}),j(a,{class:"flex flex-col justify-between bg-[#fff] box-border m-2 rounded h-[220px]"},{default:I((()=>[j(a,{class:"mt-3"},{default:I((()=>[j(r,{list:X,activeStyle:"color:var(--theme-color-main)",lineWidth:2==T.value?65:30,current:T.value,lineHeight:"4",onClick:Z,lineColor:"var(--theme-color-primary)",scrollable:!1,inactiveStyle:"color:var(--theme-color-main)",itemStyle:"margin-bottom:8px;z-index:2"},null,8,["list","lineWidth","current"]),j(P,{class:"!my-0 custom-divider",color:"var(--theme-border)"})])),_:1}),j(a,{class:"flex justify-end pr-3"},{default:I((()=>[j(a,{class:M([2==T.value?"":"hidden","bg-[#fff] rounded flex justify-center items-center border-solid border-1px border-[var(--theme-color-tips)] min-w-[125px]"]),onClick:t[2]||(t[2]=e=>J.value=!0)},{default:I((()=>[j(a,{class:"px-1"},{default:I((()=>[R(U(ne.time),1)])),_:1}),j(l,{name:"arrow-down-fill",size:12,color:"var(--theme-color-primary)"})])),_:1},8,["class"])])),_:1}),j(a,{class:"mb-10 flex flex-col items-center"},{default:I((()=>[j(a,{class:"text-[var(--theme-color-tips)]"},{default:I((()=>[R("2024年11月薪资")])),_:1}),j(a,{class:"text-xl font-bold mt-2 !text-nowrap"},{default:I((()=>[R("728,000")])),_:1})])),_:1})])),_:1}),j(a,{class:"flex justify-between items-center"},{default:I((()=>[j(a,{class:"mx-2 p-2 bg-[#fff] rounded min-w-[80px] flex justify-center items-center"},{default:I((()=>[j(l,{name:"arrow-down-fill",label:ue.value?ue.value:"全体员工",labelPos:"left",class:"custom-box",onClick:t[3]||(t[3]=e=>ce.value=!0),labelSize:"14",size:"12",color:"var(--theme-color-primary)",labelColor:"var(--theme-color-main)"},null,8,["label"])])),_:1}),j(a,{class:"mx-2 text-[var(--theme-color-tips)] text-xs"},{default:I((()=>[R(" 左滑可删除 ")])),_:1})])),_:1}),j(H,{show:ce.value,onClick:t[4]||(t[4]=e=>ce.value=!1)},{default:I((()=>[$(j(a,{class:"custom-employee",style:S({top:z(pe).top+"px",left:z(pe).left+"px"})},{default:I((()=>[j(V,{"scroll-y":"true"},{default:I((()=>[j(a,{class:"h-[200px]"},{default:I((()=>[(k(!0),g(E,null,W(me,((e,t)=>(k(),F(a,{class:"flex flex-col items-center"},{default:I((()=>[j(a,{class:M(["custom-employee-item",[t==me.length-1?"!border-none":"",e==ue.value?"text-[var(--theme-color-primary)]":""]]),onClick:t=>(e=>{ue.value=e})(e)},{default:I((()=>[R(U(e),1)])),_:2},1032,["class","onClick"])])),_:2},1024)))),256))])),_:1})])),_:1})])),_:1},8,["style"]),[[L,ce.value]])])),_:1},8,["show"]),0==T.value||1==T.value?(k(),F(a,{key:0,class:"m-2"},{default:I((()=>[j(a,{class:"u-collapse-content"},{default:I((()=>[j(K,{ref:"mescrollRef",onInit:z(se),onUp:t[5]||(t[5]=()=>{}),top:"0"},{default:I((()=>[j(re,{autoClose:!0},{default:I((()=>[(k(!0),g(E,null,W(ne.list[T.value],((e,t)=>(k(),F(oe,{show:e.show,"onUpdate:show":t=>e.show=t,index:t,closeOnClick:!0,autoClose:!0,onClick:e=>((e,t,l)=>{ne.list[l].splice(t,1)})(0,t,T.value),options:fe},{default:I((()=>[j(a,{class:"swipe-action up-border-top up-border-bottom mb-[8px]",onClick:t=>le(e)},{default:I((()=>[j(a,{class:"swipe-action__content"},{default:I((()=>[j(a,{class:"flex justify-between items-center pl-3 pr-2"},{default:I((()=>[j(a,{class:"flex justift-satrt items-center"},{default:I((()=>[j(B,{class:"border border-width-[1px] border-[#ffffff] border-solid",src:"/static/assets/logo.png",size:"55"}),j(a,{class:"ml-2 h-[50px] flex flex-col justify-between text-sm"},{default:I((()=>[j(a,{class:"text-[var(--theme-color-main)]"},{default:I((()=>[R(U(e.name),1)])),_:2},1024),j(a,{class:"flex justify-start items-center"},{default:I((()=>[j(a,{class:"text-[var(--theme-color-tips)] mr-2"},{default:I((()=>[R(U(e.title),1)])),_:2},1024),e.status?(k(),F(a,{key:0},{default:I((()=>[j(G,{text:e.status,bgColor:"#64748b",borderColor:"#64748b",color:"#fff",size:"mini"},null,8,["text"])])),_:2},1024)):O("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),j(a,{class:"flex h-[50px] justify-end"},{default:I((()=>[j(a,{class:"flex flex-col justify-between items-end mr-2"},{default:I((()=>[j(a,{class:"text-xs text-[var(--theme-color-main)]"},{default:I((()=>[R(" 薪资总额 ")])),_:1}),j(a,{class:"text-[var(--theme-text-red)]"},{default:I((()=>[R("￥"+U(e.salary),1)])),_:2},1024)])),_:2},1024),j(l,{name:"arrow-right",size:"18",color:"var(--theme-color-tips)"})])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1032,["show","onUpdate:show","index","onClick","options"])))),256))])),_:1}),ne.list.length||ie.value?O("",!0):(k(),F(N,{key:0,option:{tip:"暂无数据"}}))])),_:1},8,["onInit"])])),_:1})])),_:1})):O("",!0),2==T.value?(k(),F(a,{key:1,class:"mx-2 custom-collaps"},{default:I((()=>[j(K,{ref:"mescrollRef",onInit:z(se),onUp:t[6]||(t[6]=()=>{}),top:"0"},{default:I((()=>[j(a,{class:"custom-page__item"},{default:I((()=>[j(he,{border:!1,class:"",ref:e=>ne.collapseRef=e},{default:I((()=>[(k(!0),g(E,null,W(ne.list[2],((e,t)=>(k(),F(xe,{border:!1,class:"rounded my-2 bg-[#fff]"},{title:I((()=>[j(a,{class:"swipe-action up-border-top up-border-bottom"},{default:I((()=>[j(a,{class:"flex justify-between items-center box-border"},{default:I((()=>[j(a,{class:"flex justift-satrt items-center"},{default:I((()=>[j(B,{class:"border border-width-[1px] border-[#ffffff] border-solid",src:"/static/assets/logo.png",size:"55"}),j(a,{class:"ml-2 h-[50px] flex flex-col justify-between text-sm"},{default:I((()=>[j(a,{class:"text-[var(--theme-color-main)]"},{default:I((()=>[R(U(e.name),1)])),_:2},1024),j(a,{class:"flex justify-start items-center"},{default:I((()=>[j(a,{class:"text-[var(--theme-color-tips)] mr-2"},{default:I((()=>[R(U(e.title),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),j(a,{class:"flex h-[50px] justify-end"},{default:I((()=>[j(a,{class:"flex flex-col justify-between items-end mr-2"},{default:I((()=>[j(a,{class:"text-xs text-[var(--theme-color-main)]"},{default:I((()=>[R(" 薪资总额 ")])),_:1}),j(a,{class:"text-[var(--theme-text-red)]"},{default:I((()=>[R("￥"+U(e.salary),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),default:I((()=>[j(re,{autoClose:!0},{default:I((()=>[(k(!0),g(E,null,W(e.monthList,((s,r)=>(k(),F(oe,{show:s.show,"onUpdate:show":e=>s.show=e,autoClose:!0,onClick:e=>((e,t,l)=>{ne.list[2][t].monthList.splice(l,1),console.log(ne.collapseRef),o((()=>{ne.collapseRef.children[t].init(),ne.collapseRef.children[t].expanded=!0}))})(0,t,r,T.value),options:fe},{default:I((()=>[j(a,{class:"flex justify-between items-center py-3 pl-5 pr-3",onClick:t=>le(e)},{default:I((()=>[j(a,{class:"flex justify-between items-center"},{default:I((()=>[j(a,{class:"mr-2 text-[var(--theme-color-main)]"},{default:I((()=>[R(U(s.time),1)])),_:2},1024),s.status?(k(),F(a,{key:0},{default:I((()=>[j(G,{text:s.status,bgColor:"#64748b",borderColor:"#64748b",color:"#fff",size:"mini"},null,8,["text"])])),_:2},1024)):O("",!0)])),_:2},1024),j(a,{class:"flex justify-between items-center"},{default:I((()=>[j(a,{class:"text-[var(--theme-text-red)] mr-1"},{default:I((()=>[R(" ￥"+U(s.salary),1)])),_:2},1024),j(l,{name:"arrow-right",size:"14",color:"var(--theme-color-tips)"})])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1032,["show","onUpdate:show","onClick","options"])))),256))])),_:2},1024)])),_:2},1024)))),256))])),_:1},512)])),_:1}),ne.list.length||ie.value?O("",!0):(k(),F(N,{key:0,option:{tip:"暂无数据"}}))])),_:1},8,["onInit"])])),_:1})):O("",!0)])),_:1},8,["style"]),j(ye,{show:D.value,mode:"bottom",onClose:t[8]||(t[8]=e=>D.value=!1),onOpen:t[9]||(t[9]=e=>D.value=!0)},{default:I((()=>[j(a,{class:"p-4 flex justify-between items-center"},{default:I((()=>[j(a),j(a,{class:"flex !text-center font-bold text-[30rpx]"},{default:I((()=>[R("薪资管理")])),_:1}),j(l,{name:"close",size:"15",onClick:t[7]||(t[7]=e=>D.value=!1)})])),_:1}),j(_e),j(a,{class:"p-4 flex flex-col mb-5"},{default:I((()=>[j(a,{style:{"text-indent":"1em"}},{default:I((()=>[R(" 创建员工薪资方案，根据实际业务统计销售人员的销售提成、回收提成，以及维修保养成本，发放薪资可锁定薪资明细。 ")])),_:1})])),_:1})])),_:1},8,["show"]),j(be,{ref_key:"datetimePickerRef",ref:Q,show:J.value,modelValue:ee.value,"onUpdate:modelValue":t[10]||(t[10]=e=>ee.value=e),mode:"year-month",title:"选择时间",onCancel:t[11]||(t[11]=e=>J.value=!1),formatter:ae,onConfirm:te},null,8,["show","modelValue"])],64)}}}),[["__scopeId","data-v-11558a23"]]);export{T as default};
