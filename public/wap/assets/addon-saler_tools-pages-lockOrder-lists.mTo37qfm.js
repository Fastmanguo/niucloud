import{d as e,r as l,S as a,ca as t,y as s,B as o,b as r,l as c,c as n,x as i,c8 as u,ce as m,cc as d,b$ as f,c0 as p,cb as x,m as _,bG as b,aO as h,bY as v,$ as y,ac as g,o as k,a0 as w,f as C,w as j,u as S,p as z,t as P,g as U,v as V,I as O,a1 as I,am as R,e as A,h as B,n as M,an as q,ao as L,i as D,s as E,K,a as T,_ as Y}from"./index-VHk1sExB.js";import{u as $,M as F}from"./useMescroll.Bh35ex94.js";import{M as G}from"./mescroll-empty.uEQNJN_1.js";import{f as N,e as W}from"./order.Bb9wm7Q6.js";import{s as X}from"./index.Cs12rJwX.js";import"./mescroll-i18n.DUzOixk-.js";import"./index.CNqs6UPm.js";import"./index.D0Ed4zTg.js";import"./auth.CqjcWN4L.js";/* empty css                                                                     */const H=Y(e({__name:"lists",setup(e){const Y=l(),H=l(!1),J=a({lockStat:[],list:[],searchParams:{search:"",__order__:"",category_id:null,order_status:"LOCK_ORDER"},mescrollUp:{page:{size:10}},mescrollRef:null}),Q=e=>{let l={page:e.num,limit:e.size,...J.searchParams};ue.value=!0,N().then((e=>{J.lockStat=e.data})),W(l).then((l=>{let a=l.data.data;e.endSuccess(a.length),1==e.num&&(J.list=[]),J.list=J.list.concat(a),e.endSuccess(l.data.data.length),ue.value=!1})).catch((()=>{ue.value=!1,e.endErr()}))},Z=e=>{J.searchParams.category_id=e.category_id,ie().resetUpScroll()},ee=l(!1),le=t(),ae=s({get:()=>[{category_key:"ALL",category_id:null},...le.value],set(e){}}),te=l(!1),se=l("按最近锁单"),oe=a([{label:"按最近锁单",value:""},{label:"按最久锁单",value:"lock_time,asc"},{label:"按定金最高",value:"deposit,desc"},{label:"按定金最低",value:"deposit,asc"}]),re=l(!1),{mescrollInit:ce,downCallback:ne,getMescroll:ie}=$(L,q),ue=l(!0);return o((()=>{J.searchParams&&(J.searchParams={...J.searchParams})})),(e,l)=>{const a=r(n("up-icon"),c),t=D,s=r(n("up-navbar"),i),o=r(n("up-search"),u),q=r(n("up-divider"),m),L=r(n("up-tabs"),d),$=r(n("up-radio"),f),N=r(n("up-radio-group"),p),W=r(n("up-overlay"),x),le=r(n("up-image"),_),ne=r(n("up-text"),b),me=r(n("up-popup"),h),de=r(n("up-line"),v),fe=r(n("up-button"),y),pe=r(n("up-modal"),g);return k(),w(I,null,[C(t,{style:M(e.themeColor()),class:"page-container"},{default:j((()=>[C(s,{title:S(E)("explain.lock"),autoBack:!0,safeAreaInsetTop:!0,placeholder:!0},{center:j((()=>[C(t,null,{default:j((()=>[C(a,{name:"question-circle",label:S(E)("explain.lock"),labelPos:"left",onClick:l[0]||(l[0]=e=>H.value=!0),labelSize:"16",size:"18",color:"var(--theme-color-tips)",labelColor:"var(--theme-color-main)"},null,8,["label"])])),_:1})])),_:1},8,["title"]),C(t,{class:"!bg-[#f4f4f4]"},{default:j((()=>[C(t,{class:"bg-[#fff] p-2"},{default:j((()=>[C(o,{placeholder:"搜索商品名称/独立编码",shape:"square",modelValue:J.searchParams.search,"onUpdate:modelValue":l[1]||(l[1]=e=>J.searchParams.search=e),onChange:l[2]||(l[2]=e=>(J.list=[],void ie().resetUpScroll())),showAction:!1},null,8,["modelValue"])])),_:1}),C(q,{class:"!m-0 !p-0"}),C(t,{class:"bg-[#fff] py-2"},{default:j((()=>[C(L,{list:ae.value,keyName:"category_name",activeStyle:"color:var(--theme-color-primary);font-size:16px",lineWidth:"30",onChange:Z,lineColor:"var(--theme-color-primary)",scrollable:!1,inactiveStyle:"color:var(--theme-color-main);font-size:13px",itemStyle:"padding:0px 5px 3px;z-index:2"},{content:j((e=>[z(P(S(E)(e.item.category_key)),1)])),_:1},8,["list"])])),_:1}),C(q,{class:"!m-0 !p-0"}),C(t,{class:"px-3 py-2 flex justify-between items-center w-full box-border text-[13px] bg-[#fff]"},{default:j((()=>[C(t,{class:"flex mr-5",onClick:l[4]||(l[4]=e=>te.value=!te.value)},{default:j((()=>[C(t,{class:"flex justify-start items-center"},{default:j((()=>[z(P(se.value)+" ",1),C(a,{name:"arrow-down",bold:"",size:"13",class:"ml-1",onClick:l[3]||(l[3]=()=>{}),color:"var(--theme-color-main)"})])),_:1})])),_:1}),C(t,{class:"flex justify-start items-center",onClick:l[5]||(l[5]=e=>Y.value.open())},{default:j((()=>[z(P(S(E)("screen"))+" ",1),C(a,{name:"/static/assets/stock/screen.png",bold:"",size:"16",class:"ml-1",color:"var(--theme-color-main)"})])),_:1})])),_:1})])),_:1}),C(W,{class:"mt-[150px] sort-card",show:te.value,onClick:l[8]||(l[8]=e=>te.value=!1)},{default:j((()=>[U(C(N,{modelValue:se.value,"onUpdate:modelValue":l[6]||(l[6]=e=>se.value=e),placement:"column",iconPlacement:"right",onClick:l[7]||(l[7]=O((()=>{}),["stop"])),activeColor:"#fff",iconColor:"#000",class:"px-3 py-2 box-border bg-[#fff] border-none"},{default:j((()=>[(k(!0),w(I,null,R(oe,((e,l)=>(k(),A($,{customStyle:{marginBottom:"8px"},key:l,iconSize:"20",onChange:l=>(e=>{se.value=e,J.searchParams.__order__=e.value,ie().resetUpScroll(),te.value=!1})(e),iconColor:"var(--theme-color-main)",labelSize:"13",label:e.label,labelColor:se.value==e.label?"var(--theme-color-main)":"var(--theme-color-tips)",name:e.label},null,8,["onChange","label","labelColor","name"])))),128))])),_:1},8,["modelValue"]),[[V,te.value]])])),_:1},8,["show"]),C(t,{class:"text-xs text-[var(--theme-color-content)] bg-[#fff] w-full box-border mb-1"},{default:j((()=>[C(t,{class:"flex justify-between items-center py-2"},{default:j((()=>[C(t,{class:"w-1/2 flex text-center flex-col items-center border-solid border-r-1px border-[#dcdfe6] border-0",onClick:l[9]||(l[9]=e=>ee.value=!0)},{default:j((()=>[C(t,{class:"mb-1 text-[var(--theme-color-primary)] text-sm"},{default:j((()=>[z(P(J.lockStat.totol_cost||0),1)])),_:1}),C(a,{name:"question-circle",label:"总成本",labelPos:"left",labelSize:"12px",size:"12",color:"var(--theme-color-primary)",labelColor:"var(--theme-color-primary)",class:"mr-1"})])),_:1}),C(t,{class:"w-1/2 flex text-center flex-col items-center"},{default:j((()=>[C(t,{class:"mb-1 text-[var(--theme-color-primary)] text-sm"},{default:j((()=>[z(P(J.lockStat.deposit||0),1)])),_:1}),C(t,null,{default:j((()=>[z("定金总额")])),_:1})])),_:1})])),_:1}),C(q,{class:"!my-1"}),C(t,{class:"flex justify-between items-center py-3"},{default:j((()=>[C(t,{class:"w-1/2 flex text-center flex-col items-center"},{default:j((()=>[C(t,{class:"mb-1 text-[var(--theme-color-primary)] text-sm"},{default:j((()=>[z(P(J.lockStat.exp_trans_price||0),1)])),_:1}),C(t,null,{default:j((()=>[z("预计成交总额（元）")])),_:1})])),_:1}),C(t,{class:"w-1/2 flex text-center flex-col items-center border-solid border-l-1px border-[#dcdfe6] border-0"},{default:j((()=>[C(t,{class:"mb-1 text-[var(--theme-color-primary)] text-sm"},{default:j((()=>[z(P(J.lockStat.goods_num||0),1)])),_:1}),C(t,{class:"text-red-500"},{default:j((()=>[z("锁单数量（个）")])),_:1})])),_:1})])),_:1})])),_:1}),C(F,{ref:"mescrollRef",onInit:S(ce),onUp:Q,onDown:Q,up:J.mescrollUp,top:"0"},{default:j((()=>[J.list.length?(k(),A(t,{key:0,class:"pb-[25px]"},{default:j((()=>[(k(!0),w(I,null,R(J.list,((e,l)=>(k(),w(I,null,[C(t,{class:"flex flex-col p-3 bg-[#fff] box-border",onClick:l=>(e=>{T({url:"/addon/saler_tools/pages/lockOrder/detail",param:{order_id:e.order_id}})})(e)},{default:j((()=>[C(t,{class:"text-xs mb-1 flex justify-between items-center"},{default:j((()=>[C(t,null,{default:j((()=>[z("销售人："+P(e.lock_name||S(E)("nothing")),1)])),_:2},1024),e.lock_time?(k(),A(t,{key:0,class:"text-[var(--theme-color-tips)]"},{default:j((()=>[z(P(e.lock_time),1)])),_:2},1024)):B("",!0)])),_:2},1024),C(t,{class:"flex justify-between items-center"},{default:j((()=>[e.goods_cover?(k(),A(le,{key:0,"show-loading":!0,src:S(K)(e.goods_cover),mode:"aspectFit",width:"100px",radius:"5",height:"100px",class:"z-10 flex items-center"},null,8,["src"])):B("",!0),C(t,{class:"pl-2 flex justify-between flex-col flex-1 min-h-[90px]"},{default:j((()=>[C(t,{class:"text-xs text-[var(--theme-color-main)]"},{default:j((()=>[C(ne,{lines:1,text:e.goods_name},null,8,["text"])])),_:2},1024),C(t,{class:"flex flex-col"},{default:j((()=>[C(t,{class:"text-xs text-[var(--theme-text-blue)] my-2 text-right"},{default:j((()=>[z(" 数量："+P(e.goods_num||0),1)])),_:2},1024),C(t,{class:"flex justify-between items-center mb-1 text-[13px]"},{default:j((()=>[C(t,{class:"text-[var(--theme-color-tips)]"},{default:j((()=>[z(" 定金：￥"+P(e.deposit||0),1)])),_:2},1024),C(t,{class:"text-[var(--theme-text-red)]"},{default:j((()=>[z(" 预计成交：￥"+P(e.exp_trans_price||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),C(q,{class:"!p-0 !m-0"})],64)))),256))])),_:1})):B("",!0),J.list.length||ue.value?B("",!0):(k(),A(G,{key:1,option:{tip:"暂无商品"}}))])),_:1},8,["onInit","up"])])),_:1},8,["style"]),C(me,{show:re.value,mode:"bottom",onClose:l[11]||(l[11]=e=>re.value=!1),onOpen:l[12]||(l[12]=e=>re.value=!0)},{default:j((()=>[C(t,{class:"p-4 flex justify-between items-center"},{default:j((()=>[C(t),C(t,{class:"flex !text-center font-bold text-[30rpx]"},{default:j((()=>[z("筛选")])),_:1}),C(a,{name:"close",size:"15",onClick:l[10]||(l[10]=e=>re.value=!1)})])),_:1})])),_:1},8,["show"]),C(me,{show:H.value,mode:"bottom",onClose:l[14]||(l[14]=e=>H.value=!1),onOpen:l[15]||(l[15]=e=>H.value=!0)},{default:j((()=>[C(t,{class:"p-4 flex justify-between items-center"},{default:j((()=>[C(t),C(t,{class:"flex !text-center font-bold text-[30rpx]"},{default:j((()=>[z(P(S(E)("explain.lock")),1)])),_:1}),C(a,{name:"close",size:"15",onClick:l[13]||(l[13]=e=>H.value=!1)})])),_:1}),C(de),C(t,{class:"p-4 flex flex-col"},{default:j((()=>[C(t,null,{default:j((()=>[z(P(S(E)("explain.lock0")),1)])),_:1}),C(t,{style:{"text-indent":"1em"},class:"mt-1"},{default:j((()=>[z(P(S(E)("explain.lock1")),1)])),_:1}),C(t,{style:{"text-indent":"1em"},class:"mt-1"},{default:j((()=>[z(P(S(E)("explain.lock2")),1)])),_:1})])),_:1})])),_:1},8,["show"]),C(pe,{show:ee.value,closeOnClickOverlay:!0,width:"300px",contentTextAlign:"center"},{default:j((()=>[C(t,{class:"flex flex-col text-sm w-full"},{default:j((()=>[C(t,{class:"flex justify-between items-center w-full box-border mb-1"},{default:j((()=>[z(" 商品原始总成本 "),C(t,null,{default:j((()=>[z("￥"+P(J.lockStat.initial_cost||0),1)])),_:1})])),_:1}),C(t,{class:"flex justify-between items-center w-full box-border"},{default:j((()=>[z(" 商品附加成本 "),C(t,null,{default:j((()=>[z("￥"+P(J.lockStat.additional_total_cost||0),1)])),_:1})])),_:1})])),_:1})])),confirmButton:j((()=>[C(fe,{text:S(E)("tips_i_see"),onClick:l[16]||(l[16]=e=>ee.value=!1),color:"var(--theme-color-primary)"},null,8,["text"])])),_:1},8,["show"]),C(X,{ref_key:"screenPopupRef",ref:Y,modelValue:J.searchParams,"onUpdate:modelValue":l[17]||(l[17]=e=>J.searchParams=e)},null,8,["modelValue"])],64)}}}),[["__scopeId","data-v-55228c60"]]);export{H as default};
