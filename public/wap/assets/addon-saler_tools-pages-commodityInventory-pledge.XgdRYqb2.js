import{d as e,S as t,r as l,B as a,b as s,x as o,c,$ as r,l as n,U as u,a_ as d,o as m,a0 as i,f as p,w as f,p as x,a1 as v,am as h,u as _,a2 as b,t as g,n as y,i as w,e as k,a as C,cH as z,_ as j}from"./index-VHk1sExB.js";import{c as B}from"./custom-popup.CdItBrdJ.js";import{g as S}from"./warehouse.DBo3FtFy.js";/* empty css                                                                     */const $=j(e({__name:"pledge",setup(e){const j=t({});l(0),l([{name:"自有商品",value:0,type:"own"},{name:"寄卖商品",value:1,type:"consignment"},{name:"质押商品",value:2,type:"pledged"},{name:"其他",value:3,type:"other"}]);const $=l(0),I=l([]);S().then((e=>{I.value=e.data}));const N=l(!1),U=l(!1),V=l([{name:"店员1",checked:!1,value:0,selected:!1},{name:"店员2",checked:!1,value:1,selected:!1},{name:"店员3",checked:!1,value:2,selected:!1},{name:"店员4",checked:!1,value:3,selected:!1},{name:"Mia",checked:!1,value:4,selected:!1}]),A=l(!1),M=l([]),T=e=>{M.value=e.map((e=>({name:e.name,checked:e.checked,value:e.value,selected:e.selected}))),V.value=V.value.map((e=>{const t=M.value.some((t=>t.value===e.value));return{...e,selected:t,checked:t}}))},D=l(!1),H=l(Date.now()),L=(e,t)=>"year"===e?`${t}年`:"month"===e?`${t}月`:"day"===e?`${t}日`:"hour"===e?`${t}时`:"minute"===e?`${t}分`:t;return a((e=>{j.selectedBrandId=e.brandId,j.selectedBrandName=e.brandName,console.log(j)})),(e,t)=>{const l=s(c("up-navbar"),o),a=w,S=s(c("up-button"),r),q=s(c("up-icon"),n),E=s(c("up-input"),u),F=s(c("up-datetime-picker"),d);return m(),i(v,null,[p(a,{style:y(e.themeColor())},{default:f((()=>[p(l,{title:"创建质押商品盘点",autoBack:!0,safeAreaInsetTop:!0,placeholder:!0}),p(a,{class:"bg-[#fff] mt-1"},{default:f((()=>[p(a,{class:"p-3 pb-2 flex flex-col"},{default:f((()=>[p(a,{class:"flex justify-between items-center"},{default:f((()=>[p(a,{class:"flex text-[var(--theme-input-title-size)]"},{default:f((()=>[x(" 商品分类 "),p(a,{class:"text-rose-500"},{default:f((()=>[x("*")])),_:1})])),_:1}),p(a,{class:"text-[var(--theme-input-placeholder)] text-xs"},{default:f((()=>[x(" 选择需要盘点的商品分类，不填则默认全部 ")])),_:1})])),_:1}),p(a,{class:"grid grid-cols-3 mt-2 gap-x-3"},{default:f((()=>[(m(!0),i(v,null,h(I.value,((e,t)=>(m(),k(a,null,{default:f((()=>[p(S,{color:$.value===t?"var(--theme-color-primary)":"",plain:!0,text:e.category_name,class:b(["mb-2",$.value===t?"!text-[#fff] !bg-[var(--theme-color-primary)]":"!text-[var(--theme-color-tips)] !bg-gray-50 !border-none"]),onClick:l=>((e,t)=>{$.value=t,j.category_id=e.category_id,console.log(j)})(e,t)},null,8,["color","text","class","onClick"])])),_:2},1024)))),256))])),_:1})])),_:1}),p(a,{class:"p-3 flex items-center justify-between text-[var(--theme-input-title-size)]",onClick:t[1]||(t[1]=e=>A.value=!0)},{default:f((()=>[p(a,{class:"flex"},{default:f((()=>[x(" 盘点人员 ")])),_:1}),p(a,{class:"flex items-center h-[14px]"},{default:f((()=>[p(a,{class:"text-[var(--theme-input-placeholder)] text-sm",onClick:t[0]||(t[0]=e=>A.value=!0)},{default:f((()=>[x(" 请选择盘点人员 ")])),_:1}),p(q,{name:"arrow-right",size:"13",color:"var(--theme-input-placeholder)",class:"ml-[5rpx]"})])),_:1})])),_:1}),p(a,{class:"px-3 flex flex-wrap items-end"},{default:f((()=>[(m(!0),i(v,null,h(M.value,((e,t)=>(m(),k(a,{class:"relative overflow-hidden rounded mr-3",onClick:e=>(e=>{const t=M.value[e];M.value.splice(e,1),V.value=V.value.map((e=>e.value===t.value?{...e,selected:!1,checked:!1}:e))})(t)},{default:f((()=>[p(S,{text:e.name,plain:"",color:"var(--theme-color-content)",closable:U.value,class:"!border-none mb-2 tag-unselected"},null,8,["text","closable"]),p(a,{class:"flex items-end justify-center h-[40px] w-[40px] absolute bg-rose-500 top-[-24px] right-[-24px]",style:{transform:"rotate(45deg)"}},{default:f((()=>[p(q,{name:"close",size:"11",color:"#fff",style:{transform:"rotate(45deg)"}})])),_:1})])),_:2},1032,["onClick"])))),256))])),_:1}),p(a,{class:"p-3 flex items-center justify-between text-[var(--theme-input-title-size)]",onClick:t[3]||(t[3]=e=>N.value=!0)},{default:f((()=>[p(a,{class:"flex"},{default:f((()=>[x(" 品牌 ")])),_:1}),p(a,{class:"flex items-center h-[14px] text-sm",onClick:t[2]||(t[2]=e=>_(C)({url:"/addon/saler_tools/pages/product/brand?type=pledge"}))},{default:f((()=>[p(a,{class:b(j.selectedBrandName?"text-[var(--theme-color-main)]":"text-[var(--theme-input-placeholder)]")},{default:f((()=>[x(g(j.selectedBrandName?j.selectedBrandName:"请选择品牌"),1)])),_:1},8,["class"]),p(q,{name:"arrow-right",size:"13",color:"var(--theme-input-placeholder)",class:"ml-[5rpx]"})])),_:1})])),_:1}),p(a,{class:"p-3 flex items-center justify-between text-[var(--theme-input-title-size)]"},{default:f((()=>[p(a,{class:"flex"},{default:f((()=>[x(" 盘点名称 ")])),_:1}),p(a,{class:"flex-1 flex items-center h-[14px] text-sm"},{default:f((()=>[p(E,{placeholder:"不填则系统默认生产盘点名称",border:"none",inputAlign:"right",fontSize:"15",placeholderStyle:"color: var(--theme-input-placeholder);text-align: end;"})])),_:1})])),_:1}),p(a,{class:"p-3 flex items-center justify-between text-[var(--theme-input-title-size)]"},{default:f((()=>[p(a,{class:"flex"},{default:f((()=>[x(" 盘点结束时间 ")])),_:1}),p(a,{class:"flex items-center h-[14px] text-sm",onClick:t[4]||(t[4]=e=>D.value=!0)},{default:f((()=>[x(g(_(z)(H.value/1e3))+" ",1),p(q,{name:"arrow-right",size:"13",color:"var(--theme-input-placeholder)",class:"ml-[5rpx]"})])),_:1})])),_:1}),p(a,{class:"px-3 pb-3 text-[var(--theme-text-red)] text-xs"},{default:f((()=>[x(" 填选盘点时间后进入盘点的商品不可操作（入库、编辑、删除、开单、退货） ")])),_:1})])),_:1}),p(a,{class:"fixed bottom-0 left-0 h-[80px] w-full box-border p-3 bg-[#fff] z-100",style:{"box-shadow":"var(--theme-box-shadow)"}},{default:f((()=>[p(a,{class:"flex gap-3"},{default:f((()=>[p(S,{class:"!text-[#606266]",color:"#909399",plain:"",text:"取消"}),p(S,{text:"创建",color:"#e0b87a"})])),_:1})])),_:1})])),_:1},8,["style"]),p(B,{show:A.value,title:"请选择盘点人员",list:V.value,tooltip:"显示该店铺历史全部员工",subhead:"盘点人员",checkboxLabel:"显示全部员工","onUpdate:show":t[5]||(t[5]=e=>A.value=e),onSelect:T,selectionMode:"multiple",selectItemSize:"normal",showSearch:!0},null,8,["show","list"]),p(F,{show:D.value,modelValue:H.value,"onUpdate:modelValue":t[6]||(t[6]=e=>H.value=e),mode:"datetime",confirmColor:"var(--theme-color-primary)",onConfirm:t[7]||(t[7]=e=>D.value=!1),onCancel:t[8]||(t[8]=e=>D.value=!1),formatter:L,confirmText:"确定"},null,8,["show","modelValue"])],64)}}}),[["__scopeId","data-v-3d73aecb"]]);export{$ as default};
