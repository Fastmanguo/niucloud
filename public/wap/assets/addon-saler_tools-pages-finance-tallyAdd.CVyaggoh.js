import{d as e,S as l,r as t,B as a,b as o,x as s,c as r,cc as n,U as u,$ as f,l as c,bG as i,aW as d,bZ as m,a_ as p,ac as x,o as h,a0 as v,f as b,w as y,p as g,a1 as _,am as w,g as C,v as z,n as k,cx as j,i as A,e as T,a2 as I,_ as S}from"./index-VHk1sExB.js";import{g as B}from"./warehouse.DBo3FtFy.js";const $=S(e({__name:"tallyAdd",setup(e){l({});const S=t([]);B().then((e=>{S.value=e.data}));const $=t([]),D=e=>{$.value.splice(e.index,1)},U=async e=>{let l=[].concat(e.file),t=$.value.length;l.map((e=>{$.value.push({...e,status:"uploading",message:"上传中"})}));for(let a=0;a<l.length;a++){const e=await V(l[a].url);let o=$.value[t];$.value.splice(t,1,{...o,status:"success",message:"",url:e}),t++}},V=e=>new Promise(((l,t)=>{j({url:"http://192.168.2.21:7001/upload",filePath:e,name:"file",formData:{user:"test"},success:e=>{setTimeout((()=>{l(e.data.data)}),1e3)}})})),L=t(!1),P=t(Date.now()),W=(e,l)=>"year"===e?`${l}年`:"month"===e?`${l}月`:"day"===e?`${l}日`:l,F=t(!1);t([]);const G=t([{name:"快递费",value:0},{name:"维修费",value:1},{name:"参展费",value:2},{name:"其他",value:3}]),R=t(0),Z=t(!1),q=t(0),E=l([{name:"支出"},{name:"收入"}]),H=e=>{q.value=e.index};return a((e=>{q.value=e.currentTab})),(e,l)=>{const t=o(r("up-navbar"),s),a=o(r("up-tabs"),n),j=A,S=o(r("up-input"),u),B=o(r("up-button"),f),V=o(r("up-icon"),c),q=o(r("up-text"),i),J=o(r("up-upload"),d),K=o(r("up-textarea"),m),M=o(r("up-datetime-picker"),p),N=o(r("up-modal"),x);return h(),v(_,null,[b(j,{style:k(e.themeColor())},{default:y((()=>[b(t,{title:"记一笔",autoBack:!0,safeAreaInsetTop:!0,placeholder:!0}),b(j,{class:"py-2"},{default:y((()=>[b(a,{list:E,activeStyle:"color:var(--theme-color-primary);font-size:16px",lineWidth:"30",onChange:H,lineColor:"var(--theme-color-primary)",scrollable:!1,inactiveStyle:"color:var(--theme-color-main);font-size:13px",itemStyle:"padding:0px 5px 3px;z-index:2"},null,8,["list"])])),_:1}),b(j,{class:"border-t-[10px] border-[0px] border-solid border-[#f4f5f7]"},{default:y((()=>[b(j,{class:"p-3 flex items-center justify-between text-[var(--theme-input-title-size)]"},{default:y((()=>[b(j,{class:"flex"},{default:y((()=>[g(" 支出金额 ")])),_:1}),b(j,{class:"flex items-center h-[14px] flex-1 ml-2"},{default:y((()=>[b(S,{placeholder:"填写金额",border:"bottom",inputAlign:"right",placeholderStyle:"color: var(--theme-color-tips);text-align: end;\r\n            font-size:16px"})])),_:1})])),_:1}),b(j,{class:"p-3 flex items-center justify-between text-[28rpx]"},{default:y((()=>[b(j,{class:"flex"},{default:y((()=>[g(" 选择分类 ")])),_:1}),b(j,{class:"text-[var(--theme-color-primary)]",onClick:l[0]||(l[0]=e=>Z.value=!Z.value)},{default:y((()=>[g(" 删除 ")])),_:1})])),_:1}),b(j,{class:"px-3 flex flex-wrap items-center"},{default:y((()=>[(h(!0),v(_,null,w(G.value,((e,l)=>(h(),T(j,{class:"relative overflow-hidden mr-[10px] rounded-tr-[3px]"},{default:y((()=>[b(B,{color:R.value===l?"var(--theme-color-primary)":"",plain:!0,text:e.name,type:"default",class:I(["mb-2",R.value===l?"!text-[#fff] !bg-[var(--theme-color-primary)]":"!text-[var(--theme-color-main)] !bg-[#fff] border-1px border-solid border-[var(--theme-border)]"]),size:"small",onClick:e=>(e=>{R.value=e})(l)},null,8,["color","text","class","onClick"]),C(b(j,{class:"flex items-end justify-center h-[40px] w-[40px] absolute bg-rose-500 top-[-23px] right-[-23px]",style:{transform:"rotate(45deg)"}},{default:y((()=>[b(V,{name:"close",size:"11",color:"#fff",style:{transform:"rotate(45deg)"},onClick:e=>(e=>{G.value.splice(e,1)})(l)},null,8,["onClick"])])),_:2},1536),[[z,Z.value]])])),_:2},1024)))),256)),b(j,{class:"relative overflow-hidden"},{default:y((()=>[b(B,{text:"自定义",size:"small",plain:"",type:"default",class:"!text-[var(--theme-color-main)] mb-2 py-0 px-[20px] border-1px border-solid border-[var(--theme-border)] bg-[#fff]",iconColor:"var(--theme-color-primary)",onClick:l[1]||(l[1]=e=>F.value=!0),icon:"plus",style:{width:"auto"}}),C(b(j,{class:"hidden flex items-end justify-center h-[40px] w-[40px] absolute bg-rose-500 top-[-24px] right-[-24px]",style:{transform:"rotate(45deg)"}},{default:y((()=>[b(V,{name:"close",size:"11",color:"#fff",style:{transform:"rotate(45deg)"}})])),_:1},512),[[z,Z.value]])])),_:1})])),_:1}),b(j,{class:"p-3 flex items-center justify-between text-[var(--theme-input-title-size)]"},{default:y((()=>[b(j,{class:"flex"},{default:y((()=>[g(" 选择日期 ")])),_:1}),b(j,{class:"flex items-center h-[14px] text-[15px]",onClick:l[2]||(l[2]=e=>L.value=!0)},{default:y((()=>[b(q,{mode:"date",text:P.value},null,8,["text"]),b(V,{name:"arrow-down-fill",size:"12",color:"var(--theme-color-main)",class:"ml-[5rpx]"})])),_:1})])),_:1}),b(j,{class:"p-3 flex flex-col"},{default:y((()=>[b(j,{class:"flex text-[var(--theme-input-title-size)]"},{default:y((()=>[g(" 图片 ")])),_:1}),b(j,{class:"flex mt-2 justify-between"},{default:y((()=>[b(J,{fileList:$.value,onAfterRead:U,deletable:!0,onDelete:D,name:"1",multiple:"",previewFullImage:!0,maxCount:9,uploadText:"最多添加9张图片",width:"110",uploadIconColor:"#ffffff",uploadIcon:"/static/assets/warehouse/add-photo.png",height:"110"},null,8,["fileList"])])),_:1})])),_:1}),b(j,{class:"p-3 flex flex-col custom-modal"},{default:y((()=>[b(j,{class:"flex justify-between items-center text-[var(--theme-input-title-size)]"},{default:y((()=>[g(" 备注 ")])),_:1}),b(j,{class:"my-2 flex flex-col !box-border"},{default:y((()=>[b(K,{placeholder:"请输入备注信息（限50个字）",count:"",maxlength:"50",class:"!bg-[#f4f5f7]"})])),_:1})])),_:1})])),_:1}),b(j,{class:"fixed bottom-0 left-0 w-full box-border bg-[#fff] z-100 p-3 h-[80px]",style:{"box-shadow":"var(--theme-box-shadow)"}},{default:y((()=>[b(B,{text:"保存",class:"!text-[#fff] !bg-[var(--theme-color-primary)] !border-none",onClick:l[3]||(l[3]=()=>{})})])),_:1})])),_:1},8,["style"]),b(M,{show:L.value,modelValue:P.value,"onUpdate:modelValue":l[4]||(l[4]=e=>P.value=e),mode:"date",confirmColor:"var(--theme-color-primary)",onConfirm:l[5]||(l[5]=e=>L.value=!1),onCancel:l[6]||(l[6]=e=>L.value=!1),formatter:W,confirmText:"确定"},null,8,["show","modelValue"]),b(N,{show:F.value,"onUpdate:show":l[10]||(l[10]=e=>F.value=e),width:300,showConfirmButton:!1,contentTextAlign:"center"},{confirmButton:y((()=>[b(j,{class:"flex gap-3"},{default:y((()=>[b(B,{onClick:l[8]||(l[8]=e=>F.value=!1),class:"!text-[var(--theme-color-main)]",color:"#f4f5f7",text:"取消"}),b(B,{text:"确定",onClick:l[9]||(l[9]=e=>F.value=!1),color:"var(--theme-color-primary)"})])),_:1})])),default:y((()=>[b(j,{class:"flex flex-col items-center w-full"},{default:y((()=>[b(j,{class:"flex !text-center font-bold text-base mb-3"},{default:y((()=>[g("添加自定义分类")])),_:1}),b(j,{class:"flex flex-col !box-border w-full !bg-[#f4f5f7] p-2 !rounded"},{default:y((()=>[b(S,{placeholder:"请输入自定义分类（限10个字）",border:"none",onChange:l[7]||(l[7]=()=>{}),inputAlign:"center"})])),_:1})])),_:1})])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-0c96cd11"]]);export{$ as default};
