import{d as e,r as a,B as t,b as l,bR as s,c as r,o,e as c,w as x,f as n,I as p,h as i,a0 as u,am as d,a1 as f,u as m,n as v,an as g,ao as _,q as h,ak as b,i as y,p as k,t as w,bS as C,K as j,a as V,L as I,_ as M}from"./index-VHk1sExB.js";import{u as S,M as U}from"./useMescroll.Bh35ex94.js";import{M as z}from"./mescroll-empty.uEQNJN_1.js";import{c as R}from"./verify.qwVVFkOp.js";import{s as F}from"./select-date.0-m1f1Ei.js";import"./mescroll-i18n.DUzOixk-.js";const q=M(e({__name:"record",setup(e){const M=a(""),q=a([]),B=a([]),D=a(!1),{mescrollInit:E,downCallback:K,getMescroll:L}=S(_,g);a(null),t((()=>{}));const X=e=>{D.value=!1;let a={page:e.num,limit:e.size,keyword:M.value,create_time:q.value};R(a).then((a=>{let t=a.data.data;1==e.num&&(B.value=[]),B.value=B.value.concat(t),e.endSuccess(t.length),D.value=!0})).catch((()=>{D.value=!0,e.endErr()}))},Y=()=>{L().resetUpScroll()},Z=a(),$=()=>{Z.value.show=!0},A=e=>{q.value=e,B.value=[],L().resetUpScroll()};return(e,a)=>{const t=h,g=b,_=y,S=I,R=l(r("u--image"),s);return o(),c(_,{class:"bg-[var(--page-bg-color)] min-h-screen overflow-hidden",style:v(e.themeColor())},{default:x((()=>[n(_,{class:"fixed left-0 right-0 top-0 z-99 bg-[#fff]"},{default:x((()=>[n(_,{class:"py-[14rpx] flex items-center justify-between px-[20rpx]"},{default:x((()=>[n(_,{class:"flex-1 search-input mr-[20rpx]"},{default:x((()=>[n(t,{onClick:a[0]||(a[0]=p((e=>Y()),["stop"])),class:"nc-iconfont nc-icon-sousuo-duanV6xx1 btn"}),n(g,{class:"input",maxlength:"50",type:"text",modelValue:M.value,"onUpdate:modelValue":a[1]||(a[1]=e=>M.value=e),placeholder:"请输入搜索关键词",placeholderClass:"text-[var(--text-color-light9)] text-[24rpx]","confirm-type":"search",onConfirm:a[2]||(a[2]=e=>Y())},null,8,["modelValue"]),M.value?(o(),c(t,{key:0,class:"nc-iconfont nc-icon-cuohaoV6xx1 clear",onClick:a[3]||(a[3]=e=>M.value="")})):i("",!0)])),_:1}),n(_,{class:"nc-iconfont nc-icon-a-riliV6xx-36 !text-[30rpx] leading-[36rpx] text-[var(--text-color-light6)]",onClick:$})])),_:1})])),_:1}),n(U,{ref:"mescrollRef",top:"88rpx",onInit:m(E),down:{use:!1},onUp:X},{default:x((()=>[B.value.length?(o(),c(_,{key:0,class:"sidebar-margin pt-[var(--top-m)]"},{default:x((()=>[(o(!0),u(f,null,d(B.value,((e,a)=>(o(),c(_,{key:e.id,class:"w-full flex flex-col mb-[var(--top-m)] card-template",onClick:a=>{V({url:"/app/pages/verify/detail",param:{code:e.code}})}},{default:x((()=>[n(_,{class:"flex items-center mb-[30rpx] leading-[1] text-[26rpx]"},{default:x((()=>[n(_,{class:"nc-iconfont nc-icon-hexiaotaiV6xx !text-[26rpx] pr-[10rpx]"}),n(t,{class:"truncate text-[#303133] text-[26rpx]"},{default:x((()=>[k("核销码:")])),_:1}),n(t,{class:"ml-[10rpx] max-w-[494rpx]"},{default:x((()=>[k(w(e.code),1)])),_:2},1024),n(t,{class:"text-[#303133] text-[26rpx] font-400 nc-iconfont nc-icon-fuzhiV6xx1 ml-[11rpx]",onClick:p((a=>m(C)(e.code)),["stop"])},null,8,["onClick"])])),_:2},1024),(o(!0),u(f,null,d(e.value.list,((a,t)=>(o(),c(_,{class:"flex flex-1",key:t},{default:x((()=>[n(R,{width:"130rpx",height:"130rpx",radius:"var(--goods-rounded-big)",src:m(j)(a.cover?a.cover:""),mode:"aspectFill"},{error:x((()=>[n(S,{class:"w-[130rpx] h-[130rpx] rounded-[var(--goods-rounded-big)] overflow-hidden",src:m(j)("static/resource/images/diy/shop_default.jpg"),mode:"aspectFill"},null,8,["src"])])),_:2},1032,["radius","src"]),n(_,{class:"flex flex-col flex-1 ml-[20rpx] py-[4rpx]"},{default:x((()=>[n(_,{class:"max-w-[490rpx] leading-[1.3] truncate text-[28rpx] text-[#303133]"},{default:x((()=>[k(w(a.name),1)])),_:2},1024),e.sub_name?(o(),c(_,{key:0,class:"mt-[14rpx] truncate text-[24rpx] text-[var(--text-color-light9)] max-w-[490rpx]"},{default:x((()=>[k(w(e.sub_name),1)])),_:2},1024)):i("",!0),n(_,{class:"text-[24rpx] mt-[10rpx] text-[var(--text-color-light9)]"},{default:x((()=>[k("x1")])),_:1})])),_:2},1024)])),_:2},1024)))),128)),n(_,{class:"flex bg-[var(--temp-bg)] py-[20rpx] px-[20rpx] rounded-[12rpx] mt-[20rpx]"},{default:x((()=>[n(_,{class:"flex-1"},{default:x((()=>[n(_,{class:"text-[22rpx] text-[var(--text-color-light9)] mb-[10rpx] leading-[30rpx]"},{default:x((()=>[k("核销时间")])),_:1}),n(_,{class:"text-[26rpx] text-[#303133] leading-[36rpx]"},{default:x((()=>[k(w(e.create_time),1)])),_:2},1024)])),_:2},1024),n(_,{class:"flex-1"},{default:x((()=>[n(_,{class:"text-[22rpx] text-[var(--text-color-light9)] mb-[10rpx] leading-[30rpx]"},{default:x((()=>[k("核销员")])),_:1}),n(_,{class:"text-[26rpx] text-[#303133] leading-[36rpx]"},{default:x((()=>[k(w(e.member?e.member.nickname:"--"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):i("",!0),!B.value.length&&D.value?(o(),c(z,{key:1,option:{tip:"暂无核销记录"}})):i("",!0)])),_:1},8,["onInit"]),n(F,{ref_key:"selectDateRef",ref:Z,onConfirm:A},null,512)])),_:1},8,["style"])}}}),[["__scopeId","data-v-09e2c9a3"]]);export{q as default};
