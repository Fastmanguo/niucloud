import{d as a,S as e,B as s,Q as l,s as r,ax as t,A as o,b as n,x as i,c,c8 as d,o as p,e as u,w as m,f as _,u as f,a0 as h,am as b,a1 as g,h as y,n as k,an as w,ao as U,cB as x,i as I,p as P,t as S,ap as j,_ as v}from"./index-VHk1sExB.js";import{u as C,M}from"./useMescroll.Bh35ex94.js";import{M as q}from"./mescroll-empty.uEQNJN_1.js";import"./mescroll-i18n.DUzOixk-.js";const A=v(a({__name:"series",setup(a){const{mescrollInit:v,downCallback:A,getMescroll:B}=C(U,w),V=e({loading:!0,searchParams:{series_name:null,brand_id:null},mescrollUp:{auto:!1,page:{size:50}},list:[],mescrollRef:null,type:""}),z=a=>{let e={page:a.num,limit:a.size,...V.searchParams};x(e).then((e=>{1==a.num&&(V.list=[]),V.list=V.list.concat(e.data.data),a.endSuccess(e.data.data.length)}))},R=()=>{B().resetUpScroll(!0)};s((a=>{if(!a.brand_id)return l({title:r("pages.series.brand_required")});V.type=a.type||"",V.loading=!0,V.searchParams.brand_id=a.brand_id,t((()=>{B().resetUpScroll()}))})),o();return(a,e)=>{const s=n(c("up-navbar"),i),t=n(c("up-search"),d),o=I;return p(),u(o,{style:k(a.themeColor())},{default:m((()=>[_(s,{title:f(r)("pages.series.brand_required"),autoBack:!0,safeAreaInsetTop:!0,placeholder:!0},null,8,["title"]),_(o,{class:"bg-[#fff] p-2 box-border w-full"},{default:m((()=>[_(t,{placeholder:"搜索系列名称",shape:"square",showAction:!1,modelValue:V.searchParams.series_name,"onUpdate:modelValue":e[0]||(e[0]=a=>V.searchParams.series_name=a),onSearch:R},null,8,["modelValue"])])),_:1}),_(M,{ref:a=>V.mescrollRef=a,onInit:f(v),down:{auto:!1},up:V.mescrollUp,onUp:z,onDown:z,top:"0",auto:!1},{default:m((()=>[(p(!0),h(g,null,b(V.list,((a,e)=>(p(),u(o,{key:e,class:"page-item",onClick:e=>{return s=a,void("select"==V.type&&(j("saler_tools_select_series_id",s),l()));var s}},{default:m((()=>[P(S(a.series_name),1)])),_:2},1032,["onClick"])))),128)),V.loading||V.list.length?y("",!0):(p(),u(q,{key:0,option:{tip:"暂无商品"}}))])),_:1},8,["onInit","up"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-53b7031c"]]);export{A as default};
