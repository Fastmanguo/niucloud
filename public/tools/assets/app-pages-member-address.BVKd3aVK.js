import{d as e,r as a,H as s,X as t,bp as l,x as r,s as c,c as d,h as o,w as u,n,bq as i,i as x,o as f,f as p,an as _,a5 as m,a6 as v,at as b,p as h,t as k,q as g,u as y,br as C,R as w,a7 as A,Q as j,a as q,bs as E,bt as V,bu as z,_ as F}from"./index-DlbBJ3bC.js";const H=F(e({__name:"address",setup(e){const F=a(!0),H=a(0),I=a([]);a([]);const Q=a(""),R=a("");s((e=>{Q.value=e.type||"",R.value=e.source||"",e.type&&(H.value="address"==e.type?0:1),t("selectAddressCallback")&&l({key:"selectAddressCallback"})}));r((()=>{i({}).then((({data:e})=>{const a=[],s=[];e.forEach((e=>{"address"==e.type?a.push(e):s.push(e)})),R.value?I.value=0==H.value?a:s:I.value=e,F.value=!1})).catch((()=>{F.value=!1}))}));const T=()=>{q({url:"/app/pages/member/address_edit",param:{source:R.value}})};a([{text:c("delete"),style:{backgroundColor:"#F56C6C"}}]);return(e,a)=>{const s=x,l=g,r=j,i=_;return F.value?o("",!0):(f(),d(s,{key:0,class:"address bg-[var(--page-bg-color)] min-h-[100vh]",style:n(e.themeColor())},{default:u((()=>[p(i,{"scroll-y":"true"},{default:u((()=>[I.value.length?(f(),d(s,{key:0,class:"sidebar-margin pt-[var(--top-m)]"},{default:u((()=>[(f(!0),m(v,null,b(I.value,((e,a)=>(f(),d(s,{class:"mb-[var(--top-m)] rounded-[var(--rounded-big)] overflow-hidden"},{default:u((()=>[p(s,{class:"flex flex-col card-template"},{default:u((()=>[p(s,{class:"flex-1 line-feed mr-[20rpx]",onClick:a=>(e=>{const a=t("selectAddressCallback");a&&(a.address_id=e.id,E({key:"selectAddressCallback",data:a,success(){q({url:a.back,mode:"redirectTo"})}}))})(e)},{default:u((()=>[p(s,{class:"flex items-center"},{default:u((()=>[p(s,{class:"text-[#333] text-[30rpx] leading-[34rpx] font-500"},{default:u((()=>[h(k(e.name),1)])),_:2},1024),p(l,{class:"text-[#333] text-[30rpx] ml-[10rpx]"},{default:u((()=>[h(k(y(C)(e.mobile)),1)])),_:2},1024)])),_:2},1024),p(s,{class:"mt-[16rpx] text-[26rpx] line-feed text-[var(--text-color-light9)] leading-[1.4]"},{default:u((()=>[h(k(e.full_address),1)])),_:2},1024)])),_:2},1032,["onClick"]),p(s,{class:"flex justify-between pt-[26rpx]"},{default:u((()=>[p(s,{class:"flex items-center text-[28rpx] leading-none",onClick:w((e=>(e=>{const a=I.value[e];a.is_default||(a.is_default=1,z(a).then((()=>{I.value.forEach(((a,s)=>{a.is_default&&(a.is_default=0),s==e&&(a.is_default=1)}))})).catch())})(a)),["stop"])},{default:u((()=>[p(l,{class:A(["iconfont !text-[28rpx] mr-[10rpx]",{"iconduigou text-primary":e.is_default,iconcheckbox_nol:!e.is_default}])},null,8,["class"]),h(" 设为默认 ")])),_:2},1032,["onClick"]),p(s,{class:"flex"},{default:u((()=>[p(s,{class:"text-[28rpx]",onClick:w((a=>{return s=e.id,void q({url:"/app/pages/member/address_edit",param:{id:s,source:R.value}});var s}),["stop"])},{default:u((()=>[p(l,{class:"nc-iconfont nc-icon-xiugaiV6xx shrink-0 text-[28rpx] mr-[4rpx]"}),h("编辑")])),_:2},1032,["onClick"]),p(s,{onClick:w((e=>(e=>{const a=I.value[e];V(a.id).then((()=>{I.value.splice(e,1)})).catch()})(a)),["stop"]),class:"ml-[40rpx] text-[28rpx]"},{default:u((()=>[p(l,{class:"nc-iconfont nc-icon-shanchu-yuangaizhiV6xx shrink-0 text-[28rpx] mr-[4rpx]"}),h("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1})):o("",!0),p(s,{class:"w-full footer"},{default:u((()=>[p(s,{class:"py-[var(--top-m)] px-[var(--sidebar-m)] footer w-full fixed bottom-0 left-0 right-0 box-border"},{default:u((()=>[p(r,{"hover-class":"none",class:"primary-btn-bg text-[#fff] h-[80rpx] leading-[80rpx] rounded-[100rpx] text-[26rpx] font-500",onClick:T},{default:u((()=>[h(k(y(c)("createAddress")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["style"]))}}}),[["__scopeId","data-v-ab1f10c2"]]);export{H as default};
