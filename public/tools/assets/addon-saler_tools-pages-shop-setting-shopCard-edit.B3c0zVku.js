import{d as e,W as a,s as t,r as l,ac as o,H as r,x as s,a5 as i,f as d,w as u,n as p,u as m,a6 as n,c9 as f,ca as c,i as _,b,D as h,e as y,Y as x,Z as w,l as g,$ as k,a4 as V,o as v,c as j,h as z,p as S,t as B,K as C,C as W,_ as q}from"./index-DlbBJ3bC.js";import{s as F}from"./index.COs-0cDI.js";import{_ as U}from"./index.vue_vue_type_script_setup_true_lang.BZegFM-D.js";import{a as R,b as I,e as P}from"./setting.ZQ_svkG8.js";import"./auth.BQpGjoDu.js";/* empty css                                                              */import"./index.DK0m-eAv.js";const A=q(e({__name:"edit",setup(e){const q=a({contact_id:null,type:"",form:{work_name:"",by_uid:null,weacht:"",whats_up:""},rules:{by_uid:{type:"number",required:!0,message:t("select.principal"),trigger:["blur","change"]},work_name:{type:"string",required:!0,message:t("input.work_name.tips"),trigger:["blur","change"]},weacht:{type:"string",required:!1,message:t("input.weacht.tips"),trigger:["blur"]},whats_up:{type:"string",required:!1,message:t("input.whats_up.tips"),trigger:["blur"]}},formRef:null,isFormValid:!1}),A=l(),D=l(!1),H=()=>{A.value.open(),D.value=!0};o((()=>{q.form.by_uid,q.form.work_name,q.form.weacht,q.form.whats_up}),(()=>{q.form.by_uid&&q.form.work_name&&q.form.weacht||q.form.by_uid&&q.form.work_name&&q.form.whats_up?q.isFormValid=!0:q.isFormValid=!1}),{deep:!0});const K=()=>{f({title:t("loading")}),R(q.contact_id).then((({data:e})=>{q.form=e})).finally((()=>{c()}))};return r((e=>{q.type=e.type,"edit"==e.type&&(q.contact_id=e.contact_id,K())})),s((()=>{"edit"==q.type&&K()})),(e,a)=>{const l=b(y("up-navbar"),h),o=b(y("up-input"),x),r=b(y("up-form-item"),w),s=_,f=b(y("up-icon"),g),c=b(y("up-form"),k),R=b(y("up-button"),V);return v(),i(n,null,[d(s,{style:p(e.themeColor()),class:"main-fix-footer-safe"},{default:u((()=>[d(l,{title:"add"==q.type?m(t)("add.contact"):m(t)("edit.contact"),autoBack:!0,safeAreaInsetTop:!0,placeholder:!0},null,8,["title"]),d(s,{class:"flex flex-col text-sm text-[var(--theme-color-main)] p-3 bg-[#fff]"},{default:u((()=>[d(c,{labelPosition:"left",model:q.form,rules:q.rules,ref:"state.formRef"},{default:u((()=>[d(r,{label:m(t)("form.work_name"),prop:"work_name",borderBottom:"",ref:"item1",labelWidth:"80px",labelStyle:"font-size: 14px;"},{default:u((()=>[d(o,{clearable:"",modelValue:q.form.work_name,"onUpdate:modelValue":a[0]||(a[0]=e=>q.form.work_name=e),placeholder:m(t)("input.work_name.tips"),fontSize:"14px",border:"",class:"custom-border"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),d(r,{label:m(t)("form.principal"),prop:"by_uid",borderBottom:"",ref:"item1",labelWidth:"80px",onClick:H,labelStyle:"font-size: 14px;"},{default:u((()=>[q.form.by_uid?(v(),j(s,{key:1,class:"custom-border flex justify-between items-center w-full"},{default:u((()=>[d(s,{class:"flex-1"},{default:u((()=>[d(U,{uid:q.form.by_uid},null,8,["uid"])])),_:1}),d(f,{name:"arrow-down"})])),_:1})):(v(),j(s,{key:0,class:"custom-border flex justify-between items-center w-full text-[var(--theme-input-placeholder)] py-[6px] px-[9px]"},{default:u((()=>[d(s,{class:"flex-1"},{default:u((()=>[S(B(m(t)("select.principal")),1)])),_:1}),d(f,{name:"arrow-down"})])),_:1}))])),_:1},8,["label"]),D.value&&!q.form.by_uid?(v(),j(s,{key:0,class:"text-[12px] leading-[12px] text-[#f56c6c] ml-[80px]"},{default:u((()=>[S(B(m(t)("select.principal")),1)])),_:1})):z("",!0),d(r,{label:m(t)("form.weacht"),prop:"weacht",borderBottom:"",ref:"item1",labelWidth:"80px",labelStyle:"font-size: 14px;"},{default:u((()=>[d(o,{clearable:"",modelValue:q.form.weacht,"onUpdate:modelValue":a[1]||(a[1]=e=>q.form.weacht=e),placeholder:m(t)("input.weacht.tips"),fontSize:"14px",border:"",class:"custom-border"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),d(r,{label:m(t)("form.whats_up"),prop:"whats_up",borderBottom:"",ref:"item1",labelWidth:"80px",labelStyle:"font-size: 14px;"},{default:u((()=>[d(o,{clearable:"",modelValue:q.form.whats_up,"onUpdate:modelValue":a[2]||(a[2]=e=>q.form.whats_up=e),placeholder:m(t)("input.whats_up.tips"),fontSize:"14px",border:"",class:"custom-border"},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model","rules"])])),_:1}),d(s,{class:"main-fix-footer"},{default:u((()=>[d(R,{text:"add"==q.type?m(t)("add"):m(t)("save"),onClick:a[3]||(a[3]=e=>(()=>{let e;e="add"==q.type?I:P,e({contact_id:q.contact_id,...q.form}).then((()=>{C({title:t("success"),icon:"none"}),W({url:"/addon/saler_tools/pages/shop/setting/shopCard/index"})}))})()),disabled:!q.isFormValid,color:"var(--theme-color-primary)"},null,8,["text","disabled"])])),_:1})])),_:1},8,["style"]),d(F,{ref_key:"selectPrincipalRef",ref:A,sub:m(t)("select.appraiser_name"),modelValue:q.form.by_uid,"onUpdate:modelValue":a[4]||(a[4]=e=>q.form.by_uid=e)},null,8,["sub","modelValue"])],64)}}}),[["__scopeId","data-v-039f1f32"]]);export{A as default};
