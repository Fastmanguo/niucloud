import{d as e,W as a,s,cq as t,G as l,E as o,r,H as c,a5 as i,f as n,w as f,n as u,a6 as d,i as m,b as p,D as _,e as x,cg as h,bz as g,l as v,a4 as y,o as b,u as w,a as k,p as j,t as V,M as C,c9 as P,ak as z,ca as S,K as I,c4 as U}from"./index-DlbBJ3bC.js";import{c as q}from"./index.DK0m-eAv.js";import{_ as D}from"./index.vue_vue_type_script_setup_true_lang.Ds2EKSiR.js";/* empty css                                                              */import{d as F}from"./common.1SKFK1N4.js";import{c as T}from"./shareShop.D2zOj6IU.js";const W=e({__name:"shop",setup(e){const W=a({shareParams:{price_config:["price"],isCheckSale:1,isShowDetail:0,class_ids:[],share_type:"shop"},dict:{share_price:[{name:"total_cost",value:"total_cost",sort:0,memo:s("total_cost")},{name:"peer_price",value:"peer_price",sort:0,memo:s("peer_price")},{name:"agent_price",value:"agent_price",sort:0,memo:s("agent_price")},{name:"price",value:"price",sort:0,memo:s("price")}]}}),A=t(),B=e=>{},E=l(),G=o({get:()=>{var e;return null==(e=E.siteInfo)?void 0:e.share_poster},set:e=>{E.setSharePoster(e)}}),H=r();let K=!1;const M=e=>{let a=C(F);const t=l();t.siteInfo.share_poster&&(a=t.siteInfo.share_poster),P({title:s("loading")}),K=!0;let o=z(W.shareParams);o.share_cover=a,T({platform:e,share_params:o}).then((({data:e})=>{setTimeout((()=>{K&&(S(),K=!1)}),3e3),R(e)}))},R=e=>{switch(e.type){case"system":uni.shareWithSystem({complete:function(){S()},...e.share_result});break;case"copy":U(e.share_result.link);break;default:uni.share({success:function(e){},fail:function(e){console.log(e),I({title:s("error"),icon:"none"})},complete:function(){S()},...e.share_result})}};return c((()=>{loadPage()})),(e,a)=>{const t=m,l=p(x("up-navbar"),_),o=p(x("up-line"),h),r=p(x("up-switch"),g),c=p(x("up-icon"),v),C=p(x("up-button"),y);return b(),i(d,null,[n(t,{style:u(e.themeColor()),class:"bg-[#fff]"},{default:f((()=>[n(l,{title:w(s)("store_sharing"),autoBack:!0,safeAreaInsetTop:!0,placeholder:!0},{right:f((()=>[n(t,{onClick:a[0]||(a[0]=e=>w(k)({url:"/addon/saler_tools/pages/base/share/lists"})),class:"text-[var(--theme-color-primary)]"},{default:f((()=>[j(V(w(s)("share_log")),1)])),_:1})])),_:1},8,["title"]),n(t,{class:"text-[var(--theme-color-main)]"},{default:f((()=>[n(t,{class:"px-3 py-2 flex flex-col"},{default:f((()=>[n(t,{class:"leading-6"},{default:f((()=>[j(V(w(s)("goods_category")),1)])),_:1}),n(t,{class:"grid grid-cols-3 my-2 gap-[10px]"},{default:f((()=>[n(q,{modelValue:W.shareParams.class_ids,"onUpdate:modelValue":a[1]||(a[1]=e=>W.shareParams.class_ids=e),data:w(A),onChange:B,props:{label:"category_name",value:"category_id"}},null,8,["modelValue","data"])])),_:1})])),_:1}),n(o),n(t,{class:"px-3 py-2 bg-[#fff] flex justify-between items-center"},{default:f((()=>[n(t,{class:"leading-6"},{default:f((()=>[j(V(w(s)("store_sharing.tips1")),1)])),_:1}),n(t,{class:"text-[var(--theme-color-tips)]"},{default:f((()=>[n(r,{modelValue:W.shareParams.is_all_goods,"onUpdate:modelValue":a[2]||(a[2]=e=>W.shareParams.is_all_goods=e),onChange:a[3]||(a[3]=()=>{}),activeColor:"var(--theme-color-primary)",activeValue:1,inactiveValue:0},null,8,["modelValue"])])),_:1})])),_:1}),n(o),n(t,{class:"px-3 py-2 flex flex-col"},{default:f((()=>[n(t,{class:"leading-6 flex"},{default:f((()=>[n(t,{class:""},{default:f((()=>[j(V(w(s)("prices_shown_sharing")),1)])),_:1}),n(t,{class:"text-[var(--theme-color-tips)]"},{default:f((()=>[j(" （ "+V(w(s)("multiple_choice"))+" ） ",1)])),_:1})])),_:1}),n(t,{class:"grid grid-cols-2 my-2 gap-[10px]"},{default:f((()=>[n(q,{modelValue:W.shareParams.price_config,"onUpdate:modelValue":a[4]||(a[4]=e=>W.shareParams.price_config=e),data:W.dict.share_price,props:{label:"name",value:"value"},format:e=>w(s)(e)},null,8,["modelValue","data","format"])])),_:1})])),_:1}),n(o),n(t,{class:"px-3 py-2 flex flex-col"},{default:f((()=>[n(t,{class:"flex my-1"},{default:f((()=>[n(t,{class:""},{default:f((()=>[j(V(w(s)("set_applet_cover")),1)])),_:1}),n(t,{class:"text-[var(--theme-color-tips)]"},{default:f((()=>[j(" （"+V(w(s)("share_img.tips3"))+"） ",1)])),_:1})])),_:1}),n(t,{class:"flex justify-between p-2"},{default:f((()=>[n(t,{class:"flex justify-between rounded"},{default:f((()=>[n(D,{ref_key:"updateFileRef",ref:H,width:"150px",height:"120px","icon-size":"30",max:1,modelValue:G.value,"onUpdate:modelValue":a[5]||(a[5]=e=>G.value=e),edit:!1,"value-type":"string","result-type":"string"},{default:f((()=>[n(t,{class:"flex flex-col justify-center items-center bg-[#f4f5f7] w-[150px] h-[120px] rounded"},{default:f((()=>[n(c,{size:"45",name:"camera-fill",color:"var(--theme-color-primary)"}),n(t,{class:"text-[#999] text-[12px] mt-[2px]"},{default:f((()=>[j(V(w(s)("share_img")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),n(t,{class:"flex flex-col justify-between leading-5 items-center h-[120px] pl-3 w-full text-[var(--theme-color-content)] text-[12px]"},{default:f((()=>[n(t,{class:"flex items-center flex-col"},{default:f((()=>[n(t,null,{default:f((()=>[j(V(w(s)("share_img.tips0")),1)])),_:1}),n(t,null,{default:f((()=>[j(V(w(s)("share_img.tips1")),1)])),_:1})])),_:1}),n(t,{class:"flex flex-col items-center text-[var(--theme-color-tips)] text-xs"},{default:f((()=>[n(t,{class:"w-160px my-1"},{default:f((()=>[n(C,{text:w(s)("input.share_img"),size:"small",color:"var(--theme-color-primary)",shape:"circle",onClick:a[6]||(a[6]=e=>H.value.chooseFile())},null,8,["text"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["style"]),n(t,{class:"main-fix-footer bg-[#fff] z-100",style:{"box-shadow":"var(--theme-box-shadow)"}},{default:f((()=>[n(t,{class:"grid grid-cols-4 gap-2"},{default:f((()=>[n(t,{class:"flex flex-col items-center",onClick:a[7]||(a[7]=e=>M("wechat"))},{default:f((()=>[n(t,{class:"flex items-center justify-center rounded-full mb-1 bg-[#07c062] p-[8px]"},{default:f((()=>[n(c,{name:"weixin-fill",size:"30px",color:"#fff"})])),_:1}),n(t,{class:"text-xs text-[var(--theme-color-content)]"},{default:f((()=>[j(V(w(s)("wechat_friend")),1)])),_:1})])),_:1}),n(t,{class:"flex flex-col items-center",onClick:a[8]||(a[8]=e=>M("facebook"))},{default:f((()=>[n(t,{class:"flex items-center justify-center rounded-full mb-1 bg-[var(--theme-bg)] p-[8px]"},{default:f((()=>[n(c,{name:"facebook",size:"30px",color:"var(--theme-color-content)"})])),_:1}),n(t,{class:"text-xs text-[var(--theme-color-content)]"},{default:f((()=>[j(V(w(s)("facebook")),1)])),_:1})])),_:1}),n(t,{class:"flex flex-col items-center",onClick:a[9]||(a[9]=e=>M("link"))},{default:f((()=>[n(t,{class:"flex items-center justify-center rounded-full mb-1 bg-[var(--theme-bg)] p-[8px]"},{default:f((()=>[n(c,{name:"share-square",size:"30px",color:"var(--theme-color-content)"})])),_:1}),n(t,{class:"text-xs text-[var(--theme-color-content)]"},{default:f((()=>[j(V(w(s)("goods_link")),1)])),_:1})])),_:1})])),_:1})])),_:1})],64)}}});export{W as default};
