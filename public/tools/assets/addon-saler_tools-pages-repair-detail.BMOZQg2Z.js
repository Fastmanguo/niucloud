import{d as e,W as t,r as a,bN as l,H as s,a5 as c,f as o,w as r,n as d,a6 as i,C as n,i as f,b as u,aZ as m,e as _,l as x,cr as p,D as h,bP as y,bO as v,m as b,a4 as g,cg as w,ch as k,Y as j,o as C,g as V,h as z,c as U,u as q,s as A,p as I,t as M,v as P,cF as W,at as B,a7 as D,q as F,M as G,a as H,K,_ as N}from"./index-DlbBJ3bC.js";import{b as O,o as S}from"./service.CO0k3-RB.js";import{_ as T}from"./index.vue_vue_type_script_setup_true_lang.Ds2EKSiR.js";const Y=N(e({__name:"detail",setup(e){const N=t({data:[],service_id:0,loading:!0,status:"progress"}),Y=a(0),Z=a(!1),$=()=>{K({title:A("no_copy"),icon:"none",type:"default"})},E=a(!1),J=(l().windowWidth-81)/5,L=()=>{O(N.service_id).then((e=>{N.data=e.data,N.status=e.data.status,N.loading=!1})).catch((e=>{n({url:"/addon/saler_tools/pages/repair/lists"})}))},Q=t({show:!1,edit:{cancel_remark:""}}),R=()=>{S({service_id:N.data.service_id,status:"cancel",cancel_remark:Q.edit.cancel_remark}).then((e=>{K({title:A("success"),icon:"none"}),Q.show=!1,L()})).catch((e=>{K({title:A("error"),icon:"none"})}))},X=t({show:!1,edit:{money:"",cost:"",paid_receipt:[]}}),ee=()=>{S({service_id:N.data.service_id,status:"finish",money:X.edit.money,cost:X.edit.cost,paid_receipt:X.edit.paid_receipt}).then((e=>{K({title:A("success"),icon:"none"}),X.show=!1,L()})).catch((e=>{K({title:A("error"),icon:"none"})}))};return s((e=>{e.service_id&&(N.service_id=e.service_id),L()})),(e,t)=>{const a=u(_("up-icon"),x),l=f,s=u(_("up-overlay"),p),n=u(_("up-navbar"),h),K=u(_("up-swiper"),y),O=u(_("up-copy"),v),S=F,L=u(_("up-image"),b),te=u(_("up-button"),g),ae=u(_("up-line"),w),le=u(_("up-textarea"),k),se=u(_("up-popup"),m),ce=u(_("up-input"),j);return C(),c(i,null,[o(l,{style:d(e.themeColor())},{default:r((()=>[o(n,{title:q(A)("maintenance_receipt_details"),autoBack:!0,safeAreaInsetTop:!0,placeholder:!0},{right:r((()=>[o(l,{class:"u-nav-slot"},{default:r((()=>[o(a,{name:"more-dot-fill",bold:"",size:"16",class:"mr-1",onClick:t[0]||(t[0]=e=>E.value=!0),color:"var(--theme-color-main)"}),o(s,{show:E.value,onClick:t[1]||(t[1]=e=>E.value=!1)},{default:r((()=>[V(o(l,{class:"custom-option !absolute"},{default:r((()=>[o(l,{class:"flex flex-col items-center"},{default:r((()=>[o(l,{class:"custom-option-item"},{default:r((()=>[I(M(q(A)("share")),1)])),_:1})])),_:1})])),_:1},512),[[P,E.value]])])),_:1},8,["show"])])),_:1})])),_:1},8,["title"]),N.data.goods_image?V((C(),U(K,{key:0,list:q(W)(N.data.goods_image),onClick:t[2]||(t[2]=()=>{}),class:"mb-2",height:"300px",autoplay:!1,radius:"0",indicator:!0,circular:!0,bgColor:"#fff",onChange:t[3]||(t[3]=e=>Y.value=e.current),indicatorActiveColor:"#fff",indicatorMode:"dot"},{indicator:r((()=>[o(l,{class:"indicator"},{default:r((()=>[(C(!0),c(i,null,B(N.data.goods_image,((e,t)=>(C(),U(l,{class:D(["indicator__dot",[t===Y.value&&"indicator__dot--active"]]),key:t},null,8,["class"])))),128))])),_:1})])),_:1},8,["list"])),[[P,!e.showGrid]]):z("",!0),o(l,{class:"flex flex-col bg-[#fff] m-2 p-3 rounded box-border"},{default:r((()=>[o(l,{class:"flex w-full justify-around items-center text-base my-3 font-bold"},{default:r((()=>[o(l,{class:D(Z.value?"text-[var(--theme-color-main)]":"text-[var(--theme-color-tips)]"),onClick:t[4]||(t[4]=e=>Z.value=!0)},{default:r((()=>[I(M(q(A)("maintenance_details")),1)])),_:1},8,["class"]),o(l,{class:D(Z.value?"text-[var(--theme-color-tips)]":"text-[var(--theme-color-main)]"),onClick:t[5]||(t[5]=e=>Z.value=!1)},{default:r((()=>[I(M(q(A)("extended_info")),1)])),_:1},8,["class"])])),_:1}),V(o(l,{class:"p-1 text-sm"},{default:r((()=>[o(l,{class:"flex justify-between items-center"},{default:r((()=>[o(l,{class:"text-[var(--theme-color-content)]"},{default:r((()=>[I(M(q(A)("form.goods_name")),1)])),_:1}),N.data.goods_name?(C(),U(O,{key:0,content:N.data.goods_name},{default:r((()=>[o(l,{class:"text-[var(--theme-color-primary)] text-xs"},{default:r((()=>[I(M(q(A)("copy")),1)])),_:1})])),_:1},8,["content"])):(C(),U(l,{key:1,onClick:$,class:"text-[var(--theme-color-primary)] text-xs"},{default:r((()=>[I(M(q(A)("copy")),1)])),_:1}))])),_:1}),o(l,{class:"p-3 bg-[var(--theme-upload-bg)] my-2 rounded w-full box-border"},{default:r((()=>[I(M(N.data.goods_name),1)])),_:1}),o(l,{class:"flex justify-between items-center mt-5 my-3"},{default:r((()=>[o(l,{class:"text-[var(--theme-color-content)]"},{default:r((()=>[I(M(q(A)("goods_code")),1)])),_:1}),o(l,{class:"text-[var(--theme-color-tips)]"},{default:r((()=>[I(M(N.data.goods_code?N.data.goods_code:q(A)("not_filled")),1)])),_:1})])),_:1}),o(l,{class:"flex justify-between items-center mt-3"},{default:r((()=>[o(l,{class:"text-[var(--theme-color-content)]"},{default:r((()=>[I(M(q(A)("service_type")),1)])),_:1}),o(l,{class:"text-[var(--theme-color-tips)]"},{default:r((()=>[I(M(N.data.service_type?N.data.service_type:q(A)("not_filled")),1)])),_:1})])),_:1}),o(l,{class:"flex justify-between items-center mt-3"},{default:r((()=>[o(l,{class:"text-[var(--theme-color-content)]"},{default:r((()=>[I(M(q(A)("estimated_charge")),1)])),_:1}),o(l,{class:"text-[var(--theme-color-tips)]"},{default:r((()=>[o(S,null,{default:r((()=>[I("￥")])),_:1}),o(S,null,{default:r((()=>[I(M(N.data.expect_money?N.data.expect_money:0),1)])),_:1})])),_:1})])),_:1})])),_:1},512),[[P,Z.value]]),V(o(l,{class:"p-1 text-sm box-border"},{default:r((()=>[o(l,{class:"flex justify-between items-center mt-3"},{default:r((()=>[o(l,null,{default:r((()=>[I(M(q(A)("actual_cost")),1)])),_:1}),o(l,{class:"flex items-center text-[var(--theme-color-tips)]"},{default:r((()=>[o(S,null,{default:r((()=>[I("￥")])),_:1}),o(S,null,{default:r((()=>[I(M(N.data.cost?N.data.cost:0),1)])),_:1})])),_:1})])),_:1}),o(l,{class:"flex justify-between items-center mt-3"},{default:r((()=>[o(l,null,{default:r((()=>[I(M(q(A)("actual_charge")),1)])),_:1}),o(l,{class:"flex items-center text-[var(--theme-color-tips)]"},{default:r((()=>[o(S,null,{default:r((()=>[I("￥")])),_:1}),o(S,null,{default:r((()=>[I(M(N.data.money?N.data.money:0),1)])),_:1})])),_:1})])),_:1}),o(l,{class:"flex flex-col items-start mt-3"},{default:r((()=>[o(l,{class:"flex justify-between items-center w-full"},{default:r((()=>[o(l,null,{default:r((()=>[I(M(q(A)("form.receipt_voucher")),1)])),_:1}),o(l,{class:"text-[var(--theme-color-tips)]"},{default:r((()=>[I(M(N.data.paid_receipt?"":q(A)("nothing")),1)])),_:1})])),_:1}),N.data.paid_receipt?(C(),U(l,{key:0,class:"grid grid-cols-5 gap-2 my-2"},{default:r((()=>[o(L,{"show-loading":!0,src:q(G)(N.data.paid_receipt),width:J,height:J,radius:"5"},null,8,["src"])])),_:1})):z("",!0)])),_:1}),o(l,{class:"flex justify-between items-center mt-3"},{default:r((()=>[o(l,null,{default:r((()=>[I(M(q(A)("service_personnel")),1)])),_:1}),o(l,{class:"flex items-center text-[var(--theme-color-tips)]"},{default:r((()=>[I(M(N.data.service_name),1)])),_:1})])),_:1}),o(l,{class:"flex justify-between items-center mt-3"},{default:r((()=>[o(l,null,{default:r((()=>[I(M(q(A)("order_taker")),1)])),_:1}),o(l,{class:"flex items-center text-[var(--theme-color-tips)]"},{default:r((()=>[I(M(N.data.sales_name),1)])),_:1})])),_:1}),o(l,{class:"flex justify-between items-center mt-3"},{default:r((()=>[o(l,null,{default:r((()=>[I(M(q(A)("estimated_service_cost")),1)])),_:1}),o(l,{class:"flex items-center text-[var(--theme-color-tips)]"},{default:r((()=>[o(S,null,{default:r((()=>[I("￥")])),_:1}),o(S,null,{default:r((()=>[I(M(N.data.expect_cost?N.data.expect_cost:0),1)])),_:1})])),_:1})])),_:1}),o(l,{class:"flex justify-between items-center mt-3"},{default:r((()=>[o(l,null,{default:r((()=>[I(M(q(A)("creation_time")),1)])),_:1}),o(l,{class:"flex items-center text-[var(--theme-color-tips)]"},{default:r((()=>[I(M(N.data.create_time),1)])),_:1})])),_:1}),o(l,{class:"flex justify-between items-center mt-3"},{default:r((()=>[o(l,null,{default:r((()=>[I(M(q(A)("creator")),1)])),_:1}),o(l,{class:"flex items-center text-[var(--theme-color-tips)]"},{default:r((()=>[I(M(N.data.create_name),1)])),_:1})])),_:1}),o(l,{class:"flex flex-col items-start mt-3"},{default:r((()=>[o(l,{class:"flex justify-between items-center w-full"},{default:r((()=>[o(l,null,{default:r((()=>[I(M(q(A)("form.remark")),1)])),_:1}),N.data.remark?(C(),U(O,{key:0,content:N.data.remark},{default:r((()=>[o(l,{class:"text-[var(--theme-color-primary)] text-xs"},{default:r((()=>[I(M(q(A)("copy")),1)])),_:1})])),_:1},8,["content"])):(C(),U(l,{key:1,onClick:$,class:"text-[var(--theme-color-primary)] text-xs"},{default:r((()=>[I(M(q(A)("copy")),1)])),_:1}))])),_:1}),o(l,{class:"p-3 text-[var(--theme-color-tips)] bg-[var(--theme-upload-bg)] my-2 rounded w-full box-border"},{default:r((()=>[I(M(N.data.remark?N.data.remark:q(A)("nothing")),1)])),_:1})])),_:1}),o(l,{class:"flex flex-col items-start mt-3"},{default:r((()=>[o(l,{class:"flex justify-between items-center w-full"},{default:r((()=>[o(l,null,{default:r((()=>[I(M(q(A)("customer_info")),1)])),_:1}),N.data.address_info?(C(),U(O,{key:0,content:N.data.address_info},{default:r((()=>[o(l,{class:"text-[var(--theme-color-primary)] text-xs"},{default:r((()=>[I("复制")])),_:1})])),_:1},8,["content"])):(C(),U(l,{key:1,onClick:$,class:"text-[var(--theme-color-primary)] text-xs"},{default:r((()=>[I(M(q(A)("copy")),1)])),_:1}))])),_:1}),o(l,{class:"p-3 text-[var(--theme-color-tips)] bg-[var(--theme-upload-bg)] my-2 rounded w-full box-border"},{default:r((()=>[I(M(N.data.address_info?N.data.address_info:q(A)("nothing")),1)])),_:1})])),_:1})])),_:1},512),[[P,!Z.value]])])),_:1}),o(l,{class:"main-fix-footer-safe"}),"finish"==N.status?(C(),U(l,{key:1,class:"main-fix-footer"},{default:r((()=>[o(te,{text:q(A)("completed"),class:"!text-[#fff] !bg-[var(--theme-color-primary)] !border-none",disabled:""},null,8,["text"])])),_:1})):z("",!0),"cancel"==N.status?(C(),U(l,{key:2,class:"main-fix-footer"},{default:r((()=>[o(te,{text:q(A)("cancelled"),class:"!text-[#fff] !bg-[var(--theme-color-primary)] !border-none",disabled:""},null,8,["text"])])),_:1})):z("",!0),"progress"==N.status?(C(),U(l,{key:3},{default:r((()=>[o(l,{class:"main-fix-footer z-100 flex justify-between items-center"},{default:r((()=>[o(l,{class:"w-1/2 flex justify-bewteen items-center px-2"},{default:r((()=>[o(l,{class:"flex flex-1 items-center justify-center"},{default:r((()=>[o(a,{name:"/static/assets/order/edit.png",size:"25",labelPos:"bottom",labelSize:"13",label:q(A)("edit"),labelColor:"var(--theme-color-main)",onClick:t[6]||(t[6]=e=>q(H)({url:`/addon/saler_tools/pages/repair/edit?type=edit&service_id=${N.data.service_id}`}))},null,8,["label"])])),_:1}),o(l,{class:"flex flex-1 items-center flex-col"},{default:r((()=>[o(a,{name:"/static/assets/order/add.png",size:"25",style:{transform:"rotate(45deg)"},onClick:t[7]||(t[7]=e=>Q.show=!0)}),o(l,{class:"text-[13px] mt-[3px] text-[var(--theme-color-main)]"},{default:r((()=>[I(M(q(A)("cancel")),1)])),_:1})])),_:1})])),_:1}),o(te,{text:q(A)("complete_service"),color:"var(--theme-color-primary)",class:"!w-1/2",onClick:t[8]||(t[8]=e=>X.show=!0)},null,8,["text"])])),_:1})])),_:1})):z("",!0)])),_:1},8,["style"]),o(se,{show:Q.show,mode:"bottom"},{default:r((()=>[o(l,{class:"p-4 flex justify-between items-center"},{default:r((()=>[o(l),o(l,{class:"flex !text-center font-bold text-[30rpx]"},{default:r((()=>[I(M(q(A)("cancel_order")),1)])),_:1}),o(a,{name:"close",size:"15",onClick:t[9]||(t[9]=e=>Q.show=!1)})])),_:1}),o(ae),o(l,{class:"flex flex-col"},{default:r((()=>[o(l,{class:"p-4 flex flex-col remark-card"},{default:r((()=>[o(l,{class:"flex items-center text-sm"},{default:r((()=>[I(M(q(A)("cancael_reason")),1)])),_:1}),o(l,{class:"my-2 flex flex-col !box-border"},{default:r((()=>[o(le,{modelValue:Q.edit.cancel_remark,"onUpdate:modelValue":t[10]||(t[10]=e=>Q.edit.cancel_remark=e),placeholder:q(A)("input.cancel_order"),type:"number"},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),o(l,{class:"flex gap-3 mb-5 p-4"},{default:r((()=>[o(te,{onClick:t[11]||(t[11]=e=>Q.show=!1),class:"!text-[var(--theme-color-main)]",color:"#f4f5f7",text:q(A)("cancel")},null,8,["text"]),o(te,{text:q(A)("confirm"),onClick:R,color:"var(--theme-color-primary)"},null,8,["text"])])),_:1})])),_:1})])),_:1},8,["show"]),o(se,{show:X.show,mode:"bottom"},{default:r((()=>[o(l,{class:"p-4 flex justify-between items-center"},{default:r((()=>[o(l),o(l,{class:"flex !text-center font-bold text-[30rpx]"},{default:r((()=>[I(M(q(A)("complete_service")),1)])),_:1}),o(a,{name:"close",size:"15",onClick:t[12]||(t[12]=e=>X.show=!1)})])),_:1}),o(ae),o(l,{class:"flex flex-col"},{default:r((()=>[o(l,{class:"p-4 flex flex-col remark-card"},{default:r((()=>[o(l,{class:"flex items-center text-sm"},{default:r((()=>[I(M(q(A)("actual_charge")),1)])),_:1}),o(l,{class:"my-2 flex flex-col !box-border"},{default:r((()=>[o(ce,{modelValue:X.edit.money,"onUpdate:modelValue":t[13]||(t[13]=e=>X.edit.money=e),placeholder:q(A)("input.actual_charge"),type:"number"},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),o(l,{class:"px-4 flex flex-col remark-card"},{default:r((()=>[o(l,{class:"flex items-center text-sm"},{default:r((()=>[I(M(q(A)("actual_cost")),1)])),_:1}),o(l,{class:"my-2 flex flex-col !box-border"},{default:r((()=>[o(ce,{modelValue:X.edit.cost,"onUpdate:modelValue":t[14]||(t[14]=e=>X.edit.cost=e),placeholder:q(A)("input.actual_cost"),type:"number"},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),o(l,{class:"p-4 flex flex-col remark-card"},{default:r((()=>[o(l,{class:"flex items-center text-sm"},{default:r((()=>[I(M(q(A)("form.receipt_voucher")),1)])),_:1}),o(l,{class:"flex mt-2 justify-between"},{default:r((()=>[o(T,{width:"100",height:"100","icon-size":"30",max:9,"value-type":"array","result-type":"array",modelValue:X.edit.paid_receipt,"onUpdate:modelValue":t[15]||(t[15]=e=>X.edit.paid_receipt=e)},{default:r((()=>[o(l,{class:"flex flex-col justify-center items-center bg-[#f4f5f7] w-[100px] h-[100px]"},{default:r((()=>[o(a,{size:"30",name:"camera-fill",color:"var(--theme-color-primary)"}),o(l,{class:"text-[#999] text-[12px]"},{default:r((()=>[I(M(q(A)("add_quality_pictures")),1)])),_:1}),o(l,{class:"text-[#999] text-[12px] mt-[2px]"},{default:r((()=>[I(M(q(A)("more_attractive")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),o(l,{class:"flex gap-3 mb-5 p-4"},{default:r((()=>[o(te,{onClick:t[16]||(t[16]=e=>X.show=!1),class:"!text-[var(--theme-color-main)]",color:"#f4f5f7",text:q(A)("cancel")},null,8,["text"]),o(te,{text:q(A)("confirm"),onClick:ee,color:"var(--theme-color-primary)"},null,8,["text"])])),_:1})])),_:1})])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-a4f83e8a"]]);export{Y as default};
