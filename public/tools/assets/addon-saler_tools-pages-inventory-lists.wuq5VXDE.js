import{d as e,r as t,ac as l,c as o,w as s,b as a,aZ as n,e as r,o as c,f as i,i as u,p as d,t as m,a5 as f,h as p,at as x,a6 as _,m as y,a4 as v,W as h,s as b,x as w,n as g,u as k,ar as C,as as j,ah as z,l as I,D as S,aI as B,cs as U,aM as H,cg as O,q as P,a7 as T,K as q,a as A}from"./index-DlbBJ3bC.js";import{_ as D}from"./mescroll-body.CzShuCTj.js";import{u as M}from"./useMescroll.lU6SPXzn.js";import{d as $,s as K,g as W}from"./Inventory.DjfzdujZ.js";import"./mescroll-empty.lkR5ZfjC.js";const R=e({__name:"bound-popup",props:{show:{type:Boolean,default:!1},title:{type:String,default:"商品入库"},avatar:{type:String},description:{type:String},buttons:{type:Array,default:()=>[]}},emits:["update:show","item-click"],setup(e,{emit:h}){const b=e,w=h,g=t(b.show);l((()=>b.show),(e=>{g.value=e})),l((()=>g.value),(e=>{w("update:show",e)}));const k=()=>{g.value=!1};return(t,l)=>{const h=u,b=a(r("up-image"),y),C=a(r("u-button"),v),j=a(r("up-popup"),n);return c(),o(j,{show:g.value,"onUpdate:show":l[0]||(l[0]=e=>g.value=e),closeOnClickOverlay:!0,class:"z-[1000]",onClose:k},{default:s((()=>[i(h,{class:"pb-[100rpx] p-[30rpx] box-border"},{default:s((()=>[i(h,{class:"font-bold text-[30rpx] text-center"},{default:s((()=>[d(m(e.title),1)])),_:1}),i(h,{class:"flex flex-col items-center justify-center text-[24rpx]"},{default:s((()=>[i(h,{class:"my-[20rpx] flex items-center"},{default:s((()=>[e.avatar?(c(),o(b,{key:0,"show-loading":!0,src:e.avatar,width:"18px",radius:"25%",height:"18px"},null,8,["src"])):p("",!0),e.description?(c(),o(h,{key:1,class:"text-[#909399] ml-[10rpx]"},{default:s((()=>[d(m(e.description),1)])),_:1})):p("",!0)])),_:1}),(c(!0),f(_,null,x(e.buttons,((e,t)=>(c(),o(C,{key:t,class:"w-[100%] my-[10rpx]",color:"#f7f7f7",customStyle:"color:#303133",size:"large",onClick:t=>{w("item-click",e)}},{default:s((()=>[d(m(e.name),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["show"])}}}),Z=e({__name:"lists",setup(e){const l=h({list:[],searchParams:{inventory_status:0},isH5:!1}),y=e=>{switch(e){case"store":return"仓库盘点";case"temp_store":return"临时仓盘点";case"pawned_goods":return"质押商品盘点";case"watch_location":return"商品位置盘点"}},Z=t(!1),E=t(!1),F=h({item:{},type:"",index:0}),G=(e,t,l)=>{F.item=e,F.type=l,F.index=t,E.value=!0},J=h([{name:b("in_progress"),inventory_status:0},{name:b("completed"),inventory_status:1}]),L=e=>{l.searchParams.inventory_status=e.inventory_status,ee().scrollTo(0,300),ee().resetUpScroll()},N=e=>{A({url:`/addon/saler_tools/pages/commodityInventory/check?inventory_id=${e.inventory_id}&status=${e.inventory_status}`})},Q=t(!1),V=e=>{A({url:e.url,param:{type:e.type}}),Q.value=!1};l.isH5=!0;const{mescrollInit:X,downCallback:Y,getMescroll:ee}=M(j,C),te=t(!0),le=e=>{let t={page:e.num,limit:e.size,...l.searchParams};1==e.num&&(l.list=[]),te.value=!0,W(t).then((({data:t})=>{let o=t.data;1==e.num&&(l.list=[]),l.list=l.list.concat(o),e.endBySize(o.length,t.total),te.value=!1}))};return w((()=>{ee().scrollTo(0,300),ee().resetUpScroll()})),(e,t)=>{const h=a(r("up-icon"),I),w=u,C=a(r("up-navbar"),S),j=a(r("up-tabs"),B),A=P,M=a(r("up-sticky"),U),W=a(r("up-divider"),H),ee=a(r("up-button"),v),te=a(r("mescroll-body"),D),oe=a(r("up-line"),O),se=a(r("up-popup"),n),ae=a(r("up-modal"),z);return c(),f(_,null,[i(w,{style:g(e.themeColor())},{default:s((()=>[i(M,{bgColor:"#f3f4f6"},{default:s((()=>[i(C,{title:k(b)("commodity_inventory"),autoBack:!0,safeAreaInsetTop:!0,placeholder:!l.isH5},{center:s((()=>[i(w,null,{default:s((()=>[i(h,{name:"question-circle",label:k(b)("commodity_inventory"),labelPos:"left",onClick:t[0]||(t[0]=e=>Z.value=!0),labelSize:"16",size:"18",color:"var(--theme-color-tips)",labelColor:"var(--theme-color-main)"},null,8,["label"])])),_:1})])),_:1},8,["title","placeholder"]),i(w,{class:"bg-[#fff] py-1"},{default:s((()=>[i(j,{list:J,activeStyle:"color:var(--theme-color-primary);font-size:16px",lineWidth:"30",onChange:L,lineColor:"var(--theme-color-primary)",scrollable:!1,inactiveStyle:"color:var(--theme-color-main);font-size:13px",itemStyle:"padding:0px 5px 3px;z-index:2"},null,8,["list"])])),_:1}),i(w,{class:"break-normal text-amber-500 text-xs bg-[#fefee6] p-[10px]"},{default:s((()=>[i(A,null,{default:s((()=>[d(m(k(b)("commodity_inventory.tip0")),1)])),_:1})])),_:1})])),_:1}),i(te,{ref:"mescrollRef",onInit:k(X),onUp:le,onDown:k(Y),top:"0",class:T(l.isH5?"mt-[44px]":"")},{default:s((()=>[(c(!0),f(_,null,x(l.list,((e,t)=>(c(),o(w,{key:t,class:"flex flex-col bg-[#fff] m-2 rounded box-border text-[var(--theme-color-main)] text-xs leading-6 relative pb-2"},{default:s((()=>[i(w,{onClick:t=>N(e)},{default:s((()=>[i(w,{class:"pr-3 my-3 text-xs flex justify-between items-center box-border"},{default:s((()=>[i(w,{class:T(["px-3 py-1 bg-[var(--theme-text-blue)] text-[#fff] rounded-r","store"==e.inventory_type?"bg-[varvar(--theme-text-blue)]":"temp_store"==e.inventory_type?"bg-[#10b981]":"pawned_goods"==e.inventory_type?"bg-[#6d28d9]":"bg-[#fbbf24]"])},{default:s((()=>[d(m(y(e.inventory_type)),1)])),_:2},1032,["class"]),i(w,{class:"flex justify-start items-center text-[var(--theme-color-content)]"},{default:s((()=>[i(w,null,{default:s((()=>[d(m(k(b)("inventory_code"))+" ："+m(e.inventory_id),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(w,{class:"px-3 text-sm"},{default:s((()=>[d(m(e.inventory_name),1)])),_:2},1024),i(w,{class:"flex justify-between items-center my-2 text-sm"},{default:s((()=>[i(w,{class:"w-1/4 flex flex-col items-center"},{default:s((()=>[i(w,{class:"text-[var(--theme-color-main)] text-sm"},{default:s((()=>[d(m(e.shouldBeCounted||0),1)])),_:2},1024),i(w,{class:"text-[var(--theme-color-content)] text-xs"},{default:s((()=>[d(m(k(b)("requested_goods")),1)])),_:1})])),_:2},1024),i(w,{class:"w-1/4 flex flex-col items-center"},{default:s((()=>[i(w,{class:"text-[var(--theme-color-main)] text-sm"},{default:s((()=>[d(m(e.haveBeenCounted||0),1)])),_:2},1024),i(w,{class:"text-[var(--theme-color-content)] text-xs"},{default:s((()=>[d(m(k(b)("ordered_goods")),1)])),_:1})])),_:2},1024),i(w,{class:"w-1/4 flex flex-col items-center"},{default:s((()=>[i(w,{class:"text-[var(--theme-color-main)] text-sm"},{default:s((()=>[d(m(e.exist||0),1)])),_:2},1024),i(w,{class:"text-[var(--theme-color-content)] text-xs"},{default:s((()=>[d(m(k(b)("existing_goods")),1)])),_:1})])),_:2},1024),i(w,{class:"w-1/4 flex flex-col items-center"},{default:s((()=>[i(w,{class:"text-[var(--theme-color-main)] text-sm"},{default:s((()=>[d(m(e.miss||0),1)])),_:2},1024),i(w,{class:"text-[var(--theme-color-content)] text-xs"},{default:s((()=>[d(m(k(b)("missing_goods")),1)])),_:1})])),_:2},1024)])),_:2},1024),i(w,{class:"px-3 mb-1 text-[var(--theme-color-content)]",onClick:t=>N(e)},{default:s((()=>[d(m(k(b)("inventory_checker"))+" ："+m(e.founder||"-"),1)])),_:2},1032,["onClick"]),i(w,{class:"px-3 text-[var(--theme-color-content)]"},{default:s((()=>[d(m(k(b)("founder"))+" ："+m(e.founder||"-"),1)])),_:2},1024)])),_:2},1032,["onClick"]),i(W,{class:"!p-0 !my-2",hairline:!0}),i(w,{class:"px-3 text-[var(--theme-color-content)] flex justify-between items-center"},{default:s((()=>[d(m(k(b)("creation_time"))+" ："+m(e.time||"-")+" ",1),i(w,{class:"flex justify-end items-center"},{default:s((()=>[i(ee,{text:k(b)("delete"),color:"var(--theme-text-red)",size:"small",onClick:l=>G(e,t,"delete")},null,8,["text","onClick"]),0==e.inventory_status?(c(),o(ee,{key:0,text:k(b)("complete"),color:"var(--theme-color-primary)",size:"small",class:"ml-2",onClick:l=>G(e,t,"complete")},null,8,["text","onClick"])):p("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["onInit","onDown","class"]),i(w,{class:"main-fix-footer-safe"}),i(w,{class:"main-fix-footer"},{default:s((()=>[i(ee,{text:k(b)("create_inventory"),class:"!text-[#fff] !bg-[var(--theme-color-primary)] !border-none",onClick:t[1]||(t[1]=e=>Q.value=!0)},null,8,["text"])])),_:1})])),_:1},8,["style"]),i(se,{show:Z.value,mode:"bottom",onClose:t[3]||(t[3]=e=>Z.value=!1),onOpen:t[4]||(t[4]=e=>Z.value=!0)},{default:s((()=>[i(w,{class:"p-4 flex justify-between items-center"},{default:s((()=>[i(w),i(w,{class:"flex !text-center font-bold text-[30rpx]"},{default:s((()=>[d(m(k(b)("commodity_inventory")),1)])),_:1}),i(h,{name:"close",size:"15",onClick:t[2]||(t[2]=e=>Z.value=!1)})])),_:1}),i(oe),i(w,{class:"p-4 flex flex-col"},{default:s((()=>[i(w,null,{default:s((()=>[d(m(k(b)("commodity_inventory.top0")),1)])),_:1}),(c(),f(_,null,x(5,(e=>i(w,{style:{"text-indent":"1em"}},{default:s((()=>[d(m(k(b)(`commodity_inventory.top${e}`)),1)])),_:2},1024))),64))])),_:1})])),_:1},8,["show"]),i(ae,{show:E.value,"onUpdate:show":t[7]||(t[7]=e=>E.value=e),width:300,showConfirmButton:!1,contentTextAlign:"center"},{confirmButton:s((()=>[i(w,{class:"flex gap-3"},{default:s((()=>[i(ee,{onClick:t[5]||(t[5]=e=>E.value=!1),class:"!text-[#303133]",color:"#f4f5f7",text:k(b)("cancel")},null,8,["text"]),i(ee,{text:k(b)("OK"),onClick:t[6]||(t[6]=e=>(("delete"===F.type?$:K)(F.item.inventory_id).then((e=>{q({title:b("success"),icon:"none"}),l.list.splice(F.index,1)})),void(E.value=!1))),color:"#e0b87a"},null,8,["text"])])),_:1})])),default:s((()=>[i(w,{class:"!box-border w-full text-[var(--theme-color-main)] text-center"},{default:s((()=>[i(A,null,{default:s((()=>[d(m("delete"==F.type?k(b)("you_will_delete"):k(b)("you_will_complete")),1)])),_:1}),i(A,null,{default:s((()=>[d("【"+m(F.item.inventory_name)+"】",1)])),_:1})])),_:1})])),_:1},8,["show"]),i(R,{show:Q.value,title:k(b)("select_inventory_type"),buttons:[{name:k(b)("inventory_store"),url:"/addon/saler_tools/pages/commodityInventory/select",type:"store"},{name:k(b)("inventory_temp_store"),url:"/addon/saler_tools/pages/commodityInventory/select",type:"temp_store"},{name:k(b)("inventory_pawned_goods"),url:"/addon/saler_tools/pages/commodityInventory/select",type:"pawned_goods"},{name:k(b)("inventory_watch_location"),url:"/addon/saler_tools/pages/commodityInventory/select",type:"watch_location"}],"onUpdate:show":t[8]||(t[8]=e=>Q.value=e),onItemClick:V},null,8,["show","title","buttons"])],64)}}});export{Z as default};
