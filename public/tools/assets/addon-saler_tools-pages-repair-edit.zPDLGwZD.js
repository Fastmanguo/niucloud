import{d as e,W as t,ac as l,r as a,x as s,H as o,c9 as r,s as d,ca as c,a5 as i,f as n,w as u,n as m,u as f,a6 as p,cd as _,i as x,b as h,aZ as v,e as y,D as g,l as b,Y as V,aK as k,ch as w,a4 as j,cg as z,o as C,c as U,h as S,q as A,p as T,t as K,at as q,a7 as I,a as N,au as R,K as B,_ as D}from"./index-DlbBJ3bC.js";import{_ as F}from"./index.vue_vue_type_script_setup_true_lang.BZegFM-D.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang.Ds2EKSiR.js";import{s as O}from"./index.COs-0cDI.js";import{c as W}from"./index.DK0m-eAv.js";import{b as Y,e as Z,c as E}from"./service.CO0k3-RB.js";import"./auth.BQpGjoDu.js";/* empty css                                                              */const G=D(e({__name:"edit",setup(e){const D=t({service_id:0,type:"add",title:"",form:{goods_name:"",goods_image:[],expect_cost:"",additional_cost:[],expect_money:"",remark:"",address_info:""},orderServiceType:[]}),G=t({show:!1,data:{cost_name:"",money:0},index:null}),J=()=>{G.data={cost_name:"",money:0},G.index=null,G.show=!0},L=()=>{null===G.index?D.form.additional_cost.push(G.data):D.form.additional_cost[G.index]=G.data,G.show=!1};l((()=>D.form.additional_cost),(e=>{(()=>{let e=0;e=D.form.additional_cost.reduce(((e,t)=>{const l=parseFloat(t.money);return isNaN(l)?e:e+l}),0),D.form.expect_cost=0==e?"":e})()}),{immediate:!1,deep:!0});const M=a(),P=a(),Q=()=>{_("order_service_type").then((({data:e})=>{D.orderServiceType=e.list}))},X=()=>{let e;e=D.service_id?Z:E,e(D.form).then((e=>{B({title:d("success"),icon:"none"}),N({url:"/addon/saler_tools/pages/repair/lists"})}))};return s((()=>{Q()})),o((e=>{e.service_id?(D.type="edit",D.service_id=e.service_id,r({title:d("loading")}),Y(e.service_id).then((e=>{D.form=e.data})).finally((()=>{c()}))):D.type="add",Q()})),(e,t)=>{const l=h(y("up-navbar"),g),a=A,s=x,o=h(y("up-icon"),b),r=h(y("up-input"),V),c=h(y("up-tag"),k),_=h(y("up-textarea"),w),B=h(y("up-button"),j),Y=h(y("up-line"),z),Z=h(y("up-popup"),v);return C(),i(p,null,[n(s,{style:m(e.themeColor())},{default:u((()=>[n(l,{title:"add"==D.type?f(d)("add.repair"):f(d)("edit.repair"),autoBack:!0,safeAreaInsetTop:!0,placeholder:!0},null,8,["title"]),n(s,{class:"bg-[#fff] pb-[75px]"},{default:u((()=>[n(s,{class:"break-normal text-red-500 text-sm mb-[5px] bg-[#fefee6] p-[10px]"},{default:u((()=>[n(a,null,{default:u((()=>[T(K(f(d)("add_maintenance_receipt.tips1")),1)])),_:1}),n(a,{class:"text-amber-500"},{default:u((()=>[T(K(f(d)("add_maintenance_receipt.tips2")),1)])),_:1}),n(a,null,{default:u((()=>[T(K(f(d)("add_maintenance_receipt.tips3")),1)])),_:1})])),_:1}),n(s,{class:"p-3 flex flex-col"},{default:u((()=>[n(s,{class:"flex text-[var(--theme-input-title-size)]"},{default:u((()=>[T(K(f(d)("goods_image"))+" ",1),n(s,{class:"text-rose-500"},{default:u((()=>[T("*")])),_:1})])),_:1}),n(s,{class:"flex mt-2 justify-between"},{default:u((()=>[n(H,{width:"100",height:"100","icon-size":"30",max:9,"value-type":"array","result-type":"array",modelValue:D.form.goods_image,"onUpdate:modelValue":t[0]||(t[0]=e=>D.form.goods_image=e)},{default:u((()=>[n(s,{class:"flex flex-col justify-center items-center bg-[#f4f5f7] w-[100px] h-[100px]"},{default:u((()=>[n(o,{size:"30",name:"camera-fill",color:"var(--theme-color-primary)"}),n(s,{class:"text-[#999] text-[12px]"},{default:u((()=>[T(K(f(d)("add_quality_pictures")),1)])),_:1}),n(s,{class:"text-[#999] text-[12px] mt-[2px]"},{default:u((()=>[T(K(f(d)("more_attractive")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),n(s,{class:"p-3 flex items-center justify-between text-[var(--theme-input-title-size)]"},{default:u((()=>[n(s,{class:"flex"},{default:u((()=>[T(K(f(d)("form.goods_name"))+" ",1),n(s,{class:"text-rose-500"},{default:u((()=>[T("*")])),_:1})])),_:1}),n(s,{class:"flex items-center h-[14px] flex-1"},{default:u((()=>[n(r,{placeholder:f(d)("input.goods_name50"),border:"none",inputAlign:"right",modelValue:D.form.goods_name,"onUpdate:modelValue":t[1]||(t[1]=e=>D.form.goods_name=e),placeholderStyle:"color: var(--theme-input-placeholder);text-align: end;"},null,8,["placeholder","modelValue"])])),_:1})])),_:1}),n(s,{class:"p-3 flex items-center justify-between text-[var(--theme-input-title-size)]"},{default:u((()=>[n(s,{class:"flex"},{default:u((()=>[T(K(f(d)("goods_code")),1)])),_:1}),n(s,{class:"flex items-center h-[14px] flex-1"},{default:u((()=>[n(r,{placeholder:f(d)("input.goods_code"),border:"none",inputAlign:"right",modelValue:D.form.goods_code,"onUpdate:modelValue":t[2]||(t[2]=e=>D.form.goods_code=e),placeholderStyle:"color: var(--theme-input-placeholder);text-align: end;"},null,8,["placeholder","modelValue"])])),_:1})])),_:1}),n(s,{class:"p-3 flex items-center justify-between text-[28rpx]"},{default:u((()=>[n(s,{class:"flex"},{default:u((()=>[T(K(f(d)("service_type_multiple_choice"))+" ",1),n(s,{class:"text-rose-500"},{default:u((()=>[T("*")])),_:1})])),_:1})])),_:1}),n(s,{class:"px-3 flex justify-start items-center flex-wrap gap-[10px]"},{default:u((()=>[n(W,{modelValue:D.form.goods_attachment,"onUpdate:modelValue":t[3]||(t[3]=e=>D.form.goods_attachment=e),data:D.orderServiceType,props:{label:"value",value:"value"}},null,8,["modelValue","data"]),n(s,null,{default:u((()=>[n(c,{text:f(d)("diy_edit"),size:"large",plain:"",color:"#303133",borderColor:"#f4f5f7",icon:"plus",iconColor:"var(--theme-color-primary)",onClick:t[4]||(t[4]=e=>(()=>{let e="order_service_type";N({url:"/addon/saler_tools/pages/base/edit",param:{key:e},success:()=>{R("saler_tools_edit_key",e)}})})())},null,8,["text"])])),_:1})])),_:1}),n(s,{class:"p-3 flex items-center justify-between text-[var(--theme-input-title-size)]"},{default:u((()=>[n(s,{class:"flex"},{default:u((()=>[T(K(f(d)("estimated_charge")),1)])),_:1}),n(s,{class:"flex-1 flex items-center h-[14px]"},{default:u((()=>[n(r,{placeholder:f(d)("input.estimated_charge0"),border:"none",inputAlign:"right",modelValue:D.form.cost,"onUpdate:modelValue":t[5]||(t[5]=e=>D.form.cost=e),placeholderStyle:"color: var(--theme-input-placeholder);text-align: end"},null,8,["placeholder","modelValue"])])),_:1})])),_:1}),n(s,{class:"p-3 flex items-center justify-between text-[28rpx]"},{default:u((()=>[n(s,{class:"flex"},{default:u((()=>[T(K(f(d)("estimated_service_cost"))+" ",1),n(s,{class:"text-rose-500"},{default:u((()=>[T("*")])),_:1})])),_:1}),n(s,{class:"text-[var(--theme-color-primary)] text-xs",onClick:J},{default:u((()=>[T(K(f(d)("add")),1)])),_:1})])),_:1}),D.form.additional_cost.length?(C(),U(s,{key:0,class:"p-3 bg-[var(--theme-upload-bg)] m-2 mt-0 rounded"},{default:u((()=>[(C(!0),i(p,null,q(D.form.additional_cost,((e,t)=>(C(),U(s,{class:"flex justify-between items-center"},{default:u((()=>[n(s,null,{default:u((()=>[T(K(t+1)+" "+K(e.cost_name),1)])),_:2},1024),n(s,{class:"flex justify-between items-center"},{default:u((()=>[n(s,{class:"text-[14px] mr-2"},{default:u((()=>[n(a,null,{default:u((()=>[T("￥")])),_:1}),n(a,null,{default:u((()=>[T(K(e.money),1)])),_:2},1024)])),_:2},1024),n(s,{class:"flex"},{default:u((()=>[n(o,{name:"edit-pen",onClick:e=>(e=>{G.data=D.form.additional_cost[e],G.index=e,G.show=!0})(t),size:"16",color:"var(--theme-color-tips)"},null,8,["onClick"]),n(s,{class:"text-[var(--theme-input-placeholder)] mx-2 text-sm leading-4"},{default:u((()=>[T("|")])),_:1}),n(o,{name:"trash",onClick:e=>(e=>{D.form.additional_cost.splice(e,1)})(t),size:"16",color:"var(--theme-color-tips)"},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256)),n(s,{class:"flex justify-between text-[var(--theme-color-primary)] mt-2"},{default:u((()=>[n(s,null,{default:u((()=>[T("合计")])),_:1}),n(s,{class:"text-[16px]"},{default:u((()=>[n(a,null,{default:u((()=>[T("￥")])),_:1}),n(a,null,{default:u((()=>[T(K(D.form.expect_cost),1)])),_:1})])),_:1})])),_:1})])),_:1})):S("",!0),n(s,{class:"p-3 flex items-center justify-between text-[var(--theme-input-title-size)]",onClick:t[6]||(t[6]=e=>M.value.open())},{default:u((()=>[n(s,{class:"flex"},{default:u((()=>[T(K(f(d)("service_personnel")),1)])),_:1}),n(s,{class:"flex items-center h-[14px] text-[15px]"},{default:u((()=>[n(s,{class:I(D.form.service_uid?"text-[var(--theme-color-main)]":"!text-[var(--theme-input-placeholder)]")},{default:u((()=>[D.form.service_uid?(C(),U(s,{key:0,class:"text-xs text-[var(--theme-color-main)] text-sm"},{default:u((()=>[n(F,{uid:D.form.service_uid},null,8,["uid"])])),_:1})):(C(),U(s,{key:1,class:"text-[var(--theme-input-placeholder)] text-sm"},{default:u((()=>[T(K(f(d)("service_personnel_select")),1)])),_:1}))])),_:1},8,["class"]),n(o,{name:"arrow-right",size:"13",color:"var(--theme-input-placeholder)",class:"ml-[5rpx]"})])),_:1})])),_:1}),n(s,{class:"p-3 flex items-center justify-between",onClick:t[7]||(t[7]=e=>P.value.open())},{default:u((()=>[n(s,{class:"flex"},{default:u((()=>[T(K(f(d)("order_taker")),1)])),_:1}),n(s,{class:"flex items-center h-[14px] text-[15px]"},{default:u((()=>[D.form.sales_uid?(C(),U(s,{key:0,class:"text-xs text-[var(--theme-color-main)] text-sm"},{default:u((()=>[n(F,{uid:D.form.sales_uid},null,8,["uid"])])),_:1})):(C(),U(s,{key:1,class:"text-[var(--theme-input-placeholder)] text-sm"},{default:u((()=>[T(K(f(d)("order_taker_select")),1)])),_:1})),n(o,{name:"arrow-right",size:"13",color:"var(--theme-input-placeholder)",class:"ml-[5rpx]"})])),_:1})])),_:1}),n(s,{class:"p-3 flex flex-col remark-card"},{default:u((()=>[n(s,{class:"flex justify-between items-center text-[var(--theme-input-title-size)]"},{default:u((()=>[T(K(f(d)("form.remark")),1)])),_:1}),n(s,{class:"my-2 flex flex-col !box-border"},{default:u((()=>[n(_,{placeholder:f(d)("remark_placeholder"),count:"",maxlength:"250",modelValue:D.form.remark,"onUpdate:modelValue":t[8]||(t[8]=e=>D.form.remark=e)},null,8,["placeholder","modelValue"])])),_:1})])),_:1}),n(s,{class:"p-3 flex flex-col remark-card"},{default:u((()=>[n(s,{class:"flex justify-between items-center text-[var(--theme-input-title-size)]"},{default:u((()=>[T(K(f(d)("customer_info")),1)])),_:1}),n(s,{class:"my-2 flex flex-col !box-border"},{default:u((()=>[n(_,{placeholder:f(d)("input.delivery_address"),count:"",maxlength:"250",modelValue:D.form.address_info,"onUpdate:modelValue":t[9]||(t[9]=e=>D.form.address_info=e)},null,8,["placeholder","modelValue"])])),_:1})])),_:1})])),_:1}),n(s,{class:"main-fix-footer"},{default:u((()=>[n(B,{text:"add"==D.type?f(d)("confirm_creation_service"):f(d)("save"),onClick:X,class:"!text-[#fff] !bg-[var(--theme-color-primary)] !border-none"},null,8,["text"])])),_:1})])),_:1},8,["style"]),n(Z,{show:G.show},{default:u((()=>[n(s,{class:"p-3 flex justify-between items-center"},{default:u((()=>[n(s),n(s,{class:"flex !text-center font-bold text-[30rpx] text-[var(--theme-color-main)]"},{default:u((()=>[T(K(f(d)("add_service_cost")),1)])),_:1}),n(o,{name:"close",size:"15",onClick:t[10]||(t[10]=e=>G.show=!1)})])),_:1}),n(Y),n(s,{class:"p-3 flex flex-col text-[var(--theme-input-title-size)]"},{default:u((()=>[n(s,{class:"flex mb-1"},{default:u((()=>[T(K(f(d)("maintenance_content"))+" ",1),n(s,{class:"text-rose-500"},{default:u((()=>[T("*")])),_:1})])),_:1}),n(s,{class:"bg-[var(--theme-input-bg)] rounded p-2"},{default:u((()=>[n(r,{modelValue:G.data.cost_name,"onUpdate:modelValue":t[11]||(t[11]=e=>G.data.cost_name=e),placeholder:f(d)("input.maintenance_content"),border:"none",inputAlign:"left",placeholderStyle:"color: var(--theme-input-placeholder);"},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),n(s,{class:"p-3 flex flex-col text-[var(--theme-input-title-size)]"},{default:u((()=>[n(s,{class:"flex mb-1"},{default:u((()=>[T(K(f(d)("service_cost"))+" ",1),n(s,{class:"text-rose-500"},{default:u((()=>[T("*")])),_:1})])),_:1}),n(s,{class:"bg-[var(--theme-input-bg)] rounded p-2"},{default:u((()=>[n(r,{modelValue:G.data.money,"onUpdate:modelValue":t[12]||(t[12]=e=>G.data.money=e),placeholder:f(d)("input.service_cost"),border:"none",inputAlign:"left",placeholderStyle:"color: var(--theme-input-placeholder);"},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),n(s,{class:"flex gap-3 mb-5 p-3"},{default:u((()=>[n(B,{onClick:t[13]||(t[13]=e=>G.show=!1),class:"!text-[var(--theme-color-main)]",color:"#f4f5f7",text:f(d)("cancel")},null,8,["text"]),n(B,{text:f(d)("OK"),onClick:L,color:"var(--theme-color-primary)"},null,8,["text"])])),_:1})])),_:1},8,["show"]),n(O,{ref_key:"selectServiceRef",ref:M,sub:f(d)("service_personnel_select"),modelValue:D.form.service_uid,"onUpdate:modelValue":t[14]||(t[14]=e=>D.form.service_uid=e)},null,8,["sub","modelValue"]),n(O,{ref_key:"selectSalesRef",ref:P,sub:f(d)("service_personnel_select"),modelValue:D.form.sales_uid,"onUpdate:modelValue":t[15]||(t[15]=e=>D.form.sales_uid=e)},null,8,["sub","modelValue"])],64)}}}),[["__scopeId","data-v-4ca6719c"]]);export{G as default};
