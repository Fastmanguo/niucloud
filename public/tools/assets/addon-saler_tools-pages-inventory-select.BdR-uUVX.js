import{d as e,W as t,E as a,x as l,H as o,b as s,aL as n,e as r,aM as u,ci as i,cj as d,c as m,o as _,w as c,f,i as p,a5 as x,a6 as y,at as v,p as g,t as h,u as b,s as V,n as w,K as k,_ as j,h as C,r as K,X as z,bL as I,c9 as U,ce as S,ca as L,D as B,l as E,Y as N,a4 as A,q as D,cm as T,a as q}from"./index-DlbBJ3bC.js";import{b as H,g as M}from"./warehouse.CvI1Ck4Y.js";import{s as R}from"./index.COs-0cDI.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang.BZegFM-D.js";import{c as X}from"./Inventory.DjfzdujZ.js";import{c as Y}from"./index.DK0m-eAv.js";import{j as F}from"./goods.dvxeGb_d.js";import"./auth.BQpGjoDu.js";/* empty css                                                              */const G=j(e({__name:"index",props:{modelValue:{type:[String,Number],default:()=>[]},valueKey:{type:String,default:"store_id"}},emits:["update:modelValue","change"],setup(e,{emit:j}){const C=t({list:[],form:{store_name:""}}),K=e,z=j,I=a({get:()=>K.modelValue||null,set(e){z("update:modelValue",e)}}),U=e=>{I.value==e[K.valueKey]?I.value=null:(z("change",e[K.valueKey]),I.value=e[K.valueKey])},S=()=>{H({is_stat:1}).then((e=>{C.list=e.data})).catch((e=>{k({title:e.msg,icon:"none"})}))};return l((()=>{S()})),o((()=>{S()})),(e,t)=>{const a=s(r("up-text"),n),l=p,o=s(r("up-divider"),u),k=s(r("up-radio"),i),j=s(r("up-radio-group"),d);return _(),m(l,{style:w(e.themeColor())},{default:c((()=>[f(l,{class:"m-2 grid grid-cols-2 gap-2"},{default:c((()=>[(_(!0),x(y,null,v(C.list,((e,s)=>(_(),m(l,{class:"flex flex-col rounded h-[150px] justify-around bg-[#fff]",onClick:t=>U(e),style:{"box-shadow":"rgba(14, 63, 126, 0.06) 0px 0px 0px 1px, rgba(42, 51, 70, 0.03) 0px 1px 1px -0.5px, rgba(42, 51, 70, 0.04) 0px 2px 2px -1px, rgba(42, 51, 70, 0.04) 0px 3px 3px -1.5px, rgba(42, 51, 70, 0.03) 0px 5px 5px -2.5px, rgba(42, 51, 70, 0.03) 0px 10px 10px -5px, rgba(42, 51, 70, 0.03) 0px 24px 24px -8px"}},{default:c((()=>[f(l,{class:"mt-1 px-2 flex-1"},{default:c((()=>[f(a,{lines:1,text:e.store_name,bold:""},null,8,["text"])])),_:2},1024),f(l,{class:"px-2 flex justify-between items-center text-xs"},{default:c((()=>[f(l,{class:"flex flex-col w-1/2"},{default:c((()=>[f(l,null,{default:c((()=>[g(h(b(V)("total_goods_count")),1)])),_:1}),f(l,{class:"text-[var(--theme-color-primary)] text-sm"},{default:c((()=>[g(h(e.goods_count||0),1)])),_:2},1024)])),_:2},1024),f(l,{class:"flex flex-col w-1/2"},{default:c((()=>[f(l,null,{default:c((()=>[g(h(b(V)("goods_sold")),1)])),_:1}),f(l,{class:"text-[var(--theme-color-content)] text-sm"},{default:c((()=>[g(h(e.sale_count||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),f(l,{class:"mt-1 px-2 text-[var(--theme-color-content)] text-xs"},{default:c((()=>[g(h(b(V)("serial_number")+"："+e.store_id),1)])),_:2},1024),f(o,{hairline:!0,class:"!mx-0 !my-1"}),f(l,{class:"px-2 mb-1 flex flex-between items-center text-xs text-[var(--theme-color-tips)]"},{default:c((()=>[f(l,{class:"flex flex-col items-left flex-1"},{default:c((()=>[f(l,{class:"flex leading-5"},{default:c((()=>[g(h(b(V)("founder")+"：")+" ",1),f(a,{lines:1,text:e.create_name,color:"var(--theme-color-tips)",size:"14px"},null,8,["text"])])),_:2},1024),f(l,null,{default:c((()=>[g(h(e.create_time),1)])),_:2},1024)])),_:2},1024),f(l,null,{default:c((()=>[f(j,{onChange:t=>U(e),modelValue:K.modelValue,"onUpdate:modelValue":t[0]||(t[0]=e=>K.modelValue=e),placement:"column"},{default:c((()=>[(_(),m(k,{key:s,name:e[K.valueKey],activeColor:"var(--theme-color-primary)"},null,8,["name"]))])),_:2},1032,["onChange","modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1},8,["style"])}}}),[["__scopeId","data-v-81bf1442"]]),J=j(e({__name:"index",props:{modelValue:{type:[String,Number],default:()=>[]},valueKey:{type:String,default:"watch_location"}},emits:["update:modelValue","change"],setup(e,{emit:u}){const k=t({list:[]}),j=e,K=u,z=a({get:()=>j.modelValue||null,set(e){K("update:modelValue",e)}}),I=e=>{z.value==e[j.valueKey]?z.value=null:(K("change",e[j.valueKey]),z.value=e[j.valueKey])},U=()=>{F().then((e=>{k.list=e.data}))};return l((()=>{U()})),o((()=>{U()})),(e,t)=>{const a=p,l=s(r("up-text"),n),o=s(r("up-radio"),i),u=s(r("up-radio-group"),d);return _(),m(a,{style:w(e.themeColor())},{default:c((()=>[(_(!0),x(y,null,v(k.list,((e,s)=>(_(),m(a,{class:"flex flex-col text-sm",key:s,onClick:t=>I(e)},{default:c((()=>[0!=e.goods_num?(_(),m(a,{key:0,class:"flex justify-between items-center bg-[#fff] p-3 rounded mx-2 mt-2"},{default:c((()=>[f(a,{class:"flex flex-col"},{default:c((()=>[f(a,{class:"text-[var(--theme-color-main)]"},{default:c((()=>[g(h(e.value||b(V)("no_distribution_location")),1)])),_:2},1024),f(a,{class:"text-[var(--theme-color-tips)] flex"},{default:c((()=>[g(h(b(V)("aggregate"))+" ",1),f(l,{type:"primary",text:e.goods_num,margin:"0 5px"},null,8,["text"]),g(" "+h(b(V)("goods_pieces")),1)])),_:2},1024)])),_:2},1024),f(a,null,{default:c((()=>[f(u,{onChange:t=>I(e),modelValue:j.modelValue,"onUpdate:modelValue":t[0]||(t[0]=e=>j.modelValue=e),placement:"column"},{default:c((()=>[(_(),m(o,{key:s,name:e[j.valueKey],activeColor:"var(--theme-color-primary)"},null,8,["name"]))])),_:2},1032,["onChange","modelValue"])])),_:2},1024)])),_:2},1024)):C("",!0)])),_:2},1032,["onClick"])))),128))])),_:1},8,["style"])}}}),[["__scopeId","data-v-ad298eb7"]]),O=j(e({__name:"select",setup(e){const n=t({title:"",form:{inventory_type:"store",goods_attributes:[],category_ids:[],inventory_uids:[],inventory_name:"",store_id:0,watch_location:""},selectedBrandId:0,selectedBrandName:""}),u=K(),i=K([]);M().then((e=>{i.value=e.data}));const d=t({categoryList:[],goods_attribute:[]}),j=e=>{let t;t=1===e?["mvmt_type","case_matl","dial_dia","matl","sz","fit_sz"]:["matl","sz","fit_sz"],n.form.goods_attr=[],t.forEach(((e,t)=>{n.form.goods_attr.push({attr_key:e,attr_value:"",sort:t})}))},H=async()=>{U({title:V("loading")});let e=[];["goods_attribute"].forEach((t=>e.push((()=>(e=>T(e).then((({data:t})=>{d[e]=t})))(t))))),await S(e,10),M().then((e=>{d.categoryList=e.data})),L(),n.init=!0};l((()=>{let e=z("saler_tools_edit_key");e&&(n.init&&loadSiteDict(e),I("saler_tools_edit_key"))}));let F={};const O={store:()=>{F={goods_attributes:n.form.goods_attributes,category_ids:n.form.category_ids,inventory_uids:n.form.inventory_uids,inventory_name:n.form.inventory_name}},temp_store:()=>{F={store_id:n.form.store_id,inventory_uids:n.form.inventory_uids,inventory_name:n.form.inventory_name}},pawned_goods:()=>{F={inventory_uids:n.form.inventory_uids,inventory_name:n.form.inventory_name,category_ids:n.form.category_ids}},watch_location:()=>{F={watch_location:n.form.watch_location,inventory_uids:n.form.inventory_uids,inventory_name:n.form.inventory_name}}};const P=()=>{(O[n.form.inventory_type]||O.store)(),X({inventory_type:n.form.inventory_type,...F}).then((({data:e})=>{k({title:V("success"),icon:"none"}),setTimeout((()=>{q({url:"/addon/saler_tools/pages/commodityInventory/check",param:{inventory_id:e.inventory_id,status:0}})}),1e3)}))},Q=a((()=>d.goods_attribute.filter((e=>"pawned_goods"!=e.value))));return o((e=>{e.type&&(n.form.inventory_type=e.type,n.title=V("create")+V("inventory_"+e.type)),H()})),(e,t)=>{const a=s(r("up-navbar"),B),l=p,o=D,i=s(r("up-icon"),E),k=s(r("up-input"),N),K=s(r("up-button"),A);return _(),x(y,null,[f(l,{style:w(e.themeColor()),class:"main-fix-footer-safe"},{default:c((()=>[f(a,{title:n.title,autoBack:!0,safeAreaInsetTop:!0,placeholder:!0},null,8,["title"]),f(l,{class:"text-sm"},{default:c((()=>["store"==n.form.inventory_type?(_(),m(l,{key:0,class:"p-3 pb-2 flex flex-col bg-[#fff] mt-2"},{default:c((()=>[f(l,{class:"flex justify-between items-center"},{default:c((()=>[f(l,{class:"flex"},{default:c((()=>[g(h(b(V)("goods_attribute"))+" ",1),f(l,{class:"text-rose-500"},{default:c((()=>[g("*")])),_:1})])),_:1}),f(l,{class:"text-[var(--theme-input-placeholder)] text-xs"},{default:c((()=>[g(h(b(V)("inventory.tip1")),1)])),_:1})])),_:1}),f(l,{class:"grid grid-cols-3 mt-2 gap-[10px]"},{default:c((()=>[f(Y,{modelValue:n.form.goods_attributes,"onUpdate:modelValue":t[0]||(t[0]=e=>n.form.goods_attributes=e),data:Q.value,with:"60",props:{label:"value",value:"value"},format:e=>b(V)(e)},null,8,["modelValue","data","format"])])),_:1})])),_:1})):C("",!0),"store"==n.form.inventory_type||"pawned_goods"==n.form.inventory_type?(_(),m(l,{key:1,class:"p-3 pb-2 flex flex-col bg-[#fff] mt-2"},{default:c((()=>[f(l,{class:"flex justify-between items-center"},{default:c((()=>[f(l,{class:"flex"},{default:c((()=>[g(h(b(V)("goods_category")),1)])),_:1}),f(l,{class:"text-[var(--theme-input-placeholder)] text-xs"},{default:c((()=>[g(h(b(V)("inventory.tip2")),1)])),_:1})])),_:1}),f(l,{class:"grid grid-cols-3 mt-2 gap-[10px] bg-[#fff] mt-2"},{default:c((()=>[f(Y,{modelValue:n.form.category_ids,"onUpdate:modelValue":t[1]||(t[1]=e=>n.form.category_ids=e),data:d.categoryList,onChange:j,props:{label:"category_name",value:"category_id"}},null,8,["modelValue","data"])])),_:1})])),_:1})):C("",!0),f(l,{class:"p-3 flex items-center justify-between bg-[#fff] mt-2",onClick:t[2]||(t[2]=e=>u.value.open())},{default:c((()=>[f(l,{class:"flex"},{default:c((()=>[g(h(b(V)("form.inventory_name")),1)])),_:1}),f(l,{class:"flex items-center h-[14px]"},{default:c((()=>[n.form.inventory_uids.length?(_(),m(l,{key:0,class:"text-sm text-[var(--theme-color-main)]"},{default:c((()=>[(_(!0),x(y,null,v(n.form.inventory_uids,((e,t)=>(_(),x(y,null,[t>0?(_(),m(o,{key:0},{default:c((()=>[g(",")])),_:1})):C("",!0),f(W,{uid:e},null,8,["uid"])],64)))),256))])),_:1})):(_(),m(l,{key:1,class:"text-sm text-[var(--theme-input-placeholder)]"},{default:c((()=>[g(h(b(V)("select.inventory_name")),1)])),_:1})),f(i,{name:"arrow-right",size:"13",color:"#c0c4cc",class:"ml-[5rpx]"})])),_:1})])),_:1}),f(l,{class:"p-3 flex items-center justify-between text-[var(--theme-input-title-size)] bg-[#fff] mt-2"},{default:c((()=>[f(l,{class:"flex"},{default:c((()=>[g(h(b(V)("inventory_name")),1)])),_:1}),f(l,{class:"flex-1 flex items-center h-[14px]"},{default:c((()=>[f(k,{placeholder:b(V)("input.inventory_name"),border:"none",inputAlign:"right",fontSize:"15",modelValue:n.form.inventory_name,"onUpdate:modelValue":t[3]||(t[3]=e=>n.form.inventory_name=e),placeholderStyle:"color: var(--theme-input-placeholder);text-align: end;"},null,8,["placeholder","modelValue"])])),_:1})])),_:1}),"temp_store"==n.form.inventory_type?(_(),m(l,{key:2,class:"mt-4"},{default:c((()=>[f(l,{class:"flex m-2"},{default:c((()=>[g(h(b(V)("select.temp_inventory")),1)])),_:1}),f(G,{modelValue:n.form.store_id,"onUpdate:modelValue":t[4]||(t[4]=e=>n.form.store_id=e),"value-key":"store_id"},null,8,["modelValue"])])),_:1})):C("",!0),"watch_location"==n.form.inventory_type?(_(),m(l,{key:3,class:"mt-4"},{default:c((()=>[f(l,{class:"flex m-2"},{default:c((()=>[g(h(b(V)("select.watch_location")),1)])),_:1}),f(J,{modelValue:n.form.watch_location,"onUpdate:modelValue":t[5]||(t[5]=e=>n.form.watch_location=e),"value-key":"value"},null,8,["modelValue"])])),_:1})):C("",!0)])),_:1}),f(l,{class:"main-fix-footer",style:{"box-shadow":"var(--theme-box-shadow)"}},{default:c((()=>[f(K,{text:n.title,color:"#e0b87a",onClick:t[6]||(t[6]=e=>P())},null,8,["text"])])),_:1})])),_:1},8,["style"]),f(R,{ref_key:"selectInventoryRef",ref:u,sub:b(V)("select.inventory_name"),modelValue:n.form.inventory_uids,"onUpdate:modelValue":t[7]||(t[7]=e=>n.form.inventory_uids=e),mode:"multiple"},null,8,["sub","modelValue"])],64)}}}),[["__scopeId","data-v-ba36e294"]]);export{O as default};
