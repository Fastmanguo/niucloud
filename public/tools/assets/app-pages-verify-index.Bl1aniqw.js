import{d as e,r as a,x as t,J as l,c as r,w as s,n as x,i as c,b as p,e as n,o,h as u,f as i,g as f,u as d,a as m,q as v,p as g,P as _,M as h,v as y,ao as b,a7 as w,I as j,bM as C,K as k,_ as V}from"./index-DlbBJ3bC.js";import{_ as I}from"./loading-page.vue_vue_type_script_setup_true_lang.B0pUTkMl.js";import{g as z,a as F}from"./verify.CMEgexQi.js";const S=V(e({__name:"index",setup(e){const V=a("manualInput");V.value="manualInput";const S=a(!1),M=a(""),Z=a(!0),q=a(!1);t((()=>{l()&&E()}));const E=()=>{z().then((e=>{e.data?(q.value=!0,Z.value=!1):(q.value=!1,Z.value=!1)}))},J=()=>{j()&&(C.init(),C.scanQRCode((e=>{if(e.resultStr){let a=e.resultStr;m({url:"/app/pages/verify/verify",param:{code:a}})}})))};let K=!1;const P=()=>/[\S]+/.test(M.value)?!K&&(K=!0,void F(M.value).then((e=>{K=!1,m({url:"/app/pages/verify/verify",param:{code:M.value}})})).catch((()=>{K=!1}))):(k({title:"请输入核销码",icon:"none"}),!1),Q=()=>{S.value=!S.value},R=e=>{V.value=e};return(e,a)=>{const t=v,l=c,j=_,C=b,k=p(n("loading-page"),I);return o(),r(l,{style:x(e.themeColor())},{default:s((()=>[!Z.value&&q.value?(o(),r(l,{key:0,class:"w-[100vw] min-h-[100vh] bg-[#f8f8f8]"},{default:s((()=>[i(l,{class:"w-full bg-[#fff] verify-box h-[760rpx]"},{default:s((()=>[i(l,{class:"text-[var(--primary-color)] fixed top-[40rpx] right-[30rpx] flex items-center",onClick:a[0]||(a[0]=e=>d(m)({url:"/app/pages/verify/record"}))},{default:s((()=>[i(t,{class:"nc-iconfont nc-icon-lishijiluV6xx !text-[28rpx] -mb-[2rpx]"}),i(t,{class:"text-[26rpx] ml-[8rpx]"},{default:s((()=>[g("核销记录")])),_:1})])),_:1}),f(i(l,{class:"flex flex-col items-center justify-center"},{default:s((()=>[i(l,{class:"sweep-code flex items-center justify-center",onClick:J},{default:s((()=>[i(j,{class:"w-[354rpx] h-[354rpx]",src:d(h)("static/resource/images/verify/saoma.png")},null,8,["src"])])),_:1}),i(l,{class:"mt-[40rpx] text-[30rpx]"},{default:s((()=>[g("点击扫描二维码")])),_:1}),i(l,{class:"mt-[20rpx] text-[var(--text-color-light9)] text-[26rpx] font-400 pb-[142rpx]"},{default:s((()=>[g("扫描二维码进行核销")])),_:1})])),_:1},512),[[y,"sweepCode"==V.value]]),f(i(l,null,{default:s((()=>[i(l,{class:"flex pt-[126rpx] items-center justify-center"},{default:s((()=>[i(l,{class:"flex justify-center items-center flex-col pr-[30rpx] min-w-[130rpx]"},{default:s((()=>[i(j,{class:"w-[100rpx] h-[100rpx]",src:d(h)("static/resource/images/verify/shuruhexiaoma.png")},null,8,["src"]),i(l,{class:"text-[26rpx] h-[36rpx] leading-[36rpx] mt-[14rpx]"},{default:s((()=>[g("验证核销码")])),_:1})])),_:1}),i(j,{class:"w-[74rpx] h-[12rpx] mb-[50rpx]",src:d(h)("static/resource/images/verify/youjiantou.png")},null,8,["src"]),i(l,{class:"flex justify-center items-center flex-col pl-[30rpx] min-w-[130rpx]"},{default:s((()=>[i(j,{class:"w-[100rpx] h-[100rpx]",src:d(h)("static/resource/images/verify/hexiao1.png")},null,8,["src"]),i(l,{class:"text-[26rpx] h-[36rpx] leading-[36rpx] mt-[14rpx]"},{default:s((()=>[g("核销")])),_:1})])),_:1})])),_:1}),i(l,{class:"mt-[50rpx]"},{default:s((()=>[i(l,{class:"h-[90rpx] border-[2rpx] border-solid border-[#eee] rounded-[16rpx] box-border p-[20rpx] mx-[60rpx] flex items-center"},{default:s((()=>[i(t,{class:"nc-iconfont nc-icon-saotiaoxingmaV6xx text-[44rpx] text-[#EF000C]"}),i(C,{type:"text",placeholder:"请输入核销码",class:"h-[90rpx] border-none text-start ml-[30rpx] text-[28rpx] flex-1","placeholder-class":"_placeholder",modelValue:M.value,"onUpdate:modelValue":a[1]||(a[1]=e=>M.value=e),focus:S.value,ref:"input"},null,8,["modelValue","focus"])])),_:1}),i(l,{class:"h-[80rpx] primary-btn-bg min-w-[630rpx] text-[#fff] flex-center !text-[26rpx] save-btn rounded-[100rpx] h-[80rpx] font-500 mx-[60rpx] mt-[146rpx] relative z-1",onClick:P},{default:s((()=>[g("核销")])),_:1})])),_:1})])),_:1},512),[[y,"manualInput"==V.value]])])),_:1}),i(l,{class:"w-[630rpx] h-[100rpx] bg-[#fff] mx-[auto] mt-[220rpx] rounded-[90rpx] flex relative action-type-wrap"},{default:s((()=>[i(l,{class:w(["relative w-[51%] pr-[50rpx] box-border rounded-[50rpx] z-0 flex flex-col items-center justify-center",{xuanZhong1:"sweepCode"==V.value}]),onClick:a[2]||(a[2]=e=>R("sweepCode"))},{default:s((()=>[i(t,{class:"nc-iconfont nc-icon-saoyisaoV6xx !text-[40rpx]"}),i(l,{class:"text-[24rpx] leading-[1] mt-[10rpx]"},{default:s((()=>[g("扫码核销")])),_:1})])),_:1},8,["class"]),i(l,{class:"flex flex-col items-center flex-col w-[120rpx] h-[120rpx] bg-[#FF7354] rounded-[50%] absolute top-[-10rpx] left-[255rpx] heXiao text-white z-10 shrink-0"},{default:s((()=>[i(l,{class:"nc-iconfont nc-icon-saotiaoxingmaV6xx ns-gradient-otherpages-member-balance-balance-rechange !text-[44rpx] mt-[19rpx]"}),i(l,{class:"text-[24rpx] mt-[8rpx] leading-[34rpx] h-[34rpx]"},{default:s((()=>[g("核销台")])),_:1})])),_:1}),i(l,{class:w(["relative w-[51%] pl-[50rpx] box-border rounded-[50rpx] z-0 flex flex-col items-center justify-center",{xuanZhong:"manualInput"==V.value}]),onClick:a[3]||(a[3]=e=>R("manualInput"))},{default:s((()=>[i(t,{class:"iconfont iconVector-77 !text-[40rpx]"}),i(l,{class:"ml-[20rpx] text-[24rpx] leading-[1] mt-[10rpx]",onClick:Q},{default:s((()=>[g("手动输入")])),_:1})])),_:1},8,["class"])])),_:1})])),_:1})):u("",!0),Z.value||q.value?u("",!0):(o(),r(l,{key:1,class:"w-[100vw] min-h-[100vh] bg-[#f8f8f8] overflow-hidden"},{default:s((()=>[i(l,{class:"empty-page"},{default:s((()=>[i(j,{class:"img",src:d(h)("static/resource/images/system/empty.png"),mode:"aspectFit"},null,8,["src"]),i(l,{class:"desc"},{default:s((()=>[g("非核销员无此权限")])),_:1})])),_:1})])),_:1})),i(k,{loading:Z.value},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-5f4cdff5"]]);export{S as default};
