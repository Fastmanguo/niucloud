import{d as e,W as l,r as t,H as a,a5 as o,f as s,w as r,n,a6 as u,i as f,b as c,bc as i,e as d,ah as m,D as p,aI as x,Y as h,a4 as v,l as b,aL as y,b8 as g,ch as _,o as w,p as C,at as z,c as k,g as j,a7 as A,v as I,cR as T,_ as D}from"./index-DlbBJ3bC.js";import{g as S}from"./warehouse.CvI1Ck4Y.js";const B=D(e({__name:"tallyAdd",setup(e){l({});const D=t([]);S().then((e=>{D.value=e.data}));const B=t([]),L=e=>{B.value.splice(e.index,1)},V=async e=>{let l=[].concat(e.file),t=B.value.length;l.map((e=>{B.value.push({...e,status:"uploading",message:"上传中"})}));for(let a=0;a<l.length;a++){const e=await $(l[a].url);let o=B.value[t];B.value.splice(t,1,{...o,status:"success",message:"",url:e}),t++}},$=e=>new Promise(((l,t)=>{T({url:"http://192.168.2.21:7001/upload",filePath:e,name:"file",formData:{user:"test"},success:e=>{setTimeout((()=>{l(e.data.data)}),1e3)}})})),P=t(!1),R=t(Date.now()),U=(e,l)=>"year"===e?`${l}年`:"month"===e?`${l}月`:"day"===e?`${l}日`:l,W=t(!1);t([]);const F=t([{name:"快递费",value:0},{name:"维修费",value:1},{name:"参展费",value:2},{name:"其他",value:3}]),H=t(0),Y=t(!1),q=t(0),E=l([{name:"支出"},{name:"收入"}]),G=e=>{q.value=e.index};return a((e=>{q.value=e.currentTab})),(e,l)=>{const t=c(d("up-navbar"),p),a=c(d("up-tabs"),x),T=f,D=c(d("up-input"),h),S=c(d("up-button"),v),$=c(d("up-icon"),b),q=c(d("up-text"),y),J=c(d("up-upload"),g),K=c(d("up-textarea"),_),M=c(d("up-datetime-picker"),i),N=c(d("up-modal"),m);return w(),o(u,null,[s(T,{style:n(e.themeColor())},{default:r((()=>[s(t,{title:"记一笔",autoBack:!0,safeAreaInsetTop:!0,placeholder:!0}),s(T,{class:"py-2"},{default:r((()=>[s(a,{list:E,activeStyle:"color:var(--theme-color-primary);font-size:16px",lineWidth:"30",onChange:G,lineColor:"var(--theme-color-primary)",scrollable:!1,inactiveStyle:"color:var(--theme-color-main);font-size:13px",itemStyle:"padding:0px 5px 3px;z-index:2"},null,8,["list"])])),_:1}),s(T,{class:"border-t-[10px] border-[0px] border-solid border-[#f4f5f7]"},{default:r((()=>[s(T,{class:"p-3 flex items-center justify-between text-[var(--theme-input-title-size)]"},{default:r((()=>[s(T,{class:"flex"},{default:r((()=>[C(" 支出金额 ")])),_:1}),s(T,{class:"flex items-center h-[14px] flex-1 ml-2"},{default:r((()=>[s(D,{placeholder:"填写金额",border:"bottom",inputAlign:"right",placeholderStyle:"color: var(--theme-color-tips);text-align: end;\r\n            font-size:16px"})])),_:1})])),_:1}),s(T,{class:"p-3 flex items-center justify-between text-[28rpx]"},{default:r((()=>[s(T,{class:"flex"},{default:r((()=>[C(" 选择分类 ")])),_:1}),s(T,{class:"text-[var(--theme-color-primary)]",onClick:l[0]||(l[0]=e=>Y.value=!Y.value)},{default:r((()=>[C(" 删除 ")])),_:1})])),_:1}),s(T,{class:"px-3 flex flex-wrap items-center"},{default:r((()=>[(w(!0),o(u,null,z(F.value,((e,l)=>(w(),k(T,{class:"relative overflow-hidden mr-[10px] rounded-tr-[3px]"},{default:r((()=>[s(S,{color:H.value===l?"var(--theme-color-primary)":"",plain:!0,text:e.name,type:"default",class:A(["mb-2",H.value===l?"!text-[#fff] !bg-[var(--theme-color-primary)]":"!text-[var(--theme-color-main)] !bg-[#fff] border-1px border-solid border-[var(--theme-border)]"]),size:"small",onClick:e=>(e=>{H.value=e})(l)},null,8,["color","text","class","onClick"]),j(s(T,{class:"flex items-end justify-center h-[40px] w-[40px] absolute bg-rose-500 top-[-23px] right-[-23px]",style:{transform:"rotate(45deg)"}},{default:r((()=>[s($,{name:"close",size:"11",color:"#fff",style:{transform:"rotate(45deg)"},onClick:e=>(e=>{F.value.splice(e,1)})(l)},null,8,["onClick"])])),_:2},1536),[[I,Y.value]])])),_:2},1024)))),256)),s(T,{class:"relative overflow-hidden"},{default:r((()=>[s(S,{text:"自定义",size:"small",plain:"",type:"default",class:"!text-[var(--theme-color-main)] mb-2 py-0 px-[20px] border-1px border-solid border-[var(--theme-border)] bg-[#fff]",iconColor:"var(--theme-color-primary)",onClick:l[1]||(l[1]=e=>W.value=!0),icon:"plus",style:{width:"auto"}}),j(s(T,{class:"hidden flex items-end justify-center h-[40px] w-[40px] absolute bg-rose-500 top-[-24px] right-[-24px]",style:{transform:"rotate(45deg)"}},{default:r((()=>[s($,{name:"close",size:"11",color:"#fff",style:{transform:"rotate(45deg)"}})])),_:1},512),[[I,Y.value]])])),_:1})])),_:1}),s(T,{class:"p-3 flex items-center justify-between text-[var(--theme-input-title-size)]"},{default:r((()=>[s(T,{class:"flex"},{default:r((()=>[C(" 选择日期 ")])),_:1}),s(T,{class:"flex items-center h-[14px] text-[15px]",onClick:l[2]||(l[2]=e=>P.value=!0)},{default:r((()=>[s(q,{mode:"date",text:R.value},null,8,["text"]),s($,{name:"arrow-down-fill",size:"12",color:"var(--theme-color-main)",class:"ml-[5rpx]"})])),_:1})])),_:1}),s(T,{class:"p-3 flex flex-col"},{default:r((()=>[s(T,{class:"flex text-[var(--theme-input-title-size)]"},{default:r((()=>[C(" 图片 ")])),_:1}),s(T,{class:"flex mt-2 justify-between"},{default:r((()=>[s(J,{fileList:B.value,onAfterRead:V,deletable:!0,onDelete:L,name:"1",multiple:"",previewFullImage:!0,maxCount:9,uploadText:"最多添加9张图片",width:"110",uploadIconColor:"#ffffff",uploadIcon:"/static/assets/warehouse/add-photo.png",height:"110"},null,8,["fileList"])])),_:1})])),_:1}),s(T,{class:"p-3 flex flex-col custom-modal"},{default:r((()=>[s(T,{class:"flex justify-between items-center text-[var(--theme-input-title-size)]"},{default:r((()=>[C(" 备注 ")])),_:1}),s(T,{class:"my-2 flex flex-col !box-border"},{default:r((()=>[s(K,{placeholder:"请输入备注信息（限50个字）",count:"",maxlength:"50",class:"!bg-[#f4f5f7]"})])),_:1})])),_:1})])),_:1}),s(T,{class:"fixed bottom-0 left-0 w-full box-border bg-[#fff] z-100 p-3 h-[80px]",style:{"box-shadow":"var(--theme-box-shadow)"}},{default:r((()=>[s(S,{text:"保存",class:"!text-[#fff] !bg-[var(--theme-color-primary)] !border-none",onClick:l[3]||(l[3]=()=>{})})])),_:1})])),_:1},8,["style"]),s(M,{show:P.value,modelValue:R.value,"onUpdate:modelValue":l[4]||(l[4]=e=>R.value=e),mode:"date",confirmColor:"var(--theme-color-primary)",onConfirm:l[5]||(l[5]=e=>P.value=!1),onCancel:l[6]||(l[6]=e=>P.value=!1),formatter:U,confirmText:"确定"},null,8,["show","modelValue"]),s(N,{show:W.value,"onUpdate:show":l[10]||(l[10]=e=>W.value=e),width:300,showConfirmButton:!1,contentTextAlign:"center"},{confirmButton:r((()=>[s(T,{class:"flex gap-3"},{default:r((()=>[s(S,{onClick:l[8]||(l[8]=e=>W.value=!1),class:"!text-[var(--theme-color-main)]",color:"#f4f5f7",text:"取消"}),s(S,{text:"确定",onClick:l[9]||(l[9]=e=>W.value=!1),color:"var(--theme-color-primary)"})])),_:1})])),default:r((()=>[s(T,{class:"flex flex-col items-center w-full"},{default:r((()=>[s(T,{class:"flex !text-center font-bold text-base mb-3"},{default:r((()=>[C("添加自定义分类")])),_:1}),s(T,{class:"flex flex-col !box-border w-full !bg-[#f4f5f7] p-2 !rounded"},{default:r((()=>[s(D,{placeholder:"请输入自定义分类（限10个字）",border:"none",onChange:l[7]||(l[7]=()=>{}),inputAlign:"center"})])),_:1})])),_:1})])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-0c96cd11"]]);export{B as default};
