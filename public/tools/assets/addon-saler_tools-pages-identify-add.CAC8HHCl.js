import{d as e,r as t,W as a,a3 as l,E as s,H as o,x as r,X as d,bp as c,a5 as i,f as n,w as m,n as f,u as _,a6 as u,s as p,ce as x,i as g,b as h,cZ as b,e as y,cm as v,D as w,l as k,cg as j,aL as C,ch as z,Y as V,N as L,a4 as U,o as $,C as S,p as A,t as D,q as E,c as I,a as N,K as T,_ as W}from"./index-DlbBJ3bC.js";import{_ as Y}from"./loading-page.vue_vue_type_script_setup_true_lang.B0pUTkMl.js";import{g as q}from"./warehouse.CvI1Ck4Y.js";import{_ as B}from"./index.vue_vue_type_script_setup_true_lang.Ds2EKSiR.js";import{c as F}from"./index.DK0m-eAv.js";import{d as H}from"./index.DMQw-R7a.js";import{b as K}from"./identify.s0vXd16j.js";const P=W(e({__name:"add",setup(e){const W=t(),P=t(!1),R=t(!1),X=a([[]]);l((()=>{(()=>{const e=(new Date).getFullYear(),t=[];for(let a=0;a<=50;a++){const l=e-a;t.push({label:`${l}${p("years")}`,id:l})}X[0]=t})()}));const Z={site_id:1,order_no:0,goods_cover:"",goods_image:[],goods_name:"",goods_code:"",goods_attachment:[],category_id:1,brand_id:"",brand_name:"",series_id:"",series_name:"",model_id:"",model_name:"",status:0,original_cost:0,cost:0,money:0,year:"",currency_code:"",create_uid:0,create_time:"",update_time:""},G=a({form:{},rules:{},loading:!0,init:!1,option:{},type:""}),J=a({categoryList:[],goods_attachment:[]}),M=s((()=>{const e=J.categoryList.find((e=>e.category_id===G.form.category_id));return e?e.category_name:""}));o((e=>{G.option=e||{},(async()=>{const e=G.option;G.loading=!0,e&&(G.form={...Z,...e});let t=[];["goods_attachment"].forEach((e=>t.push((()=>Q(e))))),await x(t,10),q().then((e=>{J.categoryList=e.data})),G.loading=!1,G.init=!0})()})),r((()=>{G.init&&O()}));const O=()=>{let e=d("saler_tools_select_brand_id");e&&(G.form.brand_id!==e.brand_id&&(G.form.series_id="",G.form.model_id=""),G.form.brand_id=e.brand_id,G.form.brand_name=`${e.brand_name}/${e.brand_en}`);let t=d("saler_tools_select_series_id");t&&(G.form.series_id!==t.series_id&&(G.form.model_id="",G.form.model_name=""),G.form.series_name=t.series_name,G.form.series_id=t.series_id);let a=d("saler_tools_select_model_id");a&&(G.form.model_id=a.model_id,G.form.model_name=a.model_name),c({key:"saler_tools_select_brand_id"}),c({key:"saler_tools_select_model_id"}),c({key:"saler_tools_select_series_id"})},Q=e=>v(e).then((({data:t})=>{J[e]=t})),ee=e=>{"no_attachment"==e&&(G.form.goods_attachment=["no_attachment"])},te=()=>{N({url:"/addon/saler_tools/pages/product/brand",param:{type:"select"}})},ae=()=>{if(!G.form.brand_id)return T({title:p("form.before_select_brand"),icon:"none"});N({url:"/addon/saler_tools/pages/product/series",param:{type:"select",brand_id:G.form.brand_id}})},le=()=>{if(!G.form.brand_id)return T({title:p("form.before_select_brand"),icon:"none"});N({url:"/addon/saler_tools/pages/product/model",param:{type:"select",series_id:G.form.series_id,brand_id:G.form.brand_id}})},se=e=>{G.form.year=e.value[0].label,R.value=!1},oe=t(!1);return(e,t)=>{const a=h(y("up-navbar"),w),l=g,s=E,o=h(y("up-icon"),k),r=h(y("up-line"),j),d=h(y("up-text"),C),c=h(y("up-textarea"),z),x=h(y("up-input"),V),v=h(y("up-checkbox"),L),q=h(y("up-button"),U),Z=h(y("up-picker"),b),O=h(y("loading-page"),Y);return $(),i(u,null,[n(l,{style:f(e.themeColor()),class:"relative mb-[20px]"},{default:m((()=>[n(a,{title:_(p)("place_order"),autoBack:!1,safeAreaInsetTop:!0,placeholder:!0,onLeftClick:t[0]||(t[0]=e=>_(S)())},null,8,["title"]),n(l,{class:"custom-button m-2 bg-[#fff] box-border rounded"},{default:m((()=>[n(l,{class:"p-3 flex flex-col"},{default:m((()=>[n(l,{class:"flex text-[14px]"},{default:m((()=>[A(D(_(p)("appraisal_photo"))+" ",1),n(l,{class:"text-rose-500"},{default:m((()=>[A("*")])),_:1})])),_:1}),n(l,{class:"text-[#909399] text-xs mt-[10rpx] leading-4"},{default:m((()=>[n(s,null,{default:m((()=>[A(D(_(p)("appraisal_tips")),1)])),_:1})])),_:1}),n(l,{class:"flex mt-[20rpx] justify-between"},{default:m((()=>[n(B,{width:"100",height:"100","icon-size":"30",max:50,modelValue:G.form.goods_image,"onUpdate:modelValue":t[1]||(t[1]=e=>G.form.goods_image=e),"value-type":"array","result-type":"array"},{default:m((()=>[n(l,{class:"flex flex-col justify-center items-center bg-[#f4f5f7] w-[100px] h-[100px]"},{default:m((()=>[n(o,{size:"30",name:"camera-fill",color:"var(--theme-color-primary)"}),n(l,{class:"text-[#999] text-[12px]"},{default:m((()=>[A(D(_(p)("upload_photos")),1)])),_:1}),n(l,{class:"text-[#999] text-[12px] mt-[2px]"},{default:m((()=>[A(D(_(p)("max_img_count50")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),n(l,{class:"custom-button m-2 bg-[#fff] box-border rounded"},{default:m((()=>[n(l,{class:"p-3 pb-2 flex flex-col"},{default:m((()=>[n(l,{class:"flex justift-start items-center"},{default:m((()=>[n(o,{name:"/static/assets/flag.png",height:"13px",width:"8px",class:"mr-1 rounded"}),n(l,{class:"text-[var(--theme-color-main)] text-[14px]"},{default:m((()=>[n(s,{class:"font-bold"},{default:m((()=>[A(D(_(p)("is_have_attachment")),1)])),_:1}),n(s,{class:"text-[var(--theme-color-content)]"},{default:m((()=>[A(" （"+D(_(p)("multiple_choice"))+"） ",1)])),_:1})])),_:1})])),_:1}),n(l,{class:"grid grid-cols-3 mt-2 gap-2 text-[var(--theme-color-content)] text-xs leading-6"},{default:m((()=>[n(F,{modelValue:G.form.goods_attachment,"onUpdate:modelValue":t[2]||(t[2]=e=>G.form.goods_attachment=e),data:J.goods_attachment,props:{label:"name",value:"value"},format:e=>_(p)(e),onChange:ee},null,8,["modelValue","data","format"])])),_:1})])),_:1}),n(r),n(l,{class:"p-3 flex items-center justify-between text-[14px]"},{default:m((()=>[n(l,{class:"flex justift-start items-center"},{default:m((()=>[n(o,{name:"/static/assets/flag.png",height:"13px",width:"8px",class:"mr-1 rounded"}),n(l,{class:"text-[var(--theme-color-main)] font-bold"},{default:m((()=>[A(D(_(p)("form.year")),1)])),_:1})])),_:1}),n(l,{class:"flex items-center h-[14px]",onClick:t[3]||(t[3]=e=>R.value=!0)},{default:m((()=>[G.form.year?($(),I(d,{key:0,text:G.form.year,size:"14"},null,8,["text"])):($(),I(d,{key:1,color:"#C0C4CC",text:_(p)("select_year"),size:"14"},null,8,["text"])),n(o,{name:"arrow-right",size:"13",color:"#c0c4cc",class:"ml-1"})])),_:1})])),_:1}),n(r),n(l,{class:"p-3 flex flex-col"},{default:m((()=>[n(l,{class:"flex justift-start items-center text-[14px]"},{default:m((()=>[n(o,{name:"/static/assets/flag.png",height:"13px",width:"8px",class:"mr-1 rounded"}),n(l,{class:"text-[var(--theme-color-main)]"},{default:m((()=>[n(s,{class:"font-bold"},{default:m((()=>[A(D(_(p)("form.product_info")),1)])),_:1})])),_:1})])),_:1}),n(l,{class:"text-[#909399] text-xs leading-6"},{default:m((()=>[A(D(_(p)("form.product_info.tips")),1)])),_:1}),n(l,{class:"my-2 flex flex-col !box-border"},{default:m((()=>[n(c,{placeholder:_(p)("form.product_info.placeholder"),count:"",height:"50px",maxlength:"250",modelValue:G.form.goods_name,"onUpdate:modelValue":t[4]||(t[4]=e=>G.form.goods_name=e)},null,8,["placeholder","modelValue"]),n(l,{class:"h-[25px] !mt-[-30px] z-10 mx-[10px] flex justify-end items-center pr-[40px]"},{default:m((()=>[n(l,{class:"text-[24rpx] mt-[5px] mr-[5px] text-red-500",onClick:t[5]||(t[5]=e=>G.form.goods_name="")},{default:m((()=>[A(D(_(p)("form.input_clear")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),n(l,{class:"custom-button m-2 bg-[#fff] box-border rounded"},{default:m((()=>[n(l,{class:"p-3 flex items-center justify-between text-[14px]"},{default:m((()=>[n(l,{class:"flex"},{default:m((()=>[A(D(_(p)("goods_category")),1)])),_:1}),n(l,{class:"flex items-center h-[14px]",onClick:t[6]||(t[6]=e=>W.value.open())},{default:m((()=>[G.form.category_id?($(),I(l,{key:0,class:"text-[var(--theme-color-main)]"},{default:m((()=>[A(D(M.value),1)])),_:1})):($(),I(l,{key:1,class:"text-[var(--theme-input-placeholder)]"},{default:m((()=>[A(D(_(p)("select_goods_category")),1)])),_:1})),n(o,{name:"arrow-right",size:"13",color:"#c0c4cc",class:"ml-1"})])),_:1})])),_:1}),n(r),n(l,{class:"p-3 flex items-center justify-between text-[14px]"},{default:m((()=>[n(l,{class:"flex"},{default:m((()=>[A(D(_(p)("brand")),1)])),_:1}),n(l,{class:"flex items-center h-[14px]",onClick:te},{default:m((()=>[G.form.brand_id?($(),I(l,{key:0,class:"text-[var(--theme-color-main)]"},{default:m((()=>[A(D(G.form.brand_name),1)])),_:1})):($(),I(l,{key:1,class:"text-[var(--theme-input-placeholder)]"},{default:m((()=>[A(D(_(p)("form.brand_select_placeholder")),1)])),_:1})),n(o,{name:"arrow-right",size:"13",color:"#c0c4cc",class:"ml-1"})])),_:1})])),_:1}),n(r),n(l,{class:"p-3 flex items-center justify-between text-[14px]"},{default:m((()=>[n(l,{class:"flex"},{default:m((()=>[A(D(_(p)("series")),1)])),_:1}),n(l,{class:"flex items-center h-[14px]",onClick:ae},{default:m((()=>[G.form.series_id?($(),I(l,{key:0,class:"text-[var(--theme-color-main)]"},{default:m((()=>[A(D(G.form.series_name),1)])),_:1})):($(),I(l,{key:1,class:"text-[var(--theme-input-placeholder)]"},{default:m((()=>[A(D(_(p)("form.series_select_placeholder")),1)])),_:1})),n(o,{name:"arrow-right",size:"13",color:"#c0c4cc",class:"ml-1"})])),_:1})])),_:1}),n(r),n(l,{class:"p-3 flex items-center justify-between text-[14px]"},{default:m((()=>[n(l,{class:"flex"},{default:m((()=>[A(D(_(p)("model")),1)])),_:1}),n(l,{class:"flex items-center h-[14px]",onClick:le},{default:m((()=>[G.form.model_id?($(),I(l,{key:0,class:"text-[var(--theme-color-main)]"},{default:m((()=>[A(D(G.form.model_name),1)])),_:1})):($(),I(l,{key:1,class:"text-[var(--theme-input-placeholder)]"},{default:m((()=>[A(D(_(p)("form.model_select_placeholder")),1)])),_:1})),n(o,{name:"arrow-right",size:"13",color:"#c0c4cc",class:"ml-1"})])),_:1})])),_:1})])),_:1}),n(l,{class:"custom-button m-2 bg-[#fff] box-border rounded"},{default:m((()=>[n(l,{class:"p-3 flex items-center justify-between text-[14px]"},{default:m((()=>[n(l,{class:"flex"},{default:m((()=>[A(D(_(p)("goods_code")),1)])),_:1}),n(l,{class:"flex items-center h-[14px]"},{default:m((()=>[n(x,{placeholder:_(p)("input.goods_code"),border:"none",inputAlign:"right",modelValue:G.form.goods_code,"onUpdate:modelValue":t[7]||(t[7]=e=>G.form.goods_code=e),fontSize:"14",clearable:"",placeholderStyle:"color: #c0c4cc;font-size:14px;text-align: end;"},null,8,["placeholder","modelValue"])])),_:1})])),_:1}),n(l,{class:"p-3 flex items-center justify-between text-[14px] hidden"},{default:m((()=>[n(l,{class:"flex"},{default:m((()=>[A(" 独立编码位置所在示例图 ")])),_:1}),n(l,{class:"flex items-center h-[14px]"},{default:m((()=>[n(o,{name:"arrow-down",size:"13",class:"ml-1",color:"var(--theme-color-primary)",label:"更多示例图",labelColor:"var(--theme-color-primary)",labelPos:"left"})])),_:1})])),_:1})])),_:1}),n(l,{class:"",style:{"padding-bottom":"calc(env(safe-area-inset-bottom) + 80px)"}}),n(l,{class:"main-fix-footer bg-[#fff] z-100 h-[80px]",style:{"box-shadow":"var(--theme-box-shadow)"}},{default:m((()=>[n(l,{class:"flex justify-bewteen items-center w-full"},{default:m((()=>[n(l,{class:"flex-1"},{default:m((()=>[n(l,{class:"flex items-center mb-1"},{default:m((()=>[n(v,{customStyle:{margin:"0px"},usedAlone:"",checked:P.value,"onUpdate:checked":t[8]||(t[8]=e=>P.value=e),size:"14",shape:"circle"},null,8,["checked"]),n(l,{class:"text-xs"},{default:m((()=>[n(s,null,{default:m((()=>[A(D(_(p)("i_agree")),1)])),_:1}),n(s,{class:"text-[var(--theme-color-primary)]"},{default:m((()=>[A(D(_(p)("appraisal_notice")),1)])),_:1})])),_:1})])),_:1}),n(l,{class:"flex flex-1 items-baseline"},{default:m((()=>[n(s,{class:"text-xs"},{default:m((()=>[A(D(_(p)("appraisal_expense"))+"：",1)])),_:1}),n(l,{class:"flex flex-col leading-4"},{default:m((()=>[n(s,{class:"text-[var(--theme-text-red)]"},{default:m((()=>[n(s,{class:"text-xs"},{default:m((()=>[A("￥")])),_:1}),n(s,{class:"text-sm"},{default:m((()=>[A(D(G.form.cost||"0.00"),1)])),_:1})])),_:1}),n(s,{class:"line-through text-xs text-[var(--theme-color-tips)]"},{default:m((()=>[A(D(_(p)("form.original_cost")+"￥"+G.form.original_cost||"0.00"),1)])),_:1})])),_:1})])),_:1})])),_:1}),n(l,{class:"min-w-[100px]"},{default:m((()=>[n(q,{text:_(p)("immediate_payment"),onClick:t[9]||(t[9]=e=>(()=>{if(0==P.value)return void T({icon:"none",title:`${p("agreeTips")}${p("appraisal_notice")}`});if(oe.value)return;let e={...G.form};oe.value=!0,K(e).then((e=>{T({icon:"success",title:p("success")}),N({url:"/addon/saler_tools/pages/identify/lists"})})).finally((()=>{oe.value=!1}))})()),color:"var(--theme-color-primary)"},null,8,["text"])])),_:1})])),_:1})])),_:1})])),_:1},8,["style"]),n(Z,{show:R.value,columns:X,keyName:"label",onConfirm:se},null,8,["show","columns"]),n(H,{ref_key:"categoryRef",ref:W,list:J.categoryList,modelValue:G.form.category_id,"onUpdate:modelValue":t[10]||(t[10]=e=>G.form.category_id=e),isShowSubhead:!1,props:{label:"category_name",value:"category_id"},"label-title":_(p)("select_goods_category")},null,8,["list","modelValue","label-title"]),n(O,{loading:G.loading},null,8,["loading"])],64)}}}),[["__scopeId","data-v-e4476e98"]]);export{P as default};
