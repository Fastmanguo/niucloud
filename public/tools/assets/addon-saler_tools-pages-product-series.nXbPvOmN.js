import{d as e,W as a,H as s,C as l,s as t,aC as r,G as o,c as n,w as c,n as i,i as u,ar as d,as as p,b as m,D as _,e as f,aJ as b,o as h,f as g,u as y,a5 as U,a6 as C,at as S,p as k,t as w,cK as I,au as P,_ as v}from"./index-DlbBJ3bC.js";import{_ as j}from"./mescroll-body.CzShuCTj.js";import"./mescroll-empty.lkR5ZfjC.js";const q=v(e({__name:"series",setup(e){const{mescrollInit:v,getMescroll:q}=function(e,a){let s=null;return e&&e((e=>{s&&s.onPageScroll(e)})),a&&a((()=>{s&&s.onReachBottom()})),{getMescroll:()=>s,mescrollInit:e=>{s=e},downCallback:()=>{s.optUp.use?s.resetUpScroll():setTimeout((()=>{s.endSuccess()}),500)},upCallback:()=>{setTimeout((()=>{s.endErr()}),500)}}}(p,d),x=a({loading:!0,searchParams:{series_name:null,brand_id:null},mescrollUp:{auto:!1,page:{size:50}},list:[],mescrollRef:null,type:""}),R=e=>{let a={page:e.num,limit:e.size,...x.searchParams};I(a).then((a=>{1==e.num&&(x.list=[]),x.list=x.list.concat(a.data.data),e.endSuccess(a.data.data.length)}))},T=()=>{q().resetUpScroll(!0)};s((e=>{if(!e.brand_id)return l({title:t("pages.series.brand_required")});x.type=e.type||"",x.loading=!0,x.searchParams.brand_id=e.brand_id,r((()=>{q().resetUpScroll()}))})),o();return(e,a)=>{const s=m(f("up-navbar"),_),r=m(f("up-search"),b),o=u,d=m(f("mescroll-body"),j);return h(),n(o,{style:i(e.themeColor())},{default:c((()=>[g(s,{title:y(t)("pages.series.brand_required"),autoBack:!0,safeAreaInsetTop:!0,placeholder:!0},null,8,["title"]),g(o,{class:"bg-[#fff] p-2 box-border w-full"},{default:c((()=>[g(r,{placeholder:"搜索系列名称",shape:"square",showAction:!1,modelValue:x.searchParams.series_name,"onUpdate:modelValue":a[0]||(a[0]=e=>x.searchParams.series_name=e),onSearch:T},null,8,["modelValue"])])),_:1}),g(d,{ref:e=>x.mescrollRef=e,onInit:y(v),down:{auto:!1},up:x.mescrollUp,onUp:R,onDown:R,top:"0",auto:!1},{default:c((()=>[(h(!0),U(C,null,S(x.list,((e,a)=>(h(),n(o,{key:a,class:"page-item",onClick:a=>{return s=e,void("select"==x.type&&(P("saler_tools_select_series_id",s),l()));var s}},{default:c((()=>[k(w(e.series_name),1)])),_:2},1032,["onClick"])))),128))])),_:1},8,["onInit","up"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-768b88f2"]]);export{q as default};
