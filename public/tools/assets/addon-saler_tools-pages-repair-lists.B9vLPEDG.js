import{d as e,W as l,s as a,r as t,E as s,a3 as o,aC as c,x as r,a5 as n,f as u,w as d,n as i,a6 as m,i as f,b as p,aZ as x,e as _,ah as h,ar as b,as as v,l as y,D as g,aJ as k,ci as w,cj as C,cr as j,cs as P,m as U,aL as z,N as S,O as V,aM as E,a4 as I,cg as R,o as q,g as B,u as H,at as M,c as T,a7 as A,p as O,t as D,R as F,v as J,h as K,q as L,M as N,a as W,aS as Z,_ as $}from"./index-DlbBJ3bC.js";import{_ as G}from"./mescroll-body.CzShuCTj.js";import{u as Q}from"./useMescroll.lU6SPXzn.js";import{s as X}from"./index.Bh4RlGGN.js";import{g as Y,a as ee}from"./service.CO0k3-RB.js";import"./mescroll-empty.lkR5ZfjC.js";import"./index.DK0m-eAv.js";import"./index.COs-0cDI.js";import"./auth.BQpGjoDu.js";/* empty css                                                              *//* empty css                                                                     */const le=$(e({__name:"lists",setup(e){const $=l({list:[],searchParams:{search:"",category_id:null,__order__:"",status:0},mescrollUp:{page:{size:10}},stat:{order_count:0,total_cost:0,total_money:0},mescrollRef:null,isH5:!1}),le=()=>{ee({status:$.searchParams.status}).then((e=>{$.stat=e.data}))},ae=e=>{let l={page:e.num,limit:e.size,...$.searchParams};console.log("page-searchParams:",$.searchParams),1==e.num&&($.list=[]),ve.value=!0,Y(l).then((l=>{let a=l.data.data;1==e.num&&($.list=[]),$.list=$.list.concat(a),e.endSuccess(l.data.data.length),ve.value=!1})).catch((()=>{ve.value=!1,e.endErr()})),le()},te=l([{label:a("in_progress"),value:"progress"},{label:a("completed"),value:"finish"},{label:a("cancelled"),value:"cancel"}]),se=t(null),oe=t(),ce=t(!1),re=t(!1),ne=t(!1),ue=t(!1),de=t(a("by_latest_repair")),ie=l([{label:a("by_latest_repair"),value:"create_time,desc"},{label:a("by_longest_repair"),value:"create_time,asc"}]),me=s((()=>$.list.filter((e=>e.selected)).length)),fe=l({name:a("select_all"),selected:!1}),pe=l({name:a("reverse"),selected:!1}),xe=()=>{$.list.forEach(((e,l)=>{e.selected=!fe.selected})),fe.selected=!fe.selected},_e=()=>{$.list.forEach(((e,l)=>{e.selected=!e.selected})),$.list.some((e=>!e.selected))?fe.selected=!1:fe.selected=!0},{mescrollInit:he,getMescroll:be}=Q(v,b),ve=t(!0),ye={top:0},ge=()=>{Z().select(".custom-overlay").boundingClientRect((e=>{ye.top=e.top+36})).exec()};return $.isH5=!0,o((()=>{c((()=>{ge()}))})),r((()=>{c((()=>{ge()}))})),(e,l)=>{const t=p(_("up-icon"),y),s=f,o=p(_("up-navbar"),g),c=p(_("up-search"),k),r=p(_("up-radio"),w),b=p(_("up-radio-group"),C),v=p(_("up-overlay"),j),Z=p(_("up-sticky"),P),Q=L,Y=p(_("up-image"),U),ee=p(_("up-text"),z),ve=p(_("up-checkbox"),S),ge=p(_("up-checkbox-group"),V),ke=p(_("up-divider"),E),we=p(_("mescroll-body"),G),Ce=p(_("up-button"),I),je=p(_("up-line"),R),Pe=p(_("up-popup"),x),Ue=p(_("up-modal"),h);return q(),n(m,null,[u(s,{style:i(e.themeColor())},{default:d((()=>[u(Z,{bgColor:"#f3f4f6"},{default:d((()=>[u(o,{title:H(a)("maintenance"),autoBack:!0,safeAreaInsetTop:!0,placeholder:!$.isH5},{center:d((()=>[u(s,null,{default:d((()=>[u(t,{name:"question-circle",label:H(a)("maintenance"),labelPos:"left",onClick:l[0]||(l[0]=e=>ce.value=!0),labelSize:"16",size:"18",color:"var(--theme-color-tips)",labelColor:"var(--theme-color-main)"},null,8,["label"])])),_:1})])),_:1},8,["title","placeholder"]),u(s,{class:"mescroll-fixed-header !bg-[#f4f4f4]"},{default:d((()=>[u(s,{class:"bg-[#fff] p-2"},{default:d((()=>[u(c,{placeholder:H(a)("maintenance_search"),shape:"square",showAction:!1},null,8,["placeholder"])])),_:1}),u(s,{class:"px-1 pb-2 flex justify-between items-center text-xs text-[var(--theme-color-content)] bg-[#fff] w-full box-border"},{default:d((()=>[(q(!0),n(m,null,M(te,((e,l)=>(q(),T(s,{key:l,class:"w-full box-border",onClick:l=>(e=>{se.value=e.label,$.searchParams.status=e.value,le(),be().resetUpScroll()})(e)},{default:d((()=>[u(s,{class:A(["!bg-[var(--theme-bg)] rounded flex-1 mx-1 py-2 text-center border-[1px] border-solid border-[var(--theme-bg)]",{"!bg-[#e0b87a10] border-[1px] border-solid !border-[var(--theme-color-primary)] text-[var(--theme-color-primary)]":se.value==e.label}])},{default:d((()=>[O(D(e.label),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1}),u(s,{class:"custom-overlay h-[35px] px-3 mt-[5px] text-[var(--theme-color-main)] flex justify-between items-center w-full box-border text-[13px] bg-[#fff]"},{default:d((()=>[u(s,{class:"mt-[5px] flex mr-5",onClick:l[2]||(l[2]=e=>ue.value=!ue.value)},{default:d((()=>[u(s,{class:"flex justify-start items-center"},{default:d((()=>[O(D(de.value)+" ",1),u(t,{name:"arrow-down",bold:"",size:"13",class:"ml-1",onClick:l[1]||(l[1]=()=>{}),color:"var(--theme-color-main)"})])),_:1})])),_:1}),u(s,{class:"flex justify-start items-center",onClick:l[4]||(l[4]=e=>oe.value.open())},{default:d((()=>[O(D(H(a)("screen"))+" ",1),u(t,{name:"/static/assets/stock/screen.png",bold:"",size:"16",class:"ml-1",onClick:l[3]||(l[3]=()=>{}),color:"var(--theme-color-main)"})])),_:1})])),_:1})])),_:1}),u(v,{class:"sort-card",show:ue.value,onClick:l[7]||(l[7]=e=>ue.value=!1),style:i({top:ye.top+"px"})},{default:d((()=>[B(u(b,{modelValue:de.value,"onUpdate:modelValue":l[5]||(l[5]=e=>de.value=e),placement:"column",iconPlacement:"right",onClick:l[6]||(l[6]=F((()=>{}),["stop"])),activeColor:"#fff",iconColor:"#000",class:"px-3 py-2 box-border bg-[#fff] border-none"},{default:d((()=>[(q(!0),n(m,null,M(ie,((e,l)=>(q(),T(r,{customStyle:{marginBottom:"2px",marginTop:"2px"},key:l,iconSize:"20",onChange:l=>(e=>{de.value=e,$.searchParams.__order__=e.value,be().scrollTo(0,300),be().resetUpScroll(),le(),ue.value=!1})(e),iconColor:"var(--theme-color-main)",labelSize:"13",label:e.label,labelColor:de.value==e.label?"var(--theme-color-main)":"var(--theme-color-tips)",name:e.label},null,8,["onChange","label","labelColor","name"])))),128))])),_:1},8,["modelValue"]),[[J,ue.value]])])),_:1},8,["show","style"])])),_:1}),u(we,{ref:"mescrollRef",onInit:H(he),onUp:ae,onDown:ae,up:$.mescrollUp,top:0,class:A($.isH5?"mt-[44px]":"")},{default:d((()=>[u(s,{class:"flex justify-between items-center text-xs text-[var(--theme-color-content)] bg-[#fff] w-full box-border p-2 pb-3 mb-1"},{default:d((()=>[u(s,{class:"flex-1 flex text-center flex-col items-center mr-1"},{default:d((()=>[u(s,{class:"mb-1 text-[var(--theme-color-primary)] text-sm"},{default:d((()=>[O(D($.stat.order_count),1)])),_:1}),u(s,null,{default:d((()=>[O(D(H(a)("repair")),1)])),_:1})])),_:1}),u(s,{class:"flex-1 flex text-center flex-col items-center mr-1"},{default:d((()=>[u(s,{class:"mb-1 text-[var(--theme-color-primary)] text-sm"},{default:d((()=>[O(D($.stat.total_money),1)])),_:1}),u(s,null,{default:d((()=>[O(D(H(a)("service_cost")),1)])),_:1})])),_:1}),u(s,{class:"flex-1 flex text-center flex-col items-center mr-1"},{default:d((()=>[u(s,{class:"mb-1 text-[var(--theme-color-primary)] text-sm"},{default:d((()=>[O(D($.stat.total_cost),1)])),_:1}),u(s,null,{default:d((()=>[O(D(H(a)("charge_amount")),1)])),_:1})])),_:1})])),_:1}),$.list.length?(q(),T(s,{key:0},{default:d((()=>[(q(!0),n(m,null,M($.list,((e,l)=>(q(),n(m,null,[u(s,{class:"flex flex-col p-3 bg-[#fff] box-border",onClick:l=>((e,l)=>{l||W({url:`/addon/saler_tools/pages/repair/detail?service_id=${e.service_id}`})})(e,ne.value)},{default:d((()=>[u(s,{class:"text-xs mb-1 flex justify-between items-center"},{default:d((()=>[u(s,null,{default:d((()=>[u(Q,null,{default:d((()=>[O(D(H(a)("salesman"))+"：",1)])),_:1}),u(Q,null,{default:d((()=>[O(D(e.sales_name),1)])),_:2},1024)])),_:2},1024),u(s,{class:"text-[var(--theme-color-tips)]"},{default:d((()=>[O(D(e.update_time),1)])),_:2},1024)])),_:2},1024),u(s,{class:"flex justify-between items-center min-h-[90px]"},{default:d((()=>[u(Y,{"show-loading":!0,src:H(N)(e.goods_cover),mode:"aspectFit",width:"100px",radius:"5",height:"100px"},null,8,["src"]),u(s,{class:"flex justify-between flex-col flex-1 pl-2 min-h-[90px]"},{default:d((()=>[u(s,{class:"flex items-baseline leading-5 text-[14px] card-item flex-1"},{default:d((()=>[u(s,{class:"text-[var(--theme-color-main)] flex-1"},{default:d((()=>[u(ee,{lines:2,text:e.goods_name},null,8,["text"])])),_:2},1024),B(u(s,{class:"ml-1"},{default:d((()=>[u(ge,{placement:"column"},{default:d((()=>[(q(),T(ve,{key:l,checked:e.selected,"onUpdate:checked":l=>e.selected=l,shape:"circle",onChange:l=>(e=>{e.selected=!e.selected,$.list.some((e=>!e.selected))?fe.selected=!1:fe.selected=!0})(e),activeColor:"var(--theme-color-primary)"},null,8,["checked","onUpdate:checked","onChange"]))])),_:2},1024)])),_:2},1536),[[J,ne.value]])])),_:2},1024),e.additional_cost.length?(q(!0),n(m,{key:0},M(e.additional_cost,((e,l)=>(q(),T(s,{class:"text-[var(--theme-color-primary)] text-[13px] leading-5 flex justify-between items-center"},{default:d((()=>[u(Q,null,{default:d((()=>[O(D(e.cost_name),1)])),_:2},1024),u(Q,{class:"ml-1"},{default:d((()=>[u(Q,null,{default:d((()=>[O("￥")])),_:1}),u(Q,null,{default:d((()=>[O(D(e.money),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256)):K("",!0),u(s,{class:"flex justify-between items-center text-xs leading-5"},{default:d((()=>[u(s,{class:"flex-1 text-[var(--theme-color-tips)]"},{default:d((()=>[O(D(H(a)("service_cost"))+" ",1),u(Q,null,{default:d((()=>[O("￥")])),_:1}),u(Q,null,{default:d((()=>[O(D(e.expect_cost),1)])),_:2},1024)])),_:2},1024),u(s,{class:"text-[var(--theme-text-red)]"},{default:d((()=>[O(D(H(a)("charge_amount"))+" ",1),u(Q,null,{default:d((()=>[O("￥")])),_:1}),u(Q,null,{default:d((()=>[O(D(e.cost),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),u(ke,{class:"!p-0 !m-0"})],64)))),256))])),_:1})):K("",!0)])),_:1},8,["onInit","up","class"]),B(u(s,{class:"main-fix-footer flex justify-between items-center",style:{"box-shadow":"var(--theme-box-shadow)"}},{default:d((()=>[u(s,{class:"flex flex-1 items-center justify-start text-base"},{default:d((()=>[u(ge,{placement:"row",activeColor:"var(--theme-color-primary)"},{default:d((()=>[u(ve,{checked:fe.selected,"onUpdate:checked":l[8]||(l[8]=e=>fe.selected=e),shape:"circle",label:fe.name,onChange:xe},null,8,["checked","label"])])),_:1}),B(u(s,{class:"text-sm"},{default:d((()=>[O(" ("+D(me.value)+") ",1)])),_:1},512),[[J,0!=me.value]]),u(s,{class:"ml-5"},{default:d((()=>[u(ge,{placement:"row",activeColor:"var(--theme-color-primary)"},{default:d((()=>[u(ve,{checked:pe.selected,"onUpdate:checked":l[9]||(l[9]=e=>pe.selected=e),shape:"circle",label:pe.name,onChange:_e},null,8,["checked","label"])])),_:1})])),_:1})])),_:1}),u(s,{class:"text-[var(--theme-color-primary)] text-sm",onClick:l[10]||(l[10]=e=>re.value=!0)},{default:d((()=>[O(D(H(a)("delete")),1)])),_:1})])),_:1},512),[[J,ne.value]]),B(u(s,{class:"main-fix-footer",style:{"box-shadow":"var(--theme-box-shadow)"}},{default:d((()=>[u(Ce,{text:H(a)("add"),class:"!text-[#fff] !bg-[var(--theme-color-primary)] !border-none",onClick:l[11]||(l[11]=e=>H(W)({url:"/addon/saler_tools/pages/repair/edit?type=add"}))},null,8,["text"])])),_:1},512),[[J,!ne.value]])])),_:1},8,["style"]),u(X,{ref_key:"screenPopupRef",ref:oe,modelValue:$.searchParams,"onUpdate:modelValue":l[12]||(l[12]=e=>$.searchParams=e)},null,8,["modelValue"]),u(Pe,{show:ce.value,mode:"bottom",onClose:l[14]||(l[14]=e=>ce.value=!1),onOpen:l[15]||(l[15]=e=>ce.value=!0)},{default:d((()=>[u(s,{class:"p-4 flex justify-between items-center"},{default:d((()=>[u(s),u(s,{class:"flex !text-center font-bold text-[30rpx]"},{default:d((()=>[O(D(H(a)("maintenance")),1)])),_:1}),u(t,{name:"close",size:"15",onClick:l[13]||(l[13]=e=>ce.value=!1)})])),_:1}),u(je),u(s,{class:"p-4 flex flex-col"},{default:d((()=>[u(s,null,{default:d((()=>[O(D(H(a)("maintenance.tips0")),1)])),_:1}),u(s,{style:{"text-indent":"1em"}},{default:d((()=>[O(D(H(a)("maintenance.tips1")),1)])),_:1}),u(s,{style:{"text-indent":"1em"}},{default:d((()=>[O(D(H(a)("maintenance.tips2")),1)])),_:1})])),_:1})])),_:1},8,["show"]),u(Ue,{show:re.value,"onUpdate:show":l[18]||(l[18]=e=>re.value=e),width:300,showConfirmButton:!1,contentTextAlign:"center"},{confirmButton:d((()=>[u(s,{class:"flex gap-3"},{default:d((()=>[u(Ce,{onClick:l[16]||(l[16]=e=>re.value=!1),class:"!text-[#303133]",color:"#f4f5f7",text:H(a)("cancel")},null,8,["text"]),u(Ce,{text:H(a)("OK"),onClick:l[17]||(l[17]=e=>($.list.map(((e,l)=>e.selected?l:-1)).filter((e=>-1!==e)).sort(((e,l)=>l-e)).forEach((e=>{$.list.splice(e,1)})),ne.value=!1,void(re.value=!1))),color:"#e0b87a"},null,8,["text"])])),_:1})])),default:d((()=>[u(s,{class:"flex flex-col !box-border w-full text-[var(--theme-color-main)]"},{default:d((()=>[O(D(H(a)("confirm_delete_select_receipt")),1)])),_:1})])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-36bb6a4e"]]);export{le as default};
