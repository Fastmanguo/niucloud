import{d as e,a2 as a,W as l,s as o,r as t,ac as r,c as i,w as s,n as d,i as n,b as m,m as p,e as u,Y as c,Z as f,a4 as _,$ as b,o as g,f as x,u as h,M as v,p as w,t as y,a as V,K as z,_ as S}from"./index-DlbBJ3bC.js";import{e as k,u as W}from"./user.BwIQgQ7o.js";import{b as q}from"./browser.BTH0nPVW.js";const B=S(e({__name:"register",setup(e){const S=a(),B=l({form:{real_name:"",email:"",code:"",invitation_code:"",password:"",again_password:""},rules:{real_name:{type:"string",required:!0,message:o("input.real_name.tips"),trigger:["blur","change"]},email:{type:"string",required:!0,pattern:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/,message:o("input.effective_email.tips"),trigger:["blur","change"]},code:{type:"string",required:!0,message:o("input.code.tips"),trigger:["blur","change"]},invitation_code:{type:"string",required:!1,trigger:["blur"]},password:{type:"string",required:!0,message:o("input.password.tips"),trigger:["blur"]},again_password:{type:"string",required:!0,validator:(e,a,l)=>{a!==B.form.password?l(o("input.confirm_password.tips2")):l()},message:o("input.confirm_password.tips2"),trigger:["blur","change"]}},formRef:null,isEmailValid:!1,isFormValid:!1}),U=t(60),C=t(!1);r((()=>B.form.email),(e=>{B.rules.email.pattern.test(e)?B.isEmailValid=!0:B.isEmailValid=!1})),r((()=>B.form.again_password),(()=>{B.form.again_password&&(B.isFormValid=B.form.again_password===B.form.password)}),{deep:!0});const E=()=>{k({email:B.form.email}).then((()=>{z({title:o("code_success"),icon:"none"}),j()})).catch((()=>{z({title:o("code_error"),icon:"none"})}))},j=()=>{C.value=!0;let e=setInterval((()=>{U.value--,U.value<=0&&(clearInterval(e),U.value=60,C.value=!1)}),1e3)},Z=()=>{W({email:B.form.email,code:B.form.code,real_name:B.form.real_name,password:B.form.password,invitation_code:B.form.invitation_code}).then((()=>{z({title:o("success"),icon:"none"}),q.nextTick((()=>{V({url:"/app/pages/auth/login"})}))})).catch((()=>{z({title:o("error"),icon:"none"})}))};return(e,a)=>{const l=m(u("up-image"),p),t=n,r=m(u("up-input"),c),z=m(u("up-form-item"),f),k=m(u("up-button"),_),W=m(u("up-form"),b);return g(),i(t,{style:d(e.themeColor())},{default:s((()=>[x(t,{class:"my-20 px-5"},{default:s((()=>[x(t,{class:"flex items-center mb-5"},{default:s((()=>[x(l,{"show-loading":!0,src:h(v)(h(S).app_logo),width:"50px",height:"50px",radius:"50px"},null,8,["src"]),x(t,{class:"ml-2 text-base text-[var(--theme-color-main)] font-semibold"},{default:s((()=>[x(t,{class:"font-serif subpixel-antialiased"},{default:s((()=>[w(y(h(S).app_name),1)])),_:1}),x(t,{class:"text-[var(--theme-color-main)]"},{default:s((()=>[w(y(h(o)("register_account")),1)])),_:1})])),_:1})])),_:1}),x(W,{labelPosition:"left",model:B.form,rules:B.rules,ref:"state.formRef"},{default:s((()=>[x(z,{label:h(o)("form.real_name"),prop:"real_name",borderBottom:"",ref:"item1",labelWidth:"100px",labelStyle:"font-size: 14px;"},{default:s((()=>[x(r,{clearable:"",modelValue:B.form.real_name,"onUpdate:modelValue":a[0]||(a[0]=e=>B.form.real_name=e),placeholder:h(o)("input.real_name.tips"),fontSize:"14px"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),x(z,{label:h(o)("form.email"),prop:"email",borderBottom:"",ref:"item1",labelWidth:"100px",labelStyle:"font-size: 14px;"},{default:s((()=>[x(r,{clearable:"",modelValue:B.form.email,"onUpdate:modelValue":a[1]||(a[1]=e=>B.form.email=e),placeholder:h(o)("input.email.tips"),fontSize:"14px"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),x(z,{label:h(o)("form.code"),prop:"code",borderBottom:"",ref:"item1",labelWidth:"100px",labelStyle:"font-size: 14px;"},{default:s((()=>[x(r,{clearable:"",modelValue:B.form.code,"onUpdate:modelValue":a[2]||(a[2]=e=>B.form.code=e),placeholder:h(o)("input.code.tips"),fontSize:"14px"},{suffix:s((()=>[C.value?(g(),i(k,{key:1,text:U.value+h(o)("try_again_in_seconds"),size:"mini",color:"var(--theme-color-primary)",onClick:E,disabled:!B.isEmailValid||C.value},null,8,["text","disabled"])):(g(),i(k,{key:0,text:h(o)("get.code"),size:"mini",color:"var(--theme-color-primary)",onClick:E,disabled:!B.isEmailValid||C.value},null,8,["text","disabled"]))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),x(z,{label:h(o)("form.invitation_code"),prop:"invitation_code",borderBottom:"",ref:"item1",labelWidth:"100px",labelStyle:"font-size: 14px;"},{default:s((()=>[x(r,{clearable:"",modelValue:B.form.invitation_code,"onUpdate:modelValue":a[3]||(a[3]=e=>B.form.invitation_code=e),placeholder:h(o)("input.invitation_code.tips"),fontSize:"14px"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),x(z,{label:h(o)("form.password"),prop:"password",borderBottom:"",ref:"item1",labelWidth:"100px",labelStyle:"font-size: 14px;"},{default:s((()=>[x(r,{clearable:"",modelValue:B.form.password,"onUpdate:modelValue":a[4]||(a[4]=e=>B.form.password=e),placeholder:h(o)("input.password.tips"),fontSize:"14px",type:"password"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),x(z,{label:h(o)("form.confirm_password"),prop:"again_password",borderBottom:"",ref:"item1",labelWidth:"100px",labelStyle:"font-size: 14px;"},{default:s((()=>[x(r,{clearable:"",modelValue:B.form.again_password,"onUpdate:modelValue":a[5]||(a[5]=e=>B.form.again_password=e),placeholder:h(o)("input.confirm_password.tips"),fontSize:"14px",type:"password"},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model","rules"]),x(t,{class:"my-5"},{default:s((()=>[x(k,{text:h(o)("register_btn"),onClick:Z,disabled:!B.isFormValid,color:"var(--theme-color-primary)"},null,8,["text","disabled"]),x(t,{class:"text-xs text-center my-3 text-[var(--theme-color-content)] flex justify-center items-center",onClick:a[6]||(a[6]=e=>h(V)({url:"/app/pages/auth/login"}))},{default:s((()=>[x(t,null,{default:s((()=>[w(y(h(o)("account_exist")),1)])),_:1}),x(t,{class:"text-[var(--theme-text-blue)]"},{default:s((()=>[w(y(h(o)("go_login")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["style"])}}}),[["__scopeId","data-v-c333b9df"]]);export{B as default};
