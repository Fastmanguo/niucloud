import{d as e,W as l,cq as t,E as a,r as s,s as o,a3 as r,x as c,H as n,C as i,a5 as d,f as m,w as u,n as f,a6 as p,aS as _,i as x,b as h,ah as b,e as v,ar as g,as as y,D as k,aJ as w,aI as C,l as j,cs as z,aM as P,ci as S,cj as U,cr as I,m as V,aL as T,N as B,O as A,a4 as E,o as H,u as O,g as q,p as M,t as R,v as K,R as L,at as W,c as D,a7 as F,h as N,M as $,a as J,K as G,_ as Q}from"./index-DlbBJ3bC.js";import{_ as X}from"./mescroll-body.CzShuCTj.js";import{u as Y}from"./useMescroll.lU6SPXzn.js";import{e as Z}from"./warehouse.CvI1Ck4Y.js";import{c as ee,k as le}from"./goods.dvxeGb_d.js";import{g as te}from"./common.1SKFK1N4.js";import{s as ae}from"./index.Bh4RlGGN.js";import{b as se}from"./browser.BTH0nPVW.js";import"./mescroll-empty.lkR5ZfjC.js";import"./index.DK0m-eAv.js";import"./index.COs-0cDI.js";import"./auth.BQpGjoDu.js";/* empty css                                                              *//* empty css                                                                     */const oe=Q(e({__name:"detail",setup(e){const Q=l({store_id:0,storeInfo:null,searchParams:{search:"",category_id:null,is_sale:null,__order__:"",store:0,goods_attribute:""},mescrollUp:{page:{size:10}},list:[],loading:!0,isH5:!1}),oe=t(),re=a({get:()=>[{category_key:"ALL",category_id:null},...oe.value],set(e){}}),ce=e=>{Q.searchParams.category_id=e.category_id,ve().scrollTo(0,300),ve().resetUpScroll()},ne=s(!1),ie=s(!1),de=s(!1),me=s(!1),ue=s(!1),fe=s(o("by_latest_update")),pe=l([{label:o("by_latest_update"),value:""},{label:o("by_longest_update"),value:"update_time,asc"},{label:o("by_latest_storage"),value:"create_time,desc"},{label:o("by_longest_storage"),value:"create_time,asc"},{label:o("by_highest_price"),value:"price,desc"},{label:o("by_lowest_price"),value:"price,asc"}]),_e=s(!0),xe=s(),he=e=>{let l={page:e.num,limit:e.size,...Q.searchParams};console.log("loadPage-state.searchParams",Q.searchParams),1==e.num&&(Q.list=[]),Q.loading=!0,ee(l).then((l=>{let t=l.data.data;1==e.num&&(Q.list=[]),Q.list=Q.list.concat(t),Q.list.forEach((e=>{e.selected=!1})),e.endSuccess(l.data.data.length),Q.loading=!1})).catch((()=>{e.endErr()}))},{mescrollInit:be,getMescroll:ve}=Y(y,g),ge=e=>{e.selected=!e.selected,Q.list.some((e=>!e.selected))?ke.selected=!1:ke.selected=!0},ye=a((()=>Q.list.filter((e=>e.selected)).length)),ke=l({name:o("select_all"),selected:!1}),we=l({name:o("reverse"),selected:!1}),Ce=()=>{Q.list.forEach(((e,l)=>{e.selected=!ke.selected})),ke.selected=!ke.selected},je=()=>{Q.list.forEach(((e,l)=>{e.selected=!e.selected})),Q.list.some((e=>!e.selected))?ke.selected=!1:ke.selected=!0};Q.isH5=!0;const ze=l({top:0}),Pe=()=>{_().select(".custom-overlay").boundingClientRect((e=>{ze.top=e.top+36})).exec()};return r((()=>{se.nextTick((()=>{Pe()}))})),c((()=>{se.nextTick((()=>{Pe()}))})),n((async e=>{e.store_id?(Q.store_id=e.store_id,Q.searchParams.store_id=Q.store_id,await Z(Q.store_id).then((({data:e})=>{Q.storeInfo=e})).catch((e=>i({title:e.msg,url:"/addon/saler_tools/pages/store/list"})))):Q.searchParams.store_id="temp_store"})),(e,l)=>{const t=x,a=h(v("up-navbar"),k),s=h(v("up-search"),w),r=h(v("up-tabs"),C),c=h(v("up-icon"),j),n=h(v("up-sticky"),z),i=h(v("up-divider"),P),_=h(v("up-radio"),S),g=h(v("up-radio-group"),U),y=h(v("up-overlay"),I),Y=h(v("up-image"),V),Z=h(v("up-text"),T),ee=h(v("up-checkbox"),B),se=h(v("up-checkbox-group"),A),oe=h(v("mescroll-body"),X),Pe=h(v("up-button"),E),Se=h(v("up-modal"),b);return H(),d(p,null,[m(t,{style:f(e.themeColor())},{default:u((()=>[m(n,{bgColor:"#f3f4f6"},{default:u((()=>[m(a,{title:Q.storeInfo?Q.storeInfo.store_name:O(o)("temporary"),autoBack:!0,safeAreaInsetTop:!0,placeholder:!Q.isH5},{right:u((()=>[m(t,{class:"u-nav-slot"},{default:u((()=>[q(m(t,{onClick:l[0]||(l[0]=e=>ne.value=!0),class:"text-xs text-[var(--theme-color-content)]"},{default:u((()=>[M(R(O(o)("operate")),1)])),_:1},512),[[K,!ne.value]]),q(m(t,{onClick:l[1]||(l[1]=e=>ne.value=!1),class:"text-xs text-[var(--theme-color-content)]"},{default:u((()=>[M(R(O(o)("cancel")),1)])),_:1},512),[[K,ne.value]])])),_:1})])),_:1},8,["title","placeholder"]),m(t,{class:"mescroll-fixed-header !bg-[#f4f4f4]"},{default:u((()=>[m(t,{class:"bg-[#fff] p-2"},{default:u((()=>[m(s,{placeholder:O(o)("search_placeholder"),shape:"square",modelValue:Q.searchParams.search,"onUpdate:modelValue":l[2]||(l[2]=e=>Q.searchParams.search=e),onChange:l[3]||(l[3]=e=>(Q.list=[],void ve().resetUpScroll())),showAction:!1},null,8,["placeholder","modelValue"])])),_:1}),m(t,{class:"bg-[#fff]"},{default:u((()=>[m(r,{style:{"white-space":"nowrap !important"},list:re.value,keyName:"category_name",activeStyle:"color:var(--theme-color-primary);font-size:16px",lineWidth:"30",onChange:ce,lineColor:"var(--theme-color-primary)",inactiveStyle:"color:var(--theme-color-main);font-size:13px",itemStyle:"padding:5px 10px;z-index:2;display: inline-block"},{content:u((e=>[M(R(O(o)(e.item.category_key)),1)])),_:1},8,["list"])])),_:1}),m(t,{class:"custom-overlay h-[35px] px-3 mt-[5px] text-[var(--theme-color-main)] flex justify-between items-center w-full box-border text-[13px] bg-[#fff]"},{default:u((()=>[m(t,{class:"flex items-center flex-1"},{default:u((()=>[m(t,{class:"flex mr-5",onClick:l[5]||(l[5]=e=>ue.value=!ue.value)},{default:u((()=>[m(t,{class:"flex justify-start items-center"},{default:u((()=>[M(R(fe.value)+" ",1),m(c,{name:"arrow-down",bold:"",size:"13",class:"ml-1",onClick:l[4]||(l[4]=()=>{}),color:"var(--theme-color-main)"})])),_:1})])),_:1}),m(t,{class:"flex justify-start items-center"},{default:u((()=>[M(R(_e.value?O(o)("item_show"):O(o)("item_hide"))+R(O(o)("all_info"))+" ",1),m(c,{name:_e.value?"eye":"eye-off",bold:"",size:"16",class:"ml-1",onClick:l[6]||(l[6]=e=>_e.value=!_e.value),color:"var(--theme-color-main)"},null,8,["name"])])),_:1})])),_:1}),m(t,{class:"flex justify-start items-center",onClick:l[8]||(l[8]=e=>xe.value.open())},{default:u((()=>[M(R(O(o)("screen"))+" ",1),m(c,{name:"/static/assets/stock/screen.png",bold:"",size:"16",class:"ml-1",onClick:l[7]||(l[7]=()=>{}),color:"var(--theme-color-main)"})])),_:1})])),_:1})])),_:1})])),_:1}),m(t,{class:"flex justify-between items-center text-xs text-[var(--theme-color-content)] bg-[#fff] w-full box-border py-3 hidden"},{default:u((()=>[m(t,{class:"flex-1 flex text-center flex-col items-center mr-1"},{default:u((()=>[m(t,{class:"mb-1 text-[var(--theme-color-main)] text-sm"},{default:u((()=>[M("0")])),_:1}),m(t,null,{default:u((()=>[M("总数量")])),_:1})])),_:1}),m(t,{class:"flex-1 flex text-center flex-col items-center mr-1"},{default:u((()=>[m(t,{class:"mb-1 text-[var(--theme-color-main)] text-sm"},{default:u((()=>[M(" 850,504 ")])),_:1}),m(t,null,{default:u((()=>[M("总销量")])),_:1})])),_:1}),m(t,{class:"flex-1 flex text-center flex-col items-center mr-1"},{default:u((()=>[m(t,{class:"mb-1 text-[var(--theme-color-main)] text-sm"},{default:u((()=>[M(" 106,850,504 ")])),_:1}),m(c,{name:"question-circle",label:"总成本",labelPos:"left",onClick:l[9]||(l[9]=e=>me.value=!0),labelSize:"14",size:"14",color:"var(--theme-color-primary)",labelColor:"var(--theme-color-primary)",class:"mr-1"})])),_:1})])),_:1}),m(i,{class:"!m-0",hairline:!0}),m(t,{class:"p-3 pt-2 flex justify-end items-center mb-1 bg-[#fff] hidden"},{default:u((()=>[m(c,{name:"arrow-right",label:"临时仓操作日志",labelPos:"left",labelSize:"14",size:"14",space:"1",color:"var(--theme-color-tips)",labelColor:"var(--theme-color-tips)"})])),_:1}),m(y,{class:"sort-card",show:ue.value,onClick:l[12]||(l[12]=e=>ue.value=!1),style:f({top:ze.top+"px"})},{default:u((()=>[q(m(g,{modelValue:fe.value,"onUpdate:modelValue":l[10]||(l[10]=e=>fe.value=e),placement:"column",iconPlacement:"right",onClick:l[11]||(l[11]=L((()=>{}),["stop"])),activeColor:"#fff",iconColor:"#000",class:"px-3 py-2 box-border bg-[#fff] border-none"},{default:u((()=>[(H(!0),d(p,null,W(pe,((e,l)=>(H(),D(_,{customStyle:{marginBottom:"2px",marginTop:"2px"},key:l,iconSize:"20",onChange:l=>(e=>{fe.value=e,Q.searchParams.__order__=e.value,ve().resetUpScroll(),ue.value=!1})(e),iconColor:"var(--theme-color-main)",labelSize:"13",label:e.label,labelColor:fe.value==e.label?"var(--theme-color-main)":"var(--theme-color-tips)",name:e.label},null,8,["onChange","label","labelColor","name"])))),128))])),_:1},8,["modelValue"]),[[K,ue.value]])])),_:1},8,["show","style"]),m(oe,{ref:"mescrollRef",onInit:O(be),onUp:he,onDown:he,up:Q.mescrollUp,class:F(Q.isH5?"mt-[44px]":""),top:"0"},{default:u((()=>[Q.list.length?(H(),D(t,{key:0},{default:u((()=>[(H(!0),d(p,null,W(Q.list,((e,a)=>(H(),d(p,null,[m(t,{class:"flex flex-col p-3 bg-[#fff] box-border"},{default:u((()=>[m(t,{class:"flex justify-between items-center min-h-[90px]",onClick:l=>((e,l)=>{l?ge(e):J({url:`/addon/saler_tools/pages/product/detail?goods_id=${e.goods_id}`})})(e,ne.value)},{default:u((()=>[m(t,null,{default:u((()=>[e.goods_cover?(H(),D(Y,{key:0,"show-loading":!0,src:O($)(e.goods_cover),mode:"aspectFit",width:"100px",radius:"5",height:"100px",class:"z-10 flex items-center"},null,8,["src"])):(H(),D(Y,{key:1,"show-loading":!0,src:O($)(O(te)),mode:"aspectFit",width:"100px",radius:"5",height:"100px",class:"z-10 flex items-center"},null,8,["src"]))])),_:2},1024),m(t,{class:"flex justify-between flex-col flex-1 pl-2 min-h-[90px]"},{default:u((()=>[m(t,{class:"flex items-baseline leading-5 text-[14px] card-item flex-1"},{default:u((()=>[m(t,{class:"text-[var(--theme-color-main)] flex-1 min-h-[45px]"},{default:u((()=>[m(Z,{lines:2,text:e.goods_name},null,8,["text"])])),_:2},1024),q(m(t,{class:"ml-1"},{default:u((()=>[m(se,{placement:"column"},{default:u((()=>[(H(),D(ee,{key:a,checked:e.selected,"onUpdate:checked":l=>e.selected=l,shape:"circle",onChange:l=>ge(e),activeColor:"var(--theme-color-primary)"},null,8,["checked","onUpdate:checked","onChange"]))])),_:2},1024)])),_:2},1536),[[K,ne.value]])])),_:2},1024),m(t,{class:"flex justify-between items-center mb-2",onClick:l[13]||(l[13]=L((e=>_e.value=!_e.value),["stop"]))},{default:u((()=>[q(m(t,{class:"flex items-center justify-start text-[13px] flex-1 text-[var(--theme-color-content)]"},{default:u((()=>[M(" ￥"+R(e.total_cost)+" ",1),m(t,{class:"ml-1 text-[10px]"},{default:u((()=>[M(R(O(o)("total_take_home_price")),1)])),_:1})])),_:2},1536),[[K,_e.value]]),m(t,{class:"flex items-center justify-end text-[13px] flex-1 text-[var(--theme-text-red)]"},{default:u((()=>[M(" ￥"+R(e.price)+" ",1),m(t,{class:"ml-1 text-[10px] text-[var(--theme-color-main)]"},{default:u((()=>[M(R(O(o)("settlement_price")),1)])),_:1})])),_:2},1024)])),_:2},1024),m(t,{class:"flex justify-between items-center text-xs text-[var(--theme-color-tips)]"},{default:u((()=>[m(t,null,{default:u((()=>[M(R(O(o)("form.update_time")+"："+e.update_time),1)])),_:2},1024),q(m(t,{class:"text-right text-[var(--theme-color-tips)]"},{default:u((()=>[M(R(O(o)("form.count")+e.stock),1)])),_:2},1536),[[K,_e.value]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024),m(i,{class:"!p-0 !m-0"})],64)))),256))])),_:1})):N("",!0)])),_:1},8,["onInit","up","class"]),m(t,{class:"main-fix-footer-safe"}),m(t,{class:"main-fix-footer",style:{"box-shadow":"var(--theme-box-shadow)"}},{default:u((()=>[q(m(t,{class:"flex justify-between h-[30px] items-center mb-2"},{default:u((()=>[m(t,{class:F(["px-3 py-1 rounded mr-3 text-xs",ye.value>0?"bg-[var(--theme-color-primary)] text-[#fff]":"bg-[var(--theme-input-bg)] text-[var(--theme-color-content)]"])},{default:u((()=>[M(R(O(o)("selected_goods"))+" ( "+R(ye.value)+" ) ",1)])),_:1},8,["class"]),m(t,{class:"flex flex-1 items-center justify-start text-base"},{default:u((()=>[m(se,{placement:"row",activeColor:"var(--theme-color-primary)"},{default:u((()=>[m(ee,{checked:ke.selected,"onUpdate:checked":l[14]||(l[14]=e=>ke.selected=e),shape:"circle",label:ke.name,onChange:Ce},null,8,["checked","label"])])),_:1}),q(m(t,{class:"text-xs"},{default:u((()=>[M(" ("+R(ye.value)+") ",1)])),_:1},512),[[K,0!=ye.value]]),m(t,{class:"ml-5"},{default:u((()=>[m(se,{placement:"row",activeColor:"var(--theme-color-primary)"},{default:u((()=>[m(ee,{checked:we.selected,"onUpdate:checked":l[15]||(l[15]=e=>we.selected=e),shape:"circle",label:we.name,onChange:je},null,8,["checked","label"])])),_:1})])),_:1})])),_:1})])),_:1},512),[[K,ne.value]]),m(t,{class:"z-100 flex justify-between items-center"},{default:u((()=>[m(t,{class:"flex w-1/3 justify-center"},{default:u((()=>[m(c,{name:"/static/assets/order/share.png",size:"25",labelPos:"bottom",labelSize:"13",labelColor:"var(--theme-color-main)",label:O(o)("add_goods"),onClick:l[16]||(l[16]=e=>O(J)({url:`/addon/saler_tools/pages/store/select?type=add&store_name=${Q.storeInfo.store_name}`}))},null,8,["label"])])),_:1}),m(t,{class:"flex w-1/3 justify-center"},{default:u((()=>[m(c,{name:"/static/assets/order/sales_return.png",size:"25",labelPos:"bottom",labelSize:"13",labelColor:"var(--theme-color-main)",label:O(o)("goods_transferred_out"),onClick:l[17]||(l[17]=e=>O(J)({url:"/addon/saler_tools/pages/inventory/temporaryWarehouse?type=transfer"}))},null,8,["label"])])),_:1}),m(t,{class:"flex w-1/3 justify-center"},{default:u((()=>[ne.value?(H(),D(c,{key:0,name:"/static/assets/order/delete.png",size:"25",onClick:l[18]||(l[18]=e=>de.value=!0),labelPos:"bottom",labelSize:"13",labelColor:"var(--theme-color-main)",label:O(o)("remove"),color:"var(--theme-color-primary)",bold:""},null,8,["label"])):(H(),D(c,{key:1,name:"/static/assets/order/delete.png",size:"25",onClick:l[19]||(l[19]=e=>ie.value=!0),labelPos:"bottom",labelSize:"13",labelColor:"var(--theme-color-main)",label:O(o)("one_click_clear"),color:"var(--theme-color-primary)",bold:""},null,8,["label"]))])),_:1})])),_:1})])),_:1})])),_:1},8,["style"]),m(ae,{ref_key:"screenPopupRef",ref:xe,modelValue:Q.searchParams,"onUpdate:modelValue":l[20]||(l[20]=e=>Q.searchParams=e)},null,8,["modelValue"]),m(Se,{show:me.value,closeOnClickOverlay:!0,width:"300px",contentTextAlign:"center"},{default:u((()=>[m(t,{class:"flex flex-col text-sm w-full"},{default:u((()=>[m(t,{class:"flex justify-between items-center w-full box-border mb-1"},{default:u((()=>[M(" 商品原始总成本 "),m(t,null,{default:u((()=>[M("￥801,890,000")])),_:1})])),_:1}),m(t,{class:"flex justify-between items-center w-full box-border"},{default:u((()=>[M(" 商品附加成本 "),m(t,null,{default:u((()=>[M("￥0")])),_:1})])),_:1})])),_:1})])),confirmButton:u((()=>[m(Pe,{text:O(o)("tips_i_see"),onClick:l[21]||(l[21]=e=>me.value=!1),color:"var(--theme-color-primary)"},null,8,["text"])])),_:1},8,["show"]),m(Se,{show:ie.value,"onUpdate:show":l[24]||(l[24]=e=>ie.value=e),width:300,showConfirmButton:!1,contentTextAlign:"center"},{confirmButton:u((()=>[m(t,{class:"flex gap-3"},{default:u((()=>[m(Pe,{onClick:l[22]||(l[22]=e=>ie.value=!1),class:"!text-[var(--theme-color-main)]",color:"#f4f5f7",text:O(o)("cancel")},null,8,["text"]),m(Pe,{text:O(o)("OK"),onClick:l[23]||(l[23]=e=>(le({goods_ids:Q.list.filter((e=>e.selected)).map((e=>e.goods_id))}).then((()=>{G({title:o("delete_success")})})),void(ie.value=!1))),color:"var(--theme-color-primary)"},null,8,["text"])])),_:1})])),default:u((()=>[m(t,{class:"flex flex-col !box-border w-full text-[var(--theme-color-main)]"},{default:u((()=>[M(R(O(o)("confirm_one_click_clear")),1)])),_:1})])),_:1},8,["show"]),m(Se,{show:de.value,"onUpdate:show":l[27]||(l[27]=e=>de.value=e),width:300,showConfirmButton:!1,contentTextAlign:"center"},{confirmButton:u((()=>[m(t,{class:"flex gap-3"},{default:u((()=>[m(Pe,{onClick:l[25]||(l[25]=e=>de.value=!1),class:"!text-[var(--theme-color-main)]",color:"#f4f5f7",text:O(o)("cancel")},null,8,["text"]),m(Pe,{text:O(o)("OK"),onClick:l[26]||(l[26]=e=>(()=>{let e=[];e=Q.list.filter((e=>e.selected)).map((e=>e.goods_id)),le({goods_ids:e}).then((()=>{G({title:o("delete_success")}),de.value=!1})),ne.value=!1,de.value=!1})()),color:"var(--theme-color-primary)"},null,8,["text"])])),_:1})])),default:u((()=>[m(t,{class:"flex flex-col !box-border w-full text-[var(--theme-color-main)]"},{default:u((()=>[M(R(O(o)("confirm_delete_select_goods")),1)])),_:1})])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-b3b254b4"]]);export{oe as default};
