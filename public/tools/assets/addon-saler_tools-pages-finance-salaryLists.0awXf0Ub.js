import{d as e,r as t,W as l,cG as a,a3 as s,aC as o,x as r,a5 as i,f as n,w as u,n as c,a6 as m,i as f,b as d,aZ as p,e as x,bc as h,ar as y,as as _,l as b,D as v,aI as w,aM as C,cr as k,k as g,aK as j,bk as I,cN as z,cO as R,cP as U,cg as $,o as L,c as S,h as M,u as W,a as P,p as E,a7 as O,t as V,g as D,an as N,at as q,v as A,aS as B,cQ as F,_ as G}from"./index-DlbBJ3bC.js";import{_ as H}from"./mescroll-empty.lkR5ZfjC.js";import{_ as K}from"./mescroll-body.CzShuCTj.js";import{u as Q}from"./useMescroll.lU6SPXzn.js";const T=G(e({__name:"salaryLists",setup(e){const G=t(!1),T=t(2),Z=l([{name:"上月"},{name:"本月"},{name:"其他时间"}]),J=e=>{T.value=e.index,re.list[T.value]?re.list[T.value].forEach((e=>{e.show=!1})):console.warn("无效索引")},X=t(!1),Y=t(null),ee=t(Date.now()),te=e=>{X.value=!1,e.value=F(e.value/1e3);let t=e.value.split("-")[0],l=e.value.split("-")[1];re.time=t+"年"+l+"月"};a((()=>{Y.value.setFormatter(ae)}));const le=e=>{me.value="待发放"!=e.status,P({url:`/addon/saler_tools/pages/finance/salaryEdit?employeeId=${e.employeeId}&employeeName=${e.name}&info=${e}&isCreateWages=${me.value}`})},ae=(e,t)=>"year"===e?`${t}年`:"month"===e?`${t}月`:t,{mescrollInit:se}=Q(_,y),oe=t(!0),re=l({time:"2025年01月",list:{0:[{employeeId:10001,name:"Mia",title:"店长",salary:"0",status:"已发放",show:!1},{employeeId:10002,name:"员工1",title:"店长",salary:"0",status:"待发放",show:!1},{employeeId:10003,name:"员工2",title:"店长",salary:"0",status:"待发放",show:!1}],1:[{employeeId:10002,name:"员工2",title:"店长",salary:"0",status:"待发放",show:!1},{employeeId:10003,name:"员工3",title:"店长",salary:"0",status:"待发放",show:!1}],2:[{employeeId:10001,name:"Mia",title:"店长",salary:"0",show:!1,status:"待发放",monthList:[{month:6,time:"2024年6月",salary:0,status:"待发放",show:!1},{month:7,time:"2024年7月",salary:0,status:"待发放",show:!1},{month:8,time:"2024年8月",salary:0,status:"待发放",show:!1}]},{employeeId:10004,name:"员工4",title:"店长",salary:"0",show:!1,status:"待发放",monthList:[{month:10,time:"2024年10月",salary:0,status:"待发放",show:!1},{month:11,time:"2024年11月",salary:0,status:"待发放",show:!1},{month:12,time:"2024年12月",salary:0,status:"待发放",show:!1}]},{employeeId:10005,name:"员工5",title:"店长",salary:"0",show:!1,status:"待发放",monthList:[{month:6,time:"2024年6月",salary:0,status:"待发放",show:!1},{month:7,time:"2024年7月",salary:0,status:"待发放",show:!1},{month:8,time:"2024年8月",salary:0,status:"待发放",show:!1}]}]},collapseRef:null}),ie=t("全体员工"),ne=t(!1),ue=l(["全部员工","Mia","员工101","员工102","员工103","员工104","员工105","员工106"]),ce=l([{text:"删除"}]),me=t(!1);let fe={top:0,left:0};const de=()=>{B().select(".custom-box").boundingClientRect((e=>{fe.top=e.top+10,fe.left=e.left-6})).exec()};return s((()=>{o((()=>{de()}))})),r((()=>{o((()=>{de()}))})),(e,t)=>{const l=d(x("up-icon"),b),a=f,s=d(x("up-navbar"),v),r=d(x("up-tabs"),w),y=d(x("up-divider"),C),_=N,B=d(x("up-overlay"),k),F=d(x("up-avatar"),g),Q=d(x("up-tag"),j),de=d(x("up-swipe-action-item"),I),pe=d(x("up-swipe-action"),z),xe=d(x("mescroll-empty"),H),he=d(x("mescroll-body"),K),ye=d(x("up-collapse-item"),R),_e=d(x("up-collapse"),U),be=d(x("up-line"),$),ve=d(x("up-popup"),p),we=d(x("up-datetime-picker"),h);return L(),i(m,null,[n(a,{style:c(e.themeColor())},{default:u((()=>[n(s,{title:"薪资管理",autoBack:!0,safeAreaInsetTop:!0,placeholder:!0},{center:u((()=>[n(a,{class:""},{default:u((()=>[n(l,{name:"question-circle",label:"薪资管理",labelPos:"left",onClick:t[0]||(t[0]=e=>G.value=!0),labelSize:"16",size:"18",color:"var(--theme-color-tips)",labelColor:"var(--theme-color-main)"})])),_:1})])),right:u((()=>[n(a,{class:"u-nav-slot",onClick:t[1]||(t[1]=e=>W(P)({url:`/addon/saler_tools/pages/finance/salaryEdit?isCreateWages=${me.value}`}))},{default:u((()=>[n(a,{class:"text-xs text-[var(--theme-color-main)]"},{default:u((()=>[E(" 创建薪资 ")])),_:1})])),_:1})])),_:1}),n(a,{class:"flex flex-col justify-between bg-[#fff] box-border m-2 rounded h-[220px]"},{default:u((()=>[n(a,{class:"mt-3"},{default:u((()=>[n(r,{list:Z,activeStyle:"color:var(--theme-color-main)",lineWidth:2==T.value?65:30,current:T.value,lineHeight:"4",onClick:J,lineColor:"var(--theme-color-primary)",scrollable:!1,inactiveStyle:"color:var(--theme-color-main)",itemStyle:"margin-bottom:8px;z-index:2"},null,8,["list","lineWidth","current"]),n(y,{class:"!my-0 custom-divider",color:"var(--theme-border)"})])),_:1}),n(a,{class:"flex justify-end pr-3"},{default:u((()=>[n(a,{class:O([2==T.value?"":"hidden","bg-[#fff] rounded flex justify-center items-center border-solid border-1px border-[var(--theme-color-tips)] min-w-[125px]"]),onClick:t[2]||(t[2]=e=>X.value=!0)},{default:u((()=>[n(a,{class:"px-1"},{default:u((()=>[E(V(re.time),1)])),_:1}),n(l,{name:"arrow-down-fill",size:12,color:"var(--theme-color-primary)"})])),_:1},8,["class"])])),_:1}),n(a,{class:"mb-10 flex flex-col items-center"},{default:u((()=>[n(a,{class:"text-[var(--theme-color-tips)]"},{default:u((()=>[E("2024年11月薪资")])),_:1}),n(a,{class:"text-xl font-bold mt-2 !text-nowrap"},{default:u((()=>[E("728,000")])),_:1})])),_:1})])),_:1}),n(a,{class:"flex justify-between items-center"},{default:u((()=>[n(a,{class:"mx-2 p-2 bg-[#fff] rounded min-w-[80px] flex justify-center items-center"},{default:u((()=>[n(l,{name:"arrow-down-fill",label:ie.value?ie.value:"全体员工",labelPos:"left",class:"custom-box",onClick:t[3]||(t[3]=e=>ne.value=!0),labelSize:"14",size:"12",color:"var(--theme-color-primary)",labelColor:"var(--theme-color-main)"},null,8,["label"])])),_:1}),n(a,{class:"mx-2 text-[var(--theme-color-tips)] text-xs"},{default:u((()=>[E(" 左滑可删除 ")])),_:1})])),_:1}),n(B,{show:ne.value,onClick:t[4]||(t[4]=e=>ne.value=!1)},{default:u((()=>[D(n(a,{class:"custom-employee",style:c({top:W(fe).top+"px",left:W(fe).left+"px"})},{default:u((()=>[n(_,{"scroll-y":"true"},{default:u((()=>[n(a,{class:"h-[200px]"},{default:u((()=>[(L(!0),i(m,null,q(ue,((e,t)=>(L(),S(a,{class:"flex flex-col items-center"},{default:u((()=>[n(a,{class:O(["custom-employee-item",[t==ue.length-1?"!border-none":"",e==ie.value?"text-[var(--theme-color-primary)]":""]]),onClick:t=>(e=>{ie.value=e})(e)},{default:u((()=>[E(V(e),1)])),_:2},1032,["class","onClick"])])),_:2},1024)))),256))])),_:1})])),_:1})])),_:1},8,["style"]),[[A,ne.value]])])),_:1},8,["show"]),0==T.value||1==T.value?(L(),S(a,{key:0,class:"m-2"},{default:u((()=>[n(a,{class:"u-collapse-content"},{default:u((()=>[n(he,{ref:"mescrollRef",onInit:W(se),onUp:t[5]||(t[5]=()=>{}),top:"0"},{default:u((()=>[n(pe,{autoClose:!0},{default:u((()=>[(L(!0),i(m,null,q(re.list[T.value],((e,t)=>(L(),S(de,{show:e.show,"onUpdate:show":t=>e.show=t,index:t,closeOnClick:!0,autoClose:!0,onClick:e=>((e,t,l)=>{re.list[l].splice(t,1)})(0,t,T.value),options:ce},{default:u((()=>[n(a,{class:"swipe-action up-border-top up-border-bottom mb-[8px]",onClick:t=>le(e)},{default:u((()=>[n(a,{class:"swipe-action__content"},{default:u((()=>[n(a,{class:"flex justify-between items-center pl-3 pr-2"},{default:u((()=>[n(a,{class:"flex justift-satrt items-center"},{default:u((()=>[n(F,{class:"border border-width-[1px] border-[#ffffff] border-solid",src:"/static/assets/logo.png",size:"55"}),n(a,{class:"ml-2 h-[50px] flex flex-col justify-between text-sm"},{default:u((()=>[n(a,{class:"text-[var(--theme-color-main)]"},{default:u((()=>[E(V(e.name),1)])),_:2},1024),n(a,{class:"flex justify-start items-center"},{default:u((()=>[n(a,{class:"text-[var(--theme-color-tips)] mr-2"},{default:u((()=>[E(V(e.title),1)])),_:2},1024),e.status?(L(),S(a,{key:0},{default:u((()=>[n(Q,{text:e.status,bgColor:"#64748b",borderColor:"#64748b",color:"#fff",size:"mini"},null,8,["text"])])),_:2},1024)):M("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),n(a,{class:"flex h-[50px] justify-end"},{default:u((()=>[n(a,{class:"flex flex-col justify-between items-end mr-2"},{default:u((()=>[n(a,{class:"text-xs text-[var(--theme-color-main)]"},{default:u((()=>[E(" 薪资总额 ")])),_:1}),n(a,{class:"text-[var(--theme-text-red)]"},{default:u((()=>[E("￥"+V(e.salary),1)])),_:2},1024)])),_:2},1024),n(l,{name:"arrow-right",size:"18",color:"var(--theme-color-tips)"})])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1032,["show","onUpdate:show","index","onClick","options"])))),256))])),_:1}),re.list.length||oe.value?M("",!0):(L(),S(xe,{key:0,option:{tip:"暂无数据"}}))])),_:1},8,["onInit"])])),_:1})])),_:1})):M("",!0),2==T.value?(L(),S(a,{key:1,class:"mx-2 custom-collaps"},{default:u((()=>[n(he,{ref:"mescrollRef",onInit:W(se),onUp:t[6]||(t[6]=()=>{}),top:"0"},{default:u((()=>[n(a,{class:"custom-page__item"},{default:u((()=>[n(_e,{border:!1,class:"",ref:e=>re.collapseRef=e},{default:u((()=>[(L(!0),i(m,null,q(re.list[2],((e,t)=>(L(),S(ye,{border:!1,class:"rounded my-2 bg-[#fff]"},{title:u((()=>[n(a,{class:"swipe-action up-border-top up-border-bottom"},{default:u((()=>[n(a,{class:"flex justify-between items-center box-border"},{default:u((()=>[n(a,{class:"flex justift-satrt items-center"},{default:u((()=>[n(F,{class:"border border-width-[1px] border-[#ffffff] border-solid",src:"/static/assets/logo.png",size:"55"}),n(a,{class:"ml-2 h-[50px] flex flex-col justify-between text-sm"},{default:u((()=>[n(a,{class:"text-[var(--theme-color-main)]"},{default:u((()=>[E(V(e.name),1)])),_:2},1024),n(a,{class:"flex justify-start items-center"},{default:u((()=>[n(a,{class:"text-[var(--theme-color-tips)] mr-2"},{default:u((()=>[E(V(e.title),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),n(a,{class:"flex h-[50px] justify-end"},{default:u((()=>[n(a,{class:"flex flex-col justify-between items-end mr-2"},{default:u((()=>[n(a,{class:"text-xs text-[var(--theme-color-main)]"},{default:u((()=>[E(" 薪资总额 ")])),_:1}),n(a,{class:"text-[var(--theme-text-red)]"},{default:u((()=>[E("￥"+V(e.salary),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),default:u((()=>[n(pe,{autoClose:!0},{default:u((()=>[(L(!0),i(m,null,q(e.monthList,((s,r)=>(L(),S(de,{show:s.show,"onUpdate:show":e=>s.show=e,autoClose:!0,onClick:e=>((e,t,l)=>{re.list[2][t].monthList.splice(l,1),console.log(re.collapseRef),o((()=>{re.collapseRef.children[t].init(),re.collapseRef.children[t].expanded=!0}))})(0,t,r,T.value),options:ce},{default:u((()=>[n(a,{class:"flex justify-between items-center py-3 pl-5 pr-3",onClick:t=>le(e)},{default:u((()=>[n(a,{class:"flex justify-between items-center"},{default:u((()=>[n(a,{class:"mr-2 text-[var(--theme-color-main)]"},{default:u((()=>[E(V(s.time),1)])),_:2},1024),s.status?(L(),S(a,{key:0},{default:u((()=>[n(Q,{text:s.status,bgColor:"#64748b",borderColor:"#64748b",color:"#fff",size:"mini"},null,8,["text"])])),_:2},1024)):M("",!0)])),_:2},1024),n(a,{class:"flex justify-between items-center"},{default:u((()=>[n(a,{class:"text-[var(--theme-text-red)] mr-1"},{default:u((()=>[E(" ￥"+V(s.salary),1)])),_:2},1024),n(l,{name:"arrow-right",size:"14",color:"var(--theme-color-tips)"})])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1032,["show","onUpdate:show","onClick","options"])))),256))])),_:2},1024)])),_:2},1024)))),256))])),_:1},512)])),_:1})])),_:1},8,["onInit"])])),_:1})):M("",!0)])),_:1},8,["style"]),n(ve,{show:G.value,mode:"bottom",onClose:t[8]||(t[8]=e=>G.value=!1),onOpen:t[9]||(t[9]=e=>G.value=!0)},{default:u((()=>[n(a,{class:"p-4 flex justify-between items-center"},{default:u((()=>[n(a),n(a,{class:"flex !text-center font-bold text-[30rpx]"},{default:u((()=>[E("薪资管理")])),_:1}),n(l,{name:"close",size:"15",onClick:t[7]||(t[7]=e=>G.value=!1)})])),_:1}),n(be),n(a,{class:"p-4 flex flex-col mb-5"},{default:u((()=>[n(a,{style:{"text-indent":"1em"}},{default:u((()=>[E(" 创建员工薪资方案，根据实际业务统计销售人员的销售提成、回收提成，以及维修保养成本，发放薪资可锁定薪资明细。 ")])),_:1})])),_:1})])),_:1},8,["show"]),n(we,{ref_key:"datetimePickerRef",ref:Y,show:X.value,modelValue:ee.value,"onUpdate:modelValue":t[10]||(t[10]=e=>ee.value=e),mode:"year-month",title:"选择时间",onCancel:t[11]||(t[11]=e=>X.value=!1),formatter:ae,onConfirm:te},null,8,["show","modelValue"])],64)}}}),[["__scopeId","data-v-718462ba"]]);export{T as default};
