import{d as e,r as l,W as a,cq as t,E as s,a3 as o,aC as r,x as c,H as n,a5 as i,f as u,w as m,n as d,a6 as f,i as p,b as x,aZ as _,e as b,ah as h,ar as v,as as y,l as g,D as k,aJ as w,aI as C,ci as j,cj as S,cr as z,cs as P,aM as U,m as V,aL as R,cg as I,a4 as O,o as q,u as H,s as A,p as L,t as M,g as T,R as B,at as D,c as E,v as W,a7 as F,h as J,M as K,aS as N,a as Z,_ as G}from"./index-DlbBJ3bC.js";import{_ as Q}from"./mescroll-body.CzShuCTj.js";import{u as X}from"./useMescroll.lU6SPXzn.js";import{j as Y,h as $}from"./order.UCMsrCaA.js";import{s as ee}from"./index.Bh4RlGGN.js";import"./mescroll-empty.lkR5ZfjC.js";import"./index.DK0m-eAv.js";import"./index.COs-0cDI.js";import"./auth.BQpGjoDu.js";/* empty css                                                              *//* empty css                                                                     */const le=G(e({__name:"lists",setup(e){const G=l(),le=l(!1),ae=a({lockStat:[],list:[],searchParams:{search:"",__order__:"",category_id:null,order_status:"LOCK_ORDER"},mescrollUp:{page:{size:10}},mescrollRef:null,isH5:!1}),te=e=>{let l={page:e.num,limit:e.size,...ae.searchParams};xe.value=!0,Y().then((e=>{ae.lockStat=e.data})),1==e.num&&(ae.list=[]),$(l).then((l=>{let a=l.data.data;1==e.num&&(ae.list=[]),ae.list=ae.list.concat(a),e.endSuccess(l.data.data.length),xe.value=!1})).catch((()=>{xe.value=!1,e.endErr()}))},se=e=>{ae.searchParams.category_id=e.category_id,pe().scrollTo(0,300),pe().resetUpScroll()},oe=l(!1),re=t(),ce=s({get:()=>[{category_key:"ALL",category_id:null},...re.value],set(e){}}),ne=l(!1),ie={top:0},ue=()=>{N().select(".custom-overlay").boundingClientRect((e=>{ie.top=e.top+36})).exec()};ae.isH5=!0,o((()=>{r((()=>{ue()}))})),c((()=>{r((()=>{ue()}))}));const me=l("按最近锁单"),de=a([{label:"按最近锁单",value:""},{label:"按最久锁单",value:"lock_time,asc"},{label:"按定金最高",value:"deposit,desc"},{label:"按定金最低",value:"deposit,asc"}]),{mescrollInit:fe,getMescroll:pe}=X(y,v),xe=l(!0);return n((()=>{ae.searchParams&&(ae.searchParams={...ae.searchParams})})),(e,l)=>{const a=x(b("up-icon"),g),t=p,s=x(b("up-navbar"),k),o=x(b("up-search"),w),r=x(b("up-tabs"),C),c=x(b("up-radio"),j),n=x(b("up-radio-group"),S),v=x(b("up-overlay"),z),y=x(b("up-sticky"),P),N=x(b("up-divider"),U),X=x(b("up-image"),V),Y=x(b("up-text"),R),$=x(b("mescroll-body"),Q),re=x(b("up-line"),I),ue=x(b("up-popup"),_),xe=x(b("up-button"),O),_e=x(b("up-modal"),h);return q(),i(f,null,[u(t,{style:d(e.themeColor()),class:"page-container"},{default:m((()=>[u(y,{bgColor:"#f3f4f6"},{default:m((()=>[u(s,{title:H(A)("explain.lock"),autoBack:!0,safeAreaInsetTop:!0,placeholder:!ae.isH5},{center:m((()=>[u(t,null,{default:m((()=>[u(a,{name:"question-circle",label:H(A)("explain.lock"),labelPos:"left",onClick:l[0]||(l[0]=e=>le.value=!0),labelSize:"16",size:"18",color:"var(--theme-color-tips)",labelColor:"var(--theme-color-main)"},null,8,["label"])])),_:1})])),_:1},8,["title","placeholder"]),u(t,{class:"bg-[#fff] p-2"},{default:m((()=>[u(o,{placeholder:"搜索商品名称/独立编码",shape:"square",modelValue:ae.searchParams.search,"onUpdate:modelValue":l[1]||(l[1]=e=>ae.searchParams.search=e),onChange:l[2]||(l[2]=e=>(ae.list=[],void pe().resetUpScroll())),showAction:!1},null,8,["modelValue"])])),_:1}),u(t,{class:"bg-[#fff]"},{default:m((()=>[u(r,{style:{"white-space":"nowrap !important"},list:ce.value,keyName:"category_name",activeStyle:"color:var(--theme-color-primary);font-size:16px",lineWidth:"30",onChange:se,lineColor:"var(--theme-color-primary)",inactiveStyle:"color:var(--theme-color-main);font-size:13px",itemStyle:"padding:5px 10px;z-index:2;display: inline-block"},{content:m((e=>[L(M(H(A)(e.item.category_key)),1)])),_:1},8,["list"])])),_:1}),u(t,{class:"custom-overlay h-[35px] px-3 mb-[1px] flex justify-between items-center w-full box-border text-[13px] bg-[#fff] text-[var(--theme-color-main)]"},{default:m((()=>[u(t,{class:"flex mr-5",onClick:l[4]||(l[4]=e=>ne.value=!ne.value)},{default:m((()=>[u(t,{class:"flex justify-start items-center"},{default:m((()=>[L(M(me.value)+" ",1),u(a,{name:ne.value?"arrow-up":"arrow-down",bold:"",size:"13",class:"ml-1",onClick:l[3]||(l[3]=()=>{}),color:"var(--theme-color-main)"},null,8,["name"])])),_:1})])),_:1}),u(t,{class:"flex justify-start items-center",onClick:l[5]||(l[5]=e=>G.value.open())},{default:m((()=>[L(M(H(A)("screen"))+" ",1),u(a,{name:"/static/assets/stock/screen.png",bold:"",size:"16",class:"ml-1",color:"var(--theme-color-main)"})])),_:1})])),_:1}),u(v,{class:"sort-card",show:ne.value,onClick:l[8]||(l[8]=e=>ne.value=!1),style:d({top:ie.top+"px"})},{default:m((()=>[T(u(n,{modelValue:me.value,"onUpdate:modelValue":l[6]||(l[6]=e=>me.value=e),placement:"column",iconPlacement:"right",onClick:l[7]||(l[7]=B((()=>{}),["stop"])),activeColor:"#fff",iconColor:"#000",class:"px-3 py-2 box-border bg-[#fff] border-none pb-[10px]"},{default:m((()=>[(q(!0),i(f,null,D(de,((e,l)=>(q(),E(c,{customStyle:{marginBottom:"2px",marginTop:"2px"},key:l,iconSize:"20",onChange:l=>(e=>{me.value=e,ae.searchParams.__order__=e.value,pe().resetUpScroll(),ne.value=!1})(e),iconColor:"var(--theme-color-main)",labelSize:"13",label:e.label,labelColor:me.value==e.label?"var(--theme-color-main)":"var(--theme-color-tips)",name:e.label},null,8,["onChange","label","labelColor","name"])))),128))])),_:1},8,["modelValue"]),[[W,ne.value]])])),_:1},8,["show","style"])])),_:1}),u($,{ref:"mescrollRef",onInit:H(fe),onUp:te,onDown:te,up:ae.mescrollUp,class:F(ae.isH5?"mt-[44px]":""),top:"0"},{default:m((()=>[ae.list.length?(q(),E(t,{key:0},{default:m((()=>[u(t,{class:"text-xs text-[var(--theme-color-content)] bg-[#fff] w-full box-border mb-1"},{default:m((()=>[u(t,{class:"flex justify-between items-center py-2"},{default:m((()=>[u(t,{class:"w-1/2 flex text-center flex-col items-center border-solid border-r-1px border-[#dcdfe6] border-0",onClick:l[9]||(l[9]=e=>oe.value=!0)},{default:m((()=>[u(t,{class:"mb-1 text-[var(--theme-color-primary)] text-sm"},{default:m((()=>[L(M(ae.lockStat.totol_cost||0),1)])),_:1}),u(a,{name:"question-circle",label:"总成本",labelPos:"left",labelSize:"12px",size:"12",color:"var(--theme-color-primary)",labelColor:"var(--theme-color-primary)",class:"mr-1"})])),_:1}),u(t,{class:"w-1/2 flex text-center flex-col items-center"},{default:m((()=>[u(t,{class:"mb-1 text-[var(--theme-color-primary)] text-sm"},{default:m((()=>[L(M(ae.lockStat.deposit||0),1)])),_:1}),u(t,null,{default:m((()=>[L("定金总额")])),_:1})])),_:1})])),_:1}),u(N,{class:"!my-1"}),u(t,{class:"flex justify-between items-center py-3"},{default:m((()=>[u(t,{class:"w-1/2 flex text-center flex-col items-center"},{default:m((()=>[u(t,{class:"mb-1 text-[var(--theme-color-primary)] text-sm"},{default:m((()=>[L(M(ae.lockStat.exp_trans_price||0),1)])),_:1}),u(t,null,{default:m((()=>[L("预计成交总额（元）")])),_:1})])),_:1}),u(t,{class:"w-1/2 flex text-center flex-col items-center border-solid border-l-1px border-[#dcdfe6] border-0"},{default:m((()=>[u(t,{class:"mb-1 text-[var(--theme-color-primary)] text-sm"},{default:m((()=>[L(M(ae.lockStat.goods_num||0),1)])),_:1}),u(t,{class:"text-red-500"},{default:m((()=>[L("锁单数量（个）")])),_:1})])),_:1})])),_:1})])),_:1}),(q(!0),i(f,null,D(ae.list,((e,l)=>(q(),i(f,null,[u(t,{class:"flex flex-col p-3 bg-[#fff] box-border",onClick:l=>(e=>{Z({url:"/addon/saler_tools/pages/lockOrder/detail",param:{order_id:e.order_id}})})(e)},{default:m((()=>[u(t,{class:"text-xs mb-1 flex justify-between items-center"},{default:m((()=>[u(t,null,{default:m((()=>[L("销售人："+M(e.lock_name||H(A)("nothing")),1)])),_:2},1024),e.lock_time?(q(),E(t,{key:0,class:"text-[var(--theme-color-tips)]"},{default:m((()=>[L(M(e.lock_time),1)])),_:2},1024)):J("",!0)])),_:2},1024),u(t,{class:"flex justify-between items-center"},{default:m((()=>[e.goods_cover?(q(),E(X,{key:0,"show-loading":!0,src:H(K)(e.goods_cover),mode:"aspectFit",width:"100px",radius:"5",height:"100px",class:"z-10 flex items-center"},null,8,["src"])):J("",!0),u(t,{class:"pl-2 flex justify-between flex-col flex-1 min-h-[90px]"},{default:m((()=>[u(t,{class:"text-xs text-[var(--theme-color-main)]"},{default:m((()=>[u(Y,{lines:1,text:e.goods_name},null,8,["text"])])),_:2},1024),u(t,{class:"flex flex-col"},{default:m((()=>[u(t,{class:"text-xs text-[var(--theme-text-blue)] my-2 text-right"},{default:m((()=>[L(" 数量："+M(e.goods_num||0),1)])),_:2},1024),u(t,{class:"flex justify-between items-center mb-1 text-[13px]"},{default:m((()=>[u(t,{class:"text-[var(--theme-color-tips)]"},{default:m((()=>[L(" 定金：￥"+M(e.deposit||0),1)])),_:2},1024),u(t,{class:"text-[var(--theme-text-red)]"},{default:m((()=>[L(" 预计成交：￥"+M(e.exp_trans_price||0),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),u(N,{class:"!p-0 !m-0"})],64)))),256))])),_:1})):J("",!0)])),_:1},8,["onInit","up","class"])])),_:1},8,["style"]),u(ue,{show:le.value,mode:"bottom",onClose:l[11]||(l[11]=e=>le.value=!1),onOpen:l[12]||(l[12]=e=>le.value=!0)},{default:m((()=>[u(t,{class:"p-4 flex justify-between items-center"},{default:m((()=>[u(t),u(t,{class:"flex !text-center font-bold text-[30rpx]"},{default:m((()=>[L(M(H(A)("explain.lock")),1)])),_:1}),u(a,{name:"close",size:"15",onClick:l[10]||(l[10]=e=>le.value=!1)})])),_:1}),u(re),u(t,{class:"p-4 flex flex-col"},{default:m((()=>[u(t,null,{default:m((()=>[L(M(H(A)("explain.lock0")),1)])),_:1}),u(t,{style:{"text-indent":"1em"},class:"mt-1"},{default:m((()=>[L(M(H(A)("explain.lock1")),1)])),_:1}),u(t,{style:{"text-indent":"1em"},class:"mt-1"},{default:m((()=>[L(M(H(A)("explain.lock2")),1)])),_:1})])),_:1})])),_:1},8,["show"]),u(_e,{show:oe.value,closeOnClickOverlay:!0,width:"300px",contentTextAlign:"center"},{default:m((()=>[u(t,{class:"flex flex-col text-sm w-full"},{default:m((()=>[u(t,{class:"flex justify-between items-center w-full box-border mb-1"},{default:m((()=>[L(" 商品原始总成本 "),u(t,null,{default:m((()=>[L("￥"+M(ae.lockStat.initial_cost||0),1)])),_:1})])),_:1}),u(t,{class:"flex justify-between items-center w-full box-border"},{default:m((()=>[L(" 商品附加成本 "),u(t,null,{default:m((()=>[L("￥"+M(ae.lockStat.additional_total_cost||0),1)])),_:1})])),_:1})])),_:1})])),confirmButton:m((()=>[u(xe,{text:H(A)("tips_i_see"),onClick:l[13]||(l[13]=e=>oe.value=!1),color:"var(--theme-color-primary)"},null,8,["text"])])),_:1},8,["show"]),u(ee,{ref_key:"screenPopupRef",ref:G,modelValue:ae.searchParams,"onUpdate:modelValue":l[14]||(l[14]=e=>ae.searchParams=e)},null,8,["modelValue"])],64)}}}),[["__scopeId","data-v-fed52ae9"]]);export{le as default};
